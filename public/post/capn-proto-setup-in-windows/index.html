<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Cap&#39;n Proto Windows环境设置 | 虫子樱桃</title>
<meta name="keywords" content="golang, cap&#39;n, proto" />
<meta name="description" content="Cap&rsquo;n proto 号称是比protobuff更快的proto语言。官网截图
Cap’n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think Protocol Buffers, except faster. In fact, in benchmarks, Cap’n Proto is INFINITY TIMES faster than Protocol Buffers.
协议特性
Cap’n Proto’s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered “levels”, so that implementations may declare which features they have covered by advertising a level number.">
<meta name="author" content="czyt">
<link rel="canonical" href="https://czyt.tech/post/capn-proto-setup-in-windows/" />
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.2300a0eceb56958fe6e1d606ffa0a755d9ef95657cbf4b79a3fa1d3b9dc8b654.css" integrity="sha256-IwCg7OtWlY/m4dYG/6CnVdnvlWV8v0t5o/odO53ItlQ=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js" integrity="sha256-uVus3DnjejMqn4g7Hni&#43;Srwf3KK8HyZB9V4809q9TWE="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://czyt.tech/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://czyt.tech/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://czyt.tech/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://czyt.tech/apple-touch-icon.png">
<link rel="mask-icon" href="https://czyt.tech/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.105.0">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Cap&#39;n Proto Windows环境设置" />
<meta property="og:description" content="Cap&rsquo;n proto 号称是比protobuff更快的proto语言。官网截图
Cap’n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think Protocol Buffers, except faster. In fact, in benchmarks, Cap’n Proto is INFINITY TIMES faster than Protocol Buffers.
协议特性
Cap’n Proto’s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered “levels”, so that implementations may declare which features they have covered by advertising a level number." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://czyt.tech/post/capn-proto-setup-in-windows/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-06-10T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-06-10T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cap&#39;n Proto Windows环境设置"/>
<meta name="twitter:description" content="Cap&rsquo;n proto 号称是比protobuff更快的proto语言。官网截图
Cap’n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think Protocol Buffers, except faster. In fact, in benchmarks, Cap’n Proto is INFINITY TIMES faster than Protocol Buffers.
协议特性
Cap’n Proto’s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered “levels”, so that implementations may declare which features they have covered by advertising a level number."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://czyt.tech/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Cap'n Proto Windows环境设置",
      "item": "https://czyt.tech/post/capn-proto-setup-in-windows/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Cap'n Proto Windows环境设置",
  "name": "Cap\u0027n Proto Windows环境设置",
  "description": "Cap\u0026rsquo;n proto 号称是比protobuff更快的proto语言。官网截图\nCap’n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think Protocol Buffers, except faster. In fact, in benchmarks, Cap’n Proto is INFINITY TIMES faster than Protocol Buffers.\n协议特性\nCap’n Proto’s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered “levels”, so that implementations may declare which features they have covered by advertising a level number.",
  "keywords": [
    "golang", "cap'n", "proto"
  ],
  "articleBody": "Cap’n proto 号称是比protobuff更快的proto语言。官网截图\nCap’n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think Protocol Buffers, except faster. In fact, in benchmarks, Cap’n Proto is INFINITY TIMES faster than Protocol Buffers.\n协议特性\nCap’n Proto’s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered “levels”, so that implementations may declare which features they have covered by advertising a level number.\nLevel 1: Object references and promise pipelining, as described above. Level 2: Persistent capabilities. You may request to “save” a capability, receiving a persistent token which can be used to “restore” it in the future (on a new connection). Not all capabilities can be saved; the host app must implement support for it. Building this into the protocol makes it possible for a Cap’n-Proto-based data store to transparently save structures containing capabilities without knowledge of the particular capability types or the application built on them, as well as potentially enabling more powerful analysis and visualization of stored data. Level 3: Three-way interactions. A network of Cap’n Proto vats (nodes) can pass object references to each other and automatically form direct connections as needed. For instance, if Alice (on machine A) sends Bob (on machine B) a reference to Carol (on machine C), then machine B will form a new connection to machine C so that Bob can call Carol directly without proxying through machine A. Level 4: Reference equality / joining. If you receive a set of capabilities from different parties which should all point to the same underlying objects, you can verify securely that they in fact do. This is subtle, but enables many security patterns that rely on one party being able to verify that two or more other parties agree on something (imagine a digital escrow agent). See E’s page on equality. 目前GO只支持Level 1的特性，Level3的RPC特性已经在安排。\n下面整理其在Windows环境下的编译环境搭建步骤。\n编译器 下载Windows32的编译包 (可能不是最新，可以从官网安装介绍 获取最新)。将 capnp.exe, capnpc-c++.exe, 和capnpc-capnp.exe加入系统环境变量，推荐解压到%GOPATH%.\n然后安装GO的proto生成工具\ngo install capnproto.org/go/capnp/v3/capnpc-go@latest Annotations 包 目前Cap’n proto 的 Annotations是放入到代码仓库的，因为新版Go默认是启用了GOMODULE的，所以，需要按下面操作将仓库拉取到%GOPATH%.\ngo env -w GO111MODULE=off go get -u capnproto.org/go/capnp/v3/ go env -w GO111MODULE=on 编译验证 一般模型 books.capnp文件\nusing Go = import \"/go.capnp\"; @0x85d3acc39d94e0f8; $Go.package(\"books\"); $Go.import(\"foo/books\"); struct Book { title @0 :Text; # Title of the book. pageCount @1 :Int32; # Number of pages in the book. } 编译\ncapnp compile -I %GOPATH%/src/capnproto.org/go/capnp/std -ogo:.. .\\books.capnp 生成文件books.capnp.go\n// Code generated by capnpc-go. DO NOT EDIT. package books import ( capnp \"capnproto.org/go/capnp/v3\" text \"capnproto.org/go/capnp/v3/encoding/text\" schemas \"capnproto.org/go/capnp/v3/schemas\" ) type Book struct{ capnp.Struct } // Book_TypeID is the unique identifier for the type Book. const Book_TypeID = 0x8100cc88d7d4d47c func NewBook(s *capnp.Segment) (Book, error) { st, err := capnp.NewStruct(s, capnp.ObjectSize{DataSize: 8, PointerCount: 1}) return Book{st}, err } func NewRootBook(s *capnp.Segment) (Book, error) { st, err := capnp.NewRootStruct(s, capnp.ObjectSize{DataSize: 8, PointerCount: 1}) return Book{st}, err } func ReadRootBook(msg *capnp.Message) (Book, error) { root, err := msg.Root() return Book{root.Struct()}, err } func (s Book) String() string { str, _ := text.Marshal(0x8100cc88d7d4d47c, s.Struct) return str } func (s Book) Title() (string, error) { p, err := s.Struct.Ptr(0) return p.Text(), err } func (s Book) HasTitle() bool { return s.Struct.HasPtr(0) } func (s Book) TitleBytes() ([]byte, error) { p, err := s.Struct.Ptr(0) return p.TextBytes(), err } func (s Book) SetTitle(v string) error { return s.Struct.SetText(0, v) } func (s Book) PageCount() int32 { return int32(s.Struct.Uint32(0)) } func (s Book) SetPageCount(v int32) { s.Struct.SetUint32(0, uint32(v)) } // Book_List is a list of Book. type Book_List = capnp.StructList[Book] // NewBook creates a new list of Book. func NewBook_List(s *capnp.Segment, sz int32) (Book_List, error) { l, err := capnp.NewCompositeList(s, capnp.ObjectSize{DataSize: 8, PointerCount: 1}, sz) return capnp.StructList[Book]{List: l}, err } // Book_Future is a wrapper for a Book promised by a client call. type Book_Future struct{ *capnp.Future } func (p Book_Future) Struct() (Book, error) { s, err := p.Future.Struct() return Book{s}, err } const schema_85d3acc39d94e0f8 = \"x\\xda\\x12Ht`1\\xe4\\xdd\\xcf\\xc8\\xc0\\x14(\\xc2\\xca\" + \"\\xb6\\xbf\\xe6\\xca\\x95\\xeb\\x1dg\\x1a\\x03y\\x18\\x19\\xff\\xffx\" + \"0e\\xee\\xe15\\x97[\\x19X\\x19\\xd9\\x19\\x18\\x04\\x8fv\" + \"\\x09\\x9e\\x05\\xd1'\\xcb\\x19t\\xff'\\xe5\\xe7g\\x17\\xeb%\" + \"'2\\x16\\xe4\\x15X9\\xe5\\xe7g30\\x0402\\x06\" + \"r0\\xb300\\xb0020\\x08j\\x1a10\\x04\\xaa\" + \"03\\x06\\x1a0122\\x8a0\\x82\\xc4t\\x83\\x18\\x18\" + \"\\x02u\\x98\\x19\\x03-\\x98\\x18\\xe5K2KrR\\x19y\" + \"\\x18\\x98\\x18y\\x18\\x18\\xff\\x17$\\xa6\\xa7:\\xe7\\x97\\xe61\" + \"0\\x960\\xb2001\\xb200\\x02\\x02\\x00\\x00\\xff\\xff\" + \"N\\xd3$\\xbc\" func init() { schemas.Register(schema_85d3acc39d94e0f8, 0x8100cc88d7d4d47c) } 序列化与反序列化参考官方GitHub https://github.com/capnproto/go-capnproto2/wiki/Getting-Started\n服务 定义接口 hash.capnp\nusing Go = import \"/go.capnp\"; @0xdb8274f9144abc7e; $Go.package(\"hashes\"); $Go.import(\"foo/hashes\"); interface HashFactory { newSha1 @0 () -\u003e (hash :Hash); } interface Hash { write @0 (data :Data) -\u003e (); sum @1 () -\u003e (hash :Data); } 编译\ncapnp compile -I %GOPATH%/src/capnproto.org/go/capnp/std -ogo:.. .\\hash.capnp 生成的GO文件内容\n// Code generated by capnpc-go. DO NOT EDIT. package hashes import ( capnp \"capnproto.org/go/capnp/v3\" text \"capnproto.org/go/capnp/v3/encoding/text\" schemas \"capnproto.org/go/capnp/v3/schemas\" server \"capnproto.org/go/capnp/v3/server\" context \"context\" ) type HashFactory struct{ Client *capnp.Client } // HashFactory_TypeID is the unique identifier for the type HashFactory. const HashFactory_TypeID = 0xaead580f97fddabc func (c HashFactory) NewSha1(ctx context.Context, params func(HashFactory_newSha1_Params) error) (HashFactory_newSha1_Results_Future, capnp.ReleaseFunc) { s := capnp.Send{ Method: capnp.Method{ InterfaceID: 0xaead580f97fddabc, MethodID: 0, InterfaceName: \"remote.capnp:HashFactory\", MethodName: \"newSha1\", }, } if params != nil { s.ArgsSize = capnp.ObjectSize{DataSize: 0, PointerCount: 0} s.PlaceArgs = func(s capnp.Struct) error { return params(HashFactory_newSha1_Params{Struct: s}) } } ans, release := c.Client.SendCall(ctx, s) return HashFactory_newSha1_Results_Future{Future: ans.Future()}, release } func (c HashFactory) AddRef() HashFactory { return HashFactory{ Client: c.Client.AddRef(), } } func (c HashFactory) Release() { c.Client.Release() } // A HashFactory_Server is a HashFactory with a local implementation. type HashFactory_Server interface { NewSha1(context.Context, HashFactory_newSha1) error } // HashFactory_NewServer creates a new Server from an implementation of HashFactory_Server. func HashFactory_NewServer(s HashFactory_Server, policy *server.Policy) *server.Server { c, _ := s.(server.Shutdowner) return server.New(HashFactory_Methods(nil, s), s, c, policy) } // HashFactory_ServerToClient creates a new Client from an implementation of HashFactory_Server. // The caller is responsible for calling Release on the returned Client. func HashFactory_ServerToClient(s HashFactory_Server, policy *server.Policy) HashFactory { return HashFactory{Client: capnp.NewClient(HashFactory_NewServer(s, policy))} } // HashFactory_Methods appends Methods to a slice that invoke the methods on s. // This can be used to create a more complicated Server. func HashFactory_Methods(methods []server.Method, s HashFactory_Server) []server.Method { if cap(methods) == 0 { methods = make([]server.Method, 0, 1) } methods = append(methods, server.Method{ Method: capnp.Method{ InterfaceID: 0xaead580f97fddabc, MethodID: 0, InterfaceName: \"remote.capnp:HashFactory\", MethodName: \"newSha1\", }, Impl: func(ctx context.Context, call *server.Call) error { return s.NewSha1(ctx, HashFactory_newSha1{call}) }, }) return methods } // HashFactory_newSha1 holds the state for a server call to HashFactory.newSha1. // See server.Call for documentation. type HashFactory_newSha1 struct { *server.Call } // Args returns the call's arguments. func (c HashFactory_newSha1) Args() HashFactory_newSha1_Params { return HashFactory_newSha1_Params{Struct: c.Call.Args()} } // AllocResults allocates the results struct. func (c HashFactory_newSha1) AllocResults() (HashFactory_newSha1_Results, error) { r, err := c.Call.AllocResults(capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return HashFactory_newSha1_Results{Struct: r}, err } type HashFactory_newSha1_Params struct{ capnp.Struct } // HashFactory_newSha1_Params_TypeID is the unique identifier for the type HashFactory_newSha1_Params. const HashFactory_newSha1_Params_TypeID = 0x92b20ad1a58ca0ca func NewHashFactory_newSha1_Params(s *capnp.Segment) (HashFactory_newSha1_Params, error) { st, err := capnp.NewStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}) return HashFactory_newSha1_Params{st}, err } func NewRootHashFactory_newSha1_Params(s *capnp.Segment) (HashFactory_newSha1_Params, error) { st, err := capnp.NewRootStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}) return HashFactory_newSha1_Params{st}, err } func ReadRootHashFactory_newSha1_Params(msg *capnp.Message) (HashFactory_newSha1_Params, error) { root, err := msg.Root() return HashFactory_newSha1_Params{root.Struct()}, err } func (s HashFactory_newSha1_Params) String() string { str, _ := text.Marshal(0x92b20ad1a58ca0ca, s.Struct) return str } // HashFactory_newSha1_Params_List is a list of HashFactory_newSha1_Params. type HashFactory_newSha1_Params_List = capnp.StructList[HashFactory_newSha1_Params] // NewHashFactory_newSha1_Params creates a new list of HashFactory_newSha1_Params. func NewHashFactory_newSha1_Params_List(s *capnp.Segment, sz int32) (HashFactory_newSha1_Params_List, error) { l, err := capnp.NewCompositeList(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}, sz) return capnp.StructList[HashFactory_newSha1_Params]{List: l}, err } // HashFactory_newSha1_Params_Future is a wrapper for a HashFactory_newSha1_Params promised by a client call. type HashFactory_newSha1_Params_Future struct{ *capnp.Future } func (p HashFactory_newSha1_Params_Future) Struct() (HashFactory_newSha1_Params, error) { s, err := p.Future.Struct() return HashFactory_newSha1_Params{s}, err } type HashFactory_newSha1_Results struct{ capnp.Struct } // HashFactory_newSha1_Results_TypeID is the unique identifier for the type HashFactory_newSha1_Results. const HashFactory_newSha1_Results_TypeID = 0xea3e50f7663f7bdf func NewHashFactory_newSha1_Results(s *capnp.Segment) (HashFactory_newSha1_Results, error) { st, err := capnp.NewStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return HashFactory_newSha1_Results{st}, err } func NewRootHashFactory_newSha1_Results(s *capnp.Segment) (HashFactory_newSha1_Results, error) { st, err := capnp.NewRootStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return HashFactory_newSha1_Results{st}, err } func ReadRootHashFactory_newSha1_Results(msg *capnp.Message) (HashFactory_newSha1_Results, error) { root, err := msg.Root() return HashFactory_newSha1_Results{root.Struct()}, err } func (s HashFactory_newSha1_Results) String() string { str, _ := text.Marshal(0xea3e50f7663f7bdf, s.Struct) return str } func (s HashFactory_newSha1_Results) Hash() Hash { p, _ := s.Struct.Ptr(0) return Hash{Client: p.Interface().Client()} } func (s HashFactory_newSha1_Results) HasHash() bool { return s.Struct.HasPtr(0) } func (s HashFactory_newSha1_Results) SetHash(v Hash) error { if !v.Client.IsValid() { return s.Struct.SetPtr(0, capnp.Ptr{}) } seg := s.Segment() in := capnp.NewInterface(seg, seg.Message().AddCap(v.Client)) return s.Struct.SetPtr(0, in.ToPtr()) } // HashFactory_newSha1_Results_List is a list of HashFactory_newSha1_Results. type HashFactory_newSha1_Results_List = capnp.StructList[HashFactory_newSha1_Results] // NewHashFactory_newSha1_Results creates a new list of HashFactory_newSha1_Results. func NewHashFactory_newSha1_Results_List(s *capnp.Segment, sz int32) (HashFactory_newSha1_Results_List, error) { l, err := capnp.NewCompositeList(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}, sz) return capnp.StructList[HashFactory_newSha1_Results]{List: l}, err } // HashFactory_newSha1_Results_Future is a wrapper for a HashFactory_newSha1_Results promised by a client call. type HashFactory_newSha1_Results_Future struct{ *capnp.Future } func (p HashFactory_newSha1_Results_Future) Struct() (HashFactory_newSha1_Results, error) { s, err := p.Future.Struct() return HashFactory_newSha1_Results{s}, err } func (p HashFactory_newSha1_Results_Future) Hash() Hash { return Hash{Client: p.Future.Field(0, nil).Client()} } type Hash struct{ Client *capnp.Client } // Hash_TypeID is the unique identifier for the type Hash. const Hash_TypeID = 0xf29f97dd675a9431 func (c Hash) Write(ctx context.Context, params func(Hash_write_Params) error) (Hash_write_Results_Future, capnp.ReleaseFunc) { s := capnp.Send{ Method: capnp.Method{ InterfaceID: 0xf29f97dd675a9431, MethodID: 0, InterfaceName: \"remote.capnp:Hash\", MethodName: \"write\", }, } if params != nil { s.ArgsSize = capnp.ObjectSize{DataSize: 0, PointerCount: 1} s.PlaceArgs = func(s capnp.Struct) error { return params(Hash_write_Params{Struct: s}) } } ans, release := c.Client.SendCall(ctx, s) return Hash_write_Results_Future{Future: ans.Future()}, release } func (c Hash) Sum(ctx context.Context, params func(Hash_sum_Params) error) (Hash_sum_Results_Future, capnp.ReleaseFunc) { s := capnp.Send{ Method: capnp.Method{ InterfaceID: 0xf29f97dd675a9431, MethodID: 1, InterfaceName: \"remote.capnp:Hash\", MethodName: \"sum\", }, } if params != nil { s.ArgsSize = capnp.ObjectSize{DataSize: 0, PointerCount: 0} s.PlaceArgs = func(s capnp.Struct) error { return params(Hash_sum_Params{Struct: s}) } } ans, release := c.Client.SendCall(ctx, s) return Hash_sum_Results_Future{Future: ans.Future()}, release } func (c Hash) AddRef() Hash { return Hash{ Client: c.Client.AddRef(), } } func (c Hash) Release() { c.Client.Release() } // A Hash_Server is a Hash with a local implementation. type Hash_Server interface { Write(context.Context, Hash_write) error Sum(context.Context, Hash_sum) error } // Hash_NewServer creates a new Server from an implementation of Hash_Server. func Hash_NewServer(s Hash_Server, policy *server.Policy) *server.Server { c, _ := s.(server.Shutdowner) return server.New(Hash_Methods(nil, s), s, c, policy) } // Hash_ServerToClient creates a new Client from an implementation of Hash_Server. // The caller is responsible for calling Release on the returned Client. func Hash_ServerToClient(s Hash_Server, policy *server.Policy) Hash { return Hash{Client: capnp.NewClient(Hash_NewServer(s, policy))} } // Hash_Methods appends Methods to a slice that invoke the methods on s. // This can be used to create a more complicated Server. func Hash_Methods(methods []server.Method, s Hash_Server) []server.Method { if cap(methods) == 0 { methods = make([]server.Method, 0, 2) } methods = append(methods, server.Method{ Method: capnp.Method{ InterfaceID: 0xf29f97dd675a9431, MethodID: 0, InterfaceName: \"remote.capnp:Hash\", MethodName: \"write\", }, Impl: func(ctx context.Context, call *server.Call) error { return s.Write(ctx, Hash_write{call}) }, }) methods = append(methods, server.Method{ Method: capnp.Method{ InterfaceID: 0xf29f97dd675a9431, MethodID: 1, InterfaceName: \"remote.capnp:Hash\", MethodName: \"sum\", }, Impl: func(ctx context.Context, call *server.Call) error { return s.Sum(ctx, Hash_sum{call}) }, }) return methods } // Hash_write holds the state for a server call to Hash.write. // See server.Call for documentation. type Hash_write struct { *server.Call } // Args returns the call's arguments. func (c Hash_write) Args() Hash_write_Params { return Hash_write_Params{Struct: c.Call.Args()} } // AllocResults allocates the results struct. func (c Hash_write) AllocResults() (Hash_write_Results, error) { r, err := c.Call.AllocResults(capnp.ObjectSize{DataSize: 0, PointerCount: 0}) return Hash_write_Results{Struct: r}, err } // Hash_sum holds the state for a server call to Hash.sum. // See server.Call for documentation. type Hash_sum struct { *server.Call } // Args returns the call's arguments. func (c Hash_sum) Args() Hash_sum_Params { return Hash_sum_Params{Struct: c.Call.Args()} } // AllocResults allocates the results struct. func (c Hash_sum) AllocResults() (Hash_sum_Results, error) { r, err := c.Call.AllocResults(capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return Hash_sum_Results{Struct: r}, err } type Hash_write_Params struct{ capnp.Struct } // Hash_write_Params_TypeID is the unique identifier for the type Hash_write_Params. const Hash_write_Params_TypeID = 0xdffe94ae546cdee3 func NewHash_write_Params(s *capnp.Segment) (Hash_write_Params, error) { st, err := capnp.NewStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return Hash_write_Params{st}, err } func NewRootHash_write_Params(s *capnp.Segment) (Hash_write_Params, error) { st, err := capnp.NewRootStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return Hash_write_Params{st}, err } func ReadRootHash_write_Params(msg *capnp.Message) (Hash_write_Params, error) { root, err := msg.Root() return Hash_write_Params{root.Struct()}, err } func (s Hash_write_Params) String() string { str, _ := text.Marshal(0xdffe94ae546cdee3, s.Struct) return str } func (s Hash_write_Params) Data() ([]byte, error) { p, err := s.Struct.Ptr(0) return []byte(p.Data()), err } func (s Hash_write_Params) HasData() bool { return s.Struct.HasPtr(0) } func (s Hash_write_Params) SetData(v []byte) error { return s.Struct.SetData(0, v) } // Hash_write_Params_List is a list of Hash_write_Params. type Hash_write_Params_List = capnp.StructList[Hash_write_Params] // NewHash_write_Params creates a new list of Hash_write_Params. func NewHash_write_Params_List(s *capnp.Segment, sz int32) (Hash_write_Params_List, error) { l, err := capnp.NewCompositeList(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}, sz) return capnp.StructList[Hash_write_Params]{List: l}, err } // Hash_write_Params_Future is a wrapper for a Hash_write_Params promised by a client call. type Hash_write_Params_Future struct{ *capnp.Future } func (p Hash_write_Params_Future) Struct() (Hash_write_Params, error) { s, err := p.Future.Struct() return Hash_write_Params{s}, err } type Hash_write_Results struct{ capnp.Struct } // Hash_write_Results_TypeID is the unique identifier for the type Hash_write_Results. const Hash_write_Results_TypeID = 0x80ac741ec7fb8f65 func NewHash_write_Results(s *capnp.Segment) (Hash_write_Results, error) { st, err := capnp.NewStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}) return Hash_write_Results{st}, err } func NewRootHash_write_Results(s *capnp.Segment) (Hash_write_Results, error) { st, err := capnp.NewRootStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}) return Hash_write_Results{st}, err } func ReadRootHash_write_Results(msg *capnp.Message) (Hash_write_Results, error) { root, err := msg.Root() return Hash_write_Results{root.Struct()}, err } func (s Hash_write_Results) String() string { str, _ := text.Marshal(0x80ac741ec7fb8f65, s.Struct) return str } // Hash_write_Results_List is a list of Hash_write_Results. type Hash_write_Results_List = capnp.StructList[Hash_write_Results] // NewHash_write_Results creates a new list of Hash_write_Results. func NewHash_write_Results_List(s *capnp.Segment, sz int32) (Hash_write_Results_List, error) { l, err := capnp.NewCompositeList(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}, sz) return capnp.StructList[Hash_write_Results]{List: l}, err } // Hash_write_Results_Future is a wrapper for a Hash_write_Results promised by a client call. type Hash_write_Results_Future struct{ *capnp.Future } func (p Hash_write_Results_Future) Struct() (Hash_write_Results, error) { s, err := p.Future.Struct() return Hash_write_Results{s}, err } type Hash_sum_Params struct{ capnp.Struct } // Hash_sum_Params_TypeID is the unique identifier for the type Hash_sum_Params. const Hash_sum_Params_TypeID = 0xe74bb2d0190cf89c func NewHash_sum_Params(s *capnp.Segment) (Hash_sum_Params, error) { st, err := capnp.NewStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}) return Hash_sum_Params{st}, err } func NewRootHash_sum_Params(s *capnp.Segment) (Hash_sum_Params, error) { st, err := capnp.NewRootStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}) return Hash_sum_Params{st}, err } func ReadRootHash_sum_Params(msg *capnp.Message) (Hash_sum_Params, error) { root, err := msg.Root() return Hash_sum_Params{root.Struct()}, err } func (s Hash_sum_Params) String() string { str, _ := text.Marshal(0xe74bb2d0190cf89c, s.Struct) return str } // Hash_sum_Params_List is a list of Hash_sum_Params. type Hash_sum_Params_List = capnp.StructList[Hash_sum_Params] // NewHash_sum_Params creates a new list of Hash_sum_Params. func NewHash_sum_Params_List(s *capnp.Segment, sz int32) (Hash_sum_Params_List, error) { l, err := capnp.NewCompositeList(s, capnp.ObjectSize{DataSize: 0, PointerCount: 0}, sz) return capnp.StructList[Hash_sum_Params]{List: l}, err } // Hash_sum_Params_Future is a wrapper for a Hash_sum_Params promised by a client call. type Hash_sum_Params_Future struct{ *capnp.Future } func (p Hash_sum_Params_Future) Struct() (Hash_sum_Params, error) { s, err := p.Future.Struct() return Hash_sum_Params{s}, err } type Hash_sum_Results struct{ capnp.Struct } // Hash_sum_Results_TypeID is the unique identifier for the type Hash_sum_Results. const Hash_sum_Results_TypeID = 0xd093963b95a4e107 func NewHash_sum_Results(s *capnp.Segment) (Hash_sum_Results, error) { st, err := capnp.NewStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return Hash_sum_Results{st}, err } func NewRootHash_sum_Results(s *capnp.Segment) (Hash_sum_Results, error) { st, err := capnp.NewRootStruct(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}) return Hash_sum_Results{st}, err } func ReadRootHash_sum_Results(msg *capnp.Message) (Hash_sum_Results, error) { root, err := msg.Root() return Hash_sum_Results{root.Struct()}, err } func (s Hash_sum_Results) String() string { str, _ := text.Marshal(0xd093963b95a4e107, s.Struct) return str } func (s Hash_sum_Results) Hash() ([]byte, error) { p, err := s.Struct.Ptr(0) return []byte(p.Data()), err } func (s Hash_sum_Results) HasHash() bool { return s.Struct.HasPtr(0) } func (s Hash_sum_Results) SetHash(v []byte) error { return s.Struct.SetData(0, v) } // Hash_sum_Results_List is a list of Hash_sum_Results. type Hash_sum_Results_List = capnp.StructList[Hash_sum_Results] // NewHash_sum_Results creates a new list of Hash_sum_Results. func NewHash_sum_Results_List(s *capnp.Segment, sz int32) (Hash_sum_Results_List, error) { l, err := capnp.NewCompositeList(s, capnp.ObjectSize{DataSize: 0, PointerCount: 1}, sz) return capnp.StructList[Hash_sum_Results]{List: l}, err } // Hash_sum_Results_Future is a wrapper for a Hash_sum_Results promised by a client call. type Hash_sum_Results_Future struct{ *capnp.Future } func (p Hash_sum_Results_Future) Struct() (Hash_sum_Results, error) { s, err := p.Future.Struct() return Hash_sum_Results{s}, err } const schema_db8274f9144abc7e = \"x\\xda|\\x92?h\\x14A\\x18\\xc5\\xdf\\x9b\\x9bu\\xe3\\x9f\" + \"\\xe5\\x18'\\x16\\xd7\\x18\\x91\\x0b\\x82\\xc8\\xe1\\x19,T\\xf4\\x8e\" + \"\\x14*\\xb1\\xd9\\x8d\\x16b7\\xc4\\xd5\\x15rI\\xb8\\xdd#\" + \"\\x88\\xa0b#\\x82 \\xc4h\\x1aA\\x0b\\xed4E\\xea\\xb4\" + \"\\\"\\x04\\x84\\xa4U\\xce\\x10,\\x84\\x94\\x01\\xd1(\\xba\\xb2{\" + \"\\xeem@/\\xdd\\xc2\\x9b\\xef}\\xbf\\xef\\xed;\\xc0\\xba\\xac\" + \":\\x87$\\x84w\\xd4\\xda\\x11\\xfb\\x8f~\\xbe\\xdb\\x1f\\xbd\\xbe\" + \"\\x0b\\xb5\\x97\\x80\\xb4\\x81\\xa1M\\x0aB\\xc6K/\\x1e\\xbeZ\" + \"\\xd9\\xb50\\x03U\\xca\\x946\\x87\\x13e\\xf1\\xc3\\xaf\\xb9\\xe2\" + \"\\xe57\\xf3PN!\\xbe\\xbd8\\xd2\\xbf\\x19\\xdd\\xfb\\x08P\" + \"\\xbf\\xe5\\x92^\\xa1\\x0d\\xe8\\xf7\u003c\\xa7\\xbf\u0026_\\xb1\\xbd\\xf6\" + \"\\xf2\\xc9\\xa9\\xa7\\x8f\\x97;\\x0b\\xacTms\\x03\\xd4k\\xac\" + \"\\x81\\xf1\\xe7O\\xe3\\x97\\xe6g\\x7f\\xafn\\xd5)~\\x80\\xda\" + \"\\x12\\x89\\xfe\\xec\\xfb\\x9e\\xd2\\xf2\\xc2\\x85/9\\xa0\\x1e\\x14\\xeb\" + \"\\x90\\xf1\\xea\\xad\\xda\\xb5o\\xee\\x99\\xf5\\x0e_:8\\xb4S\" + \"\\x8c\\x10\\xd4\\xfb\\xd2\\xc9\\xea\\xec\\x95\\xeb\\xed\\xb9\\xe7\\x1b\\xff`\" + \"\\x1e\\x173\\xfa\\xb4H\\x9cN\\x88\\xfb\\xfa\\x81\\xb0q$n\" + \"\\xfa\\x8d\\xc9\\xc8\\xaf\\x8c\\xed6S\\x13S'\\xcf\\x9b0\\xa8\" + \"L7oD~y\\xd4\\x0f[\\xe3Q\\x88\\xecAW?\" + \"k\\xc6\\xa2\\xc9\\xe6\\xcd\\xca\\x84?}10\\xd5\\xb2k\\x9a\" + \"\\xa6\\xd1\\xfb\\x1d\\xe0\\x92\\x9e,X@7Zf7(5\" + \"\\x0c\\xa1,\\xfb\\xce_\\xb3:]\\xb2\\xcb$r\\xa6\\xb0\\xd5\" + \"(\\x8f\\xfa\\x03)\\x92'\\x0b\\x12\\x90\\x04\\x94s\\x18\\xf0\\xfa\" + \"\\x0a\\xf4\\xfa\\x05\\x8b\\x81\\x09\\x03:\\x10t\\xf0_\\x8f\\xce]\" + \"\\xb5\\x0eo/\\x93\\xab\u00262\\xdb\\x99$ \\xae)\u0026\\x16\" + \"]Y\\xf6\\xcc\u0026\\x0b\\x11\\xdb2\\xab\\xfc\\x97\\x81T[\\x16\" + \"3sf\\x90\\xa4\\xd8\\x97\\xa6\\x985\\x87Y\\x87U\\xf5\\x18\" + \"\\x84\\x1a\\xb4\\x99\\xb7\\x86Y\\xfdT\\xe9 \\x84r\\xec\\x81\\xf4\" + \"\\xfa:\\xed\\xb0\\xd5HS\\xfe\\x13\\x00\\x00\\xff\\xff\\xcf\\xa2\\xe6\" + \"\\xb3\" func init() { schemas.Register(schema_db8274f9144abc7e, 0x80ac741ec7fb8f65, 0x92b20ad1a58ca0ca, 0xaead580f97fddabc, 0xd093963b95a4e107, 0xdffe94ae546cdee3, 0xe74bb2d0190cf89c, 0xea3e50f7663f7bdf, 0xf29f97dd675a9431) } 客户端调用\nfunc client(ctx context.Context, rwc io.ReadWriteCloser) error { // Create a connection that we can use to get the HashFactory. conn := rpc.NewConn(rpc.NewStreamTransport(rwc), nil) // nil sets default options defer conn.Close() // Get the \"bootstrap\" interface. This is the capability set with // rpc.MainInterface on the remote side. hf := hashes.HashFactory{Client: conn.Bootstrap(ctx)} // Now we can call methods on hf, and they will be sent over c. // The NewSha1 method does not have any parameters we can set, so we // pass a nil function. f, free := hf.NewSha1(ctx, nil) defer free() // 'NewSha1' returns a future, which allows us to pipeline calls to // returned values before they are actually delivered. Here, we issue // calls to an as-of-yet-unresolved Sha1 instance. s := f.Hash() // s refers to a remote Hash. Method calls are delivered in order. f, free = s.Write(ctx, func(p hashes.Hash_write_Params) error { return p.SetData([]byte(\"Hello, \")) }) defer free() f, free = s.Write(ctx, func(p hashes.Hash_write_Params) error { return p.SetData([]byte(\"World!\")) }) defer free() // Get the sum, waiting for the result. f, free = s.Sum(ctx, nil) defer free() result, err := f.Struct() if err != nil { return err } // Display the result. sha1Val, err := result.Hash() if err != nil { return err } fmt.Printf(\"sha1: %x\\n\", sha1Val) return nil } func main() { ctx := context.Background() c1, c2 := net.Pipe() go serveHash(ctx, c1) client(ctx, c2) } 参考链接 Capn Proto语言参考 Cloudflared https://github.com/inkeliz/karmem ",
  "wordCount" : "2894",
  "inLanguage": "en",
  "datePublished": "2022-06-10T00:00:00Z",
  "dateModified": "2022-06-10T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "czyt"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://czyt.tech/post/capn-proto-setup-in-windows/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "虫子樱桃",
    "logo": {
      "@type": "ImageObject",
      "url": "https://czyt.tech/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://czyt.tech/" accesskey="h" title="虫子樱桃 (Alt + H)">虫子樱桃</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://czyt.tech/" title="🏠Home">
                    <span>🏠Home</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/about/" title="🙋About">
                    <span>🙋About</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/post/" title="📚Posts">
                    <span>📚Posts</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/search/" title="🔍Search">
                    <span>🔍Search</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/tags/" title="🔖Tags">
                    <span>🔖Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://czyt.tech/">Home</a>&nbsp;»&nbsp;<a href="https://czyt.tech/post/">Posts</a></div>
    <h1 class="post-title">
      Cap&#39;n Proto Windows环境设置
    </h1>
    <div class="post-meta"><span title='2022-06-10 00:00:00 +0000 UTC'>June 10, 2022</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;czyt

</div>
  </header> <div class="toc side right">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e7%bc%96%e8%af%91%e5%99%a8" aria-label="编译器">编译器</a></li>
                <li>
                    <a href="#annotations-%e5%8c%85" aria-label="Annotations 包">Annotations 包</a></li>
                <li>
                    <a href="#%e7%bc%96%e8%af%91%e9%aa%8c%e8%af%81" aria-label="编译验证">编译验证</a><ul>
                        
                <li>
                    <a href="#%e4%b8%80%e8%88%ac%e6%a8%a1%e5%9e%8b" aria-label="一般模型">一般模型</a></li>
                <li>
                    <a href="#%e6%9c%8d%e5%8a%a1" aria-label="服务">服务</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" aria-label="参考链接">参考链接</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p><a href="https://capnproto.org">Cap&rsquo;n proto</a> 号称是比protobuff更快的proto语言。官网截图</p>
<blockquote>
<p>Cap’n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think <a href="https://github.com/protocolbuffers/protobuf">Protocol Buffers</a>, except faster. In fact, in benchmarks, Cap’n Proto is INFINITY TIMES faster than Protocol Buffers.</p>
</blockquote>
<p><img loading="lazy" src="https://capnproto.org/images/infinity-times-faster.png" alt="img"  />
</p>
<p>协议特性</p>
<blockquote>
<p>Cap’n Proto’s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered “levels”, so that implementations may declare which features they have covered by advertising a level number.</p>
<ul>
<li><strong>Level 1:</strong> Object references and promise pipelining, as described above.</li>
<li><strong>Level 2:</strong> Persistent capabilities. You may request to “save” a capability, receiving a persistent token which can be used to “restore” it in the future (on a new connection). Not all capabilities can be saved; the host app must implement support for it. Building this into the protocol makes it possible for a Cap’n-Proto-based data store to transparently save structures containing capabilities without knowledge of the particular capability types or the application built on them, as well as potentially enabling more powerful analysis and visualization of stored data.</li>
<li><strong>Level 3:</strong> Three-way interactions. A network of Cap’n Proto vats (nodes) can pass object references to each other and automatically form direct connections as needed. For instance, if Alice (on machine A) sends Bob (on machine B) a reference to Carol (on machine C), then machine B will form a new connection to machine C so that Bob can call Carol directly without proxying through machine A.</li>
<li><strong>Level 4:</strong> Reference equality / joining. If you receive a set of capabilities from different parties which should all point to the same underlying objects, you can verify securely that they in fact do. This is subtle, but enables many security patterns that rely on one party being able to verify that two or more other parties agree on something (imagine a digital escrow agent). See <a href="http://erights.org/elib/equality/index.html">E’s page on equality</a>.</li>
</ul>
</blockquote>
<p>目前GO只支持Level 1的特性，Level3的RPC特性已经在<a href="https://github.com/capnproto/go-capnproto2/issues/160">安排</a>。</p>
<p>下面整理其在Windows环境下的编译环境搭建步骤。</p>
<h2 id="编译器">编译器<a hidden class="anchor" aria-hidden="true" href="#编译器">#</a></h2>
<p>下载Windows32的<a href="https://capnproto.org/capnproto-c++-win32-0.10.1.zip">编译包</a> (可能不是最新，可以从<a href="https://capnproto.org/install.html">官网安装介绍</a> 获取最新)。将 <code>capnp.exe</code>, <code>capnpc-c++.exe</code>, 和<code>capnpc-capnp.exe</code>加入系统环境变量，推荐解压到<code>%GOPATH%</code>.</p>
<p>然后安装GO的proto生成工具</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go install capnproto.org/go/capnp/v3/capnpc-go@latest 
</span></span></code></pre></div><h2 id="annotations-包">Annotations 包<a hidden class="anchor" aria-hidden="true" href="#annotations-包">#</a></h2>
<p>目前Cap&rsquo;n proto 的 Annotations是放入到代码仓库的，因为新版Go默认是启用了<code>GOMODULE</code>的，所以，需要按下面操作将仓库拉取到<code>%GOPATH%</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go env -w GO111MODULE<span style="color:#f92672">=</span>off
</span></span><span style="display:flex;"><span>go get -u capnproto.org/go/capnp/v3/
</span></span><span style="display:flex;"><span>go env -w GO111MODULE<span style="color:#f92672">=</span>on
</span></span></code></pre></div><h2 id="编译验证">编译验证<a hidden class="anchor" aria-hidden="true" href="#编译验证">#</a></h2>
<h3 id="一般模型">一般模型<a hidden class="anchor" aria-hidden="true" href="#一般模型">#</a></h3>
<p><code>books.capnp</code>文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-protobuf" data-lang="protobuf"><span style="display:flex;"><span>using Go <span style="color:#f92672">=</span> <span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#34;/go.capnp&#34;</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span><span style="color:#ae81ff">0x85d3acc39d94e0f8</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>Go.package(<span style="color:#e6db74">&#34;books&#34;</span>);<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>Go.import(<span style="color:#e6db74">&#34;foo/books&#34;</span>);<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>struct Book {<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    title <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">:</span>Text;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">#</span> Title of the book.<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    pageCount <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span>Int32;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#960050;background-color:#1e0010">#</span> Number of pages in the book.<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>编译</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>capnp compile -I %GOPATH%/src/capnproto.org/go/capnp/std -ogo:.. .<span style="color:#ae81ff">\b</span>ooks.capnp
</span></span></code></pre></div><p>生成文件<code>books.capnp.go</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Code generated by capnpc-go. DO NOT EDIT.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">books</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">capnp</span> <span style="color:#e6db74">&#34;capnproto.org/go/capnp/v3&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">text</span> <span style="color:#e6db74">&#34;capnproto.org/go/capnp/v3/encoding/text&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">schemas</span> <span style="color:#e6db74">&#34;capnproto.org/go/capnp/v3/schemas&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Book</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Book_TypeID is the unique identifier for the type Book.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Book_TypeID</span> = <span style="color:#ae81ff">0x8100cc88d7d4d47c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewBook</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Book</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">8</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Book</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRootBook</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Book</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewRootStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">8</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Book</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRootBook</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Message</span>) (<span style="color:#a6e22e">Book</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">root</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">Root</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Book</span>{<span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">Struct</span>()}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Book</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">str</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#ae81ff">0x8100cc88d7d4d47c</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Book</span>) <span style="color:#a6e22e">Title</span>() (<span style="color:#66d9ef">string</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">Ptr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Text</span>(), <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Book</span>) <span style="color:#a6e22e">HasTitle</span>() <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">HasPtr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Book</span>) <span style="color:#a6e22e">TitleBytes</span>() ([]<span style="color:#66d9ef">byte</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">Ptr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">TextBytes</span>(), <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Book</span>) <span style="color:#a6e22e">SetTitle</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">SetText</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Book</span>) <span style="color:#a6e22e">PageCount</span>() <span style="color:#66d9ef">int32</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> int32(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">Uint32</span>(<span style="color:#ae81ff">0</span>))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Book</span>) <span style="color:#a6e22e">SetPageCount</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">int32</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">SetUint32</span>(<span style="color:#ae81ff">0</span>, uint32(<span style="color:#a6e22e">v</span>))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Book_List is a list of Book.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Book_List</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Book</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NewBook creates a new list of Book.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewBook_List</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>, <span style="color:#a6e22e">sz</span> <span style="color:#66d9ef">int32</span>) (<span style="color:#a6e22e">Book_List</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewCompositeList</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">8</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>}, <span style="color:#a6e22e">sz</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Book</span>]{<span style="color:#a6e22e">List</span>: <span style="color:#a6e22e">l</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Book_Future is a wrapper for a Book promised by a client call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Book_Future</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Future</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Book_Future</span>) <span style="color:#a6e22e">Struct</span>() (<span style="color:#a6e22e">Book</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Book</span>{<span style="color:#a6e22e">s</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">schema_85d3acc39d94e0f8</span> = <span style="color:#e6db74">&#34;x\xda\x12Ht`1\xe4\xdd\xcf\xc8\xc0\x14(\xc2\xca&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xb6\xbf\xe6\xca\x95\xeb\x1dg\x1a\x03y\x18\x19\xff\xffx&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;0e\xee\xe15\x97[\x19X\x19\xd9\x19\x18\x04\x8fv&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x09\x9e\x05\xd1&#39;\xcb\x19t\xff&#39;\xe5\xe7g\x17\xeb%&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;&#39;2\x16\xe4\x15X9\xe5\xe7g30\x0402\x06&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;r0\xb300\xb0020\x08j\x1a10\x04\xaa&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;03\x06\x1a0122\x8a0\x82\xc4t\x83\x18\x18&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x02u\x98\x19\x03-\x98\x18\xe5K2KrR\x19y&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x18\x98\x18y\x18\x18\xff\x17$\xa6\xa7:\xe7\x97\xe61&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;0\x960\xb2001\xb200\x02\x02\x00\x00\xff\xff&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;N\xd3$\xbc&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">schemas</span>.<span style="color:#a6e22e">Register</span>(<span style="color:#a6e22e">schema_85d3acc39d94e0f8</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0x8100cc88d7d4d47c</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>序列化与反序列化参考官方GitHub <a href="https://github.com/capnproto/go-capnproto2/wiki/Getting-Started">https://github.com/capnproto/go-capnproto2/wiki/Getting-Started</a></p>
<h3 id="服务">服务<a hidden class="anchor" aria-hidden="true" href="#服务">#</a></h3>
<p>定义接口 <code>hash.capnp</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-protobuf" data-lang="protobuf"><span style="display:flex;"><span>using Go <span style="color:#f92672">=</span> <span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#34;/go.capnp&#34;</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span><span style="color:#ae81ff">0xdb8274f9144abc7e</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>Go.package(<span style="color:#e6db74">&#34;hashes&#34;</span>);<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span>Go.import(<span style="color:#e6db74">&#34;foo/hashes&#34;</span>);<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>interface HashFactory {<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    newSha1 <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#ae81ff">0</span> () <span style="color:#f92672">-</span>&gt; (hash <span style="color:#f92672">:</span>Hash);<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>interface Hash {<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    write <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#ae81ff">0</span> (data <span style="color:#f92672">:</span>Data) <span style="color:#f92672">-</span>&gt; ();<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    sum <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#ae81ff">1</span> () <span style="color:#f92672">-</span>&gt; (hash <span style="color:#f92672">:</span>Data);<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>编译</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>capnp compile -I %GOPATH%/src/capnproto.org/go/capnp/std -ogo:.. .<span style="color:#ae81ff">\h</span>ash.capnp
</span></span></code></pre></div><p>生成的GO文件内容</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Code generated by capnpc-go. DO NOT EDIT.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">hashes</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">capnp</span> <span style="color:#e6db74">&#34;capnproto.org/go/capnp/v3&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">text</span> <span style="color:#e6db74">&#34;capnproto.org/go/capnp/v3/encoding/text&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">schemas</span> <span style="color:#e6db74">&#34;capnproto.org/go/capnp/v3/schemas&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">server</span> <span style="color:#e6db74">&#34;capnproto.org/go/capnp/v3/server&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">context</span> <span style="color:#e6db74">&#34;context&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">Client</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Client</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_TypeID is the unique identifier for the type HashFactory.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">HashFactory_TypeID</span> = <span style="color:#ae81ff">0xaead580f97fddabc</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">HashFactory</span>) <span style="color:#a6e22e">NewSha1</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">params</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">HashFactory_newSha1_Params</span>) <span style="color:#66d9ef">error</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Results_Future</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ReleaseFunc</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Send</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Method</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceID</span>:   <span style="color:#ae81ff">0xaead580f97fddabc</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodID</span>:      <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceName</span>: <span style="color:#e6db74">&#34;remote.capnp:HashFactory&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodName</span>:    <span style="color:#e6db74">&#34;newSha1&#34;</span>,
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">params</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ArgsSize</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>}
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PlaceArgs</span> = <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span>) <span style="color:#66d9ef">error</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">params</span>(<span style="color:#a6e22e">HashFactory_newSha1_Params</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">s</span>}) }
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ans</span>, <span style="color:#a6e22e">release</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">SendCall</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">s</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Results_Future</span>{<span style="color:#a6e22e">Future</span>: <span style="color:#a6e22e">ans</span>.<span style="color:#a6e22e">Future</span>()}, <span style="color:#a6e22e">release</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">HashFactory</span>) <span style="color:#a6e22e">AddRef</span>() <span style="color:#a6e22e">HashFactory</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Client</span>: <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">AddRef</span>(),
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">HashFactory</span>) <span style="color:#a6e22e">Release</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">Release</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// A HashFactory_Server is a HashFactory with a local implementation.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_Server</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">NewSha1</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">HashFactory_newSha1</span>) <span style="color:#66d9ef">error</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_NewServer creates a new Server from an implementation of HashFactory_Server.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">HashFactory_NewServer</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_Server</span>, <span style="color:#a6e22e">policy</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Policy</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Shutdowner</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">HashFactory_Methods</span>(<span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">s</span>), <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">policy</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_ServerToClient creates a new Client from an implementation of HashFactory_Server.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The caller is responsible for calling Release on the returned Client.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">HashFactory_ServerToClient</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_Server</span>, <span style="color:#a6e22e">policy</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Policy</span>) <span style="color:#a6e22e">HashFactory</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory</span>{<span style="color:#a6e22e">Client</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewClient</span>(<span style="color:#a6e22e">HashFactory_NewServer</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">policy</span>))}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_Methods appends Methods to a slice that invoke the methods on s.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// This can be used to create a more complicated Server.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">HashFactory_Methods</span>(<span style="color:#a6e22e">methods</span> []<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span>, <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_Server</span>) []<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> cap(<span style="color:#a6e22e">methods</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">methods</span> = make([]<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">methods</span> = append(<span style="color:#a6e22e">methods</span>, <span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Method</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceID</span>:   <span style="color:#ae81ff">0xaead580f97fddabc</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodID</span>:      <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceName</span>: <span style="color:#e6db74">&#34;remote.capnp:HashFactory&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodName</span>:    <span style="color:#e6db74">&#34;newSha1&#34;</span>,
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Impl</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">call</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Call</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">NewSha1</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">HashFactory_newSha1</span>{<span style="color:#a6e22e">call</span>})
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">methods</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_newSha1 holds the state for a server call to HashFactory.newSha1.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// See server.Call for documentation.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_newSha1</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Call</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Args returns the call&#39;s arguments.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">HashFactory_newSha1</span>) <span style="color:#a6e22e">Args</span>() <span style="color:#a6e22e">HashFactory_newSha1_Params</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Params</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Call</span>.<span style="color:#a6e22e">Args</span>()}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// AllocResults allocates the results struct.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">HashFactory_newSha1</span>) <span style="color:#a6e22e">AllocResults</span>() (<span style="color:#a6e22e">HashFactory_newSha1_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">r</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Call</span>.<span style="color:#a6e22e">AllocResults</span>(<span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">r</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_newSha1_Params</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_newSha1_Params_TypeID is the unique identifier for the type HashFactory_newSha1_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">HashFactory_newSha1_Params_TypeID</span> = <span style="color:#ae81ff">0x92b20ad1a58ca0ca</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHashFactory_newSha1_Params</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Params</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRootHashFactory_newSha1_Params</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewRootStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Params</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRootHashFactory_newSha1_Params</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Message</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">root</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">Root</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Params</span>{<span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">Struct</span>()}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_newSha1_Params</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">str</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#ae81ff">0x92b20ad1a58ca0ca</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_newSha1_Params_List is a list of HashFactory_newSha1_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_newSha1_Params_List</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">HashFactory_newSha1_Params</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NewHashFactory_newSha1_Params creates a new list of HashFactory_newSha1_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHashFactory_newSha1_Params_List</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>, <span style="color:#a6e22e">sz</span> <span style="color:#66d9ef">int32</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Params_List</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewCompositeList</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>}, <span style="color:#a6e22e">sz</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">HashFactory_newSha1_Params</span>]{<span style="color:#a6e22e">List</span>: <span style="color:#a6e22e">l</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_newSha1_Params_Future is a wrapper for a HashFactory_newSha1_Params promised by a client call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_newSha1_Params_Future</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Future</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">HashFactory_newSha1_Params_Future</span>) <span style="color:#a6e22e">Struct</span>() (<span style="color:#a6e22e">HashFactory_newSha1_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Params</span>{<span style="color:#a6e22e">s</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_newSha1_Results_TypeID is the unique identifier for the type HashFactory_newSha1_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">HashFactory_newSha1_Results_TypeID</span> = <span style="color:#ae81ff">0xea3e50f7663f7bdf</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHashFactory_newSha1_Results</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRootHashFactory_newSha1_Results</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewRootStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRootHashFactory_newSha1_Results</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Message</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">root</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">Root</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>{<span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">Struct</span>()}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">str</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#ae81ff">0xea3e50f7663f7bdf</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>) <span style="color:#a6e22e">Hash</span>() <span style="color:#a6e22e">Hash</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">Ptr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash</span>{<span style="color:#a6e22e">Client</span>: <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Interface</span>().<span style="color:#a6e22e">Client</span>()}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>) <span style="color:#a6e22e">HasHash</span>() <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">HasPtr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>) <span style="color:#a6e22e">SetHash</span>(<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Hash</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">IsValid</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">SetPtr</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Ptr</span>{})
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">seg</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Segment</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">in</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewInterface</span>(<span style="color:#a6e22e">seg</span>, <span style="color:#a6e22e">seg</span>.<span style="color:#a6e22e">Message</span>().<span style="color:#a6e22e">AddCap</span>(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Client</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">SetPtr</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">in</span>.<span style="color:#a6e22e">ToPtr</span>())
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_newSha1_Results_List is a list of HashFactory_newSha1_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_newSha1_Results_List</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">HashFactory_newSha1_Results</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NewHashFactory_newSha1_Results creates a new list of HashFactory_newSha1_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHashFactory_newSha1_Results_List</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>, <span style="color:#a6e22e">sz</span> <span style="color:#66d9ef">int32</span>) (<span style="color:#a6e22e">HashFactory_newSha1_Results_List</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewCompositeList</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>}, <span style="color:#a6e22e">sz</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">HashFactory_newSha1_Results</span>]{<span style="color:#a6e22e">List</span>: <span style="color:#a6e22e">l</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// HashFactory_newSha1_Results_Future is a wrapper for a HashFactory_newSha1_Results promised by a client call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HashFactory_newSha1_Results_Future</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Future</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">HashFactory_newSha1_Results_Future</span>) <span style="color:#a6e22e">Struct</span>() (<span style="color:#a6e22e">HashFactory_newSha1_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HashFactory_newSha1_Results</span>{<span style="color:#a6e22e">s</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">HashFactory_newSha1_Results_Future</span>) <span style="color:#a6e22e">Hash</span>() <span style="color:#a6e22e">Hash</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash</span>{<span style="color:#a6e22e">Client</span>: <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Field</span>(<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">nil</span>).<span style="color:#a6e22e">Client</span>()}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">Client</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Client</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_TypeID is the unique identifier for the type Hash.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Hash_TypeID</span> = <span style="color:#ae81ff">0xf29f97dd675a9431</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash</span>) <span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">params</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">Hash_write_Params</span>) <span style="color:#66d9ef">error</span>) (<span style="color:#a6e22e">Hash_write_Results_Future</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ReleaseFunc</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Send</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Method</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceID</span>:   <span style="color:#ae81ff">0xf29f97dd675a9431</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodID</span>:      <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceName</span>: <span style="color:#e6db74">&#34;remote.capnp:Hash&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodName</span>:    <span style="color:#e6db74">&#34;write&#34;</span>,
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">params</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ArgsSize</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>}
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PlaceArgs</span> = <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span>) <span style="color:#66d9ef">error</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">params</span>(<span style="color:#a6e22e">Hash_write_Params</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">s</span>}) }
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ans</span>, <span style="color:#a6e22e">release</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">SendCall</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">s</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Results_Future</span>{<span style="color:#a6e22e">Future</span>: <span style="color:#a6e22e">ans</span>.<span style="color:#a6e22e">Future</span>()}, <span style="color:#a6e22e">release</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash</span>) <span style="color:#a6e22e">Sum</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">params</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">Hash_sum_Params</span>) <span style="color:#66d9ef">error</span>) (<span style="color:#a6e22e">Hash_sum_Results_Future</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ReleaseFunc</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Send</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Method</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceID</span>:   <span style="color:#ae81ff">0xf29f97dd675a9431</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodID</span>:      <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceName</span>: <span style="color:#e6db74">&#34;remote.capnp:Hash&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodName</span>:    <span style="color:#e6db74">&#34;sum&#34;</span>,
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">params</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ArgsSize</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>}
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PlaceArgs</span> = <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span>) <span style="color:#66d9ef">error</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">params</span>(<span style="color:#a6e22e">Hash_sum_Params</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">s</span>}) }
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ans</span>, <span style="color:#a6e22e">release</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">SendCall</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">s</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Results_Future</span>{<span style="color:#a6e22e">Future</span>: <span style="color:#a6e22e">ans</span>.<span style="color:#a6e22e">Future</span>()}, <span style="color:#a6e22e">release</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash</span>) <span style="color:#a6e22e">AddRef</span>() <span style="color:#a6e22e">Hash</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Client</span>: <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">AddRef</span>(),
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash</span>) <span style="color:#a6e22e">Release</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">Release</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// A Hash_Server is a Hash with a local implementation.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_Server</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">Hash_write</span>) <span style="color:#66d9ef">error</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Sum</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">Hash_sum</span>) <span style="color:#66d9ef">error</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_NewServer creates a new Server from an implementation of Hash_Server.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Hash_NewServer</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_Server</span>, <span style="color:#a6e22e">policy</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Policy</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Shutdowner</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">Hash_Methods</span>(<span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">s</span>), <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">policy</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_ServerToClient creates a new Client from an implementation of Hash_Server.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The caller is responsible for calling Release on the returned Client.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Hash_ServerToClient</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_Server</span>, <span style="color:#a6e22e">policy</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Policy</span>) <span style="color:#a6e22e">Hash</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash</span>{<span style="color:#a6e22e">Client</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewClient</span>(<span style="color:#a6e22e">Hash_NewServer</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">policy</span>))}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_Methods appends Methods to a slice that invoke the methods on s.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// This can be used to create a more complicated Server.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Hash_Methods</span>(<span style="color:#a6e22e">methods</span> []<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span>, <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_Server</span>) []<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> cap(<span style="color:#a6e22e">methods</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">methods</span> = make([]<span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">methods</span> = append(<span style="color:#a6e22e">methods</span>, <span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Method</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceID</span>:   <span style="color:#ae81ff">0xf29f97dd675a9431</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodID</span>:      <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceName</span>: <span style="color:#e6db74">&#34;remote.capnp:Hash&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodName</span>:    <span style="color:#e6db74">&#34;write&#34;</span>,
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Impl</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">call</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Call</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">Hash_write</span>{<span style="color:#a6e22e">call</span>})
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">methods</span> = append(<span style="color:#a6e22e">methods</span>, <span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Method</span>: <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Method</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceID</span>:   <span style="color:#ae81ff">0xf29f97dd675a9431</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodID</span>:      <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">InterfaceName</span>: <span style="color:#e6db74">&#34;remote.capnp:Hash&#34;</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">MethodName</span>:    <span style="color:#e6db74">&#34;sum&#34;</span>,
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">Impl</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">call</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Call</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Sum</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">Hash_sum</span>{<span style="color:#a6e22e">call</span>})
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">methods</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_write holds the state for a server call to Hash.write.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// See server.Call for documentation.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_write</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Call</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Args returns the call&#39;s arguments.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash_write</span>) <span style="color:#a6e22e">Args</span>() <span style="color:#a6e22e">Hash_write_Params</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Params</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Call</span>.<span style="color:#a6e22e">Args</span>()}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// AllocResults allocates the results struct.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash_write</span>) <span style="color:#a6e22e">AllocResults</span>() (<span style="color:#a6e22e">Hash_write_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">r</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Call</span>.<span style="color:#a6e22e">AllocResults</span>(<span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Results</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">r</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_sum holds the state for a server call to Hash.sum.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// See server.Call for documentation.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_sum</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">*</span><span style="color:#a6e22e">server</span>.<span style="color:#a6e22e">Call</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Args returns the call&#39;s arguments.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash_sum</span>) <span style="color:#a6e22e">Args</span>() <span style="color:#a6e22e">Hash_sum_Params</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Params</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Call</span>.<span style="color:#a6e22e">Args</span>()}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// AllocResults allocates the results struct.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Hash_sum</span>) <span style="color:#a6e22e">AllocResults</span>() (<span style="color:#a6e22e">Hash_sum_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">r</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Call</span>.<span style="color:#a6e22e">AllocResults</span>(<span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Results</span>{<span style="color:#a6e22e">Struct</span>: <span style="color:#a6e22e">r</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_write_Params</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_write_Params_TypeID is the unique identifier for the type Hash_write_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Hash_write_Params_TypeID</span> = <span style="color:#ae81ff">0xdffe94ae546cdee3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_write_Params</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_write_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Params</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRootHash_write_Params</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_write_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewRootStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Params</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRootHash_write_Params</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Message</span>) (<span style="color:#a6e22e">Hash_write_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">root</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">Root</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Params</span>{<span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">Struct</span>()}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_write_Params</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">str</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#ae81ff">0xdffe94ae546cdee3</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_write_Params</span>) <span style="color:#a6e22e">Data</span>() ([]<span style="color:#66d9ef">byte</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">Ptr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> []byte(<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Data</span>()), <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_write_Params</span>) <span style="color:#a6e22e">HasData</span>() <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">HasPtr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_write_Params</span>) <span style="color:#a6e22e">SetData</span>(<span style="color:#a6e22e">v</span> []<span style="color:#66d9ef">byte</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">SetData</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_write_Params_List is a list of Hash_write_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_write_Params_List</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_write_Params</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NewHash_write_Params creates a new list of Hash_write_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_write_Params_List</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>, <span style="color:#a6e22e">sz</span> <span style="color:#66d9ef">int32</span>) (<span style="color:#a6e22e">Hash_write_Params_List</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewCompositeList</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>}, <span style="color:#a6e22e">sz</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_write_Params</span>]{<span style="color:#a6e22e">List</span>: <span style="color:#a6e22e">l</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_write_Params_Future is a wrapper for a Hash_write_Params promised by a client call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_write_Params_Future</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Future</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Hash_write_Params_Future</span>) <span style="color:#a6e22e">Struct</span>() (<span style="color:#a6e22e">Hash_write_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Params</span>{<span style="color:#a6e22e">s</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_write_Results</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_write_Results_TypeID is the unique identifier for the type Hash_write_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Hash_write_Results_TypeID</span> = <span style="color:#ae81ff">0x80ac741ec7fb8f65</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_write_Results</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_write_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Results</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRootHash_write_Results</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_write_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewRootStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Results</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRootHash_write_Results</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Message</span>) (<span style="color:#a6e22e">Hash_write_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">root</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">Root</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Results</span>{<span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">Struct</span>()}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_write_Results</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">str</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#ae81ff">0x80ac741ec7fb8f65</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_write_Results_List is a list of Hash_write_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_write_Results_List</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_write_Results</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NewHash_write_Results creates a new list of Hash_write_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_write_Results_List</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>, <span style="color:#a6e22e">sz</span> <span style="color:#66d9ef">int32</span>) (<span style="color:#a6e22e">Hash_write_Results_List</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewCompositeList</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>}, <span style="color:#a6e22e">sz</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_write_Results</span>]{<span style="color:#a6e22e">List</span>: <span style="color:#a6e22e">l</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_write_Results_Future is a wrapper for a Hash_write_Results promised by a client call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_write_Results_Future</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Future</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Hash_write_Results_Future</span>) <span style="color:#a6e22e">Struct</span>() (<span style="color:#a6e22e">Hash_write_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_write_Results</span>{<span style="color:#a6e22e">s</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_sum_Params</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_sum_Params_TypeID is the unique identifier for the type Hash_sum_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Hash_sum_Params_TypeID</span> = <span style="color:#ae81ff">0xe74bb2d0190cf89c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_sum_Params</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_sum_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Params</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRootHash_sum_Params</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_sum_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewRootStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Params</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRootHash_sum_Params</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Message</span>) (<span style="color:#a6e22e">Hash_sum_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">root</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">Root</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Params</span>{<span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">Struct</span>()}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_sum_Params</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">str</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#ae81ff">0xe74bb2d0190cf89c</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_sum_Params_List is a list of Hash_sum_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_sum_Params_List</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_sum_Params</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NewHash_sum_Params creates a new list of Hash_sum_Params.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_sum_Params_List</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>, <span style="color:#a6e22e">sz</span> <span style="color:#66d9ef">int32</span>) (<span style="color:#a6e22e">Hash_sum_Params_List</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewCompositeList</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">0</span>}, <span style="color:#a6e22e">sz</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_sum_Params</span>]{<span style="color:#a6e22e">List</span>: <span style="color:#a6e22e">l</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_sum_Params_Future is a wrapper for a Hash_sum_Params promised by a client call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_sum_Params_Future</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Future</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Hash_sum_Params_Future</span>) <span style="color:#a6e22e">Struct</span>() (<span style="color:#a6e22e">Hash_sum_Params</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Params</span>{<span style="color:#a6e22e">s</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_sum_Results</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Struct</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_sum_Results_TypeID is the unique identifier for the type Hash_sum_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Hash_sum_Results_TypeID</span> = <span style="color:#ae81ff">0xd093963b95a4e107</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_sum_Results</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_sum_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Results</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRootHash_sum_Results</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>) (<span style="color:#a6e22e">Hash_sum_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">st</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewRootStruct</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Results</span>{<span style="color:#a6e22e">st</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRootHash_sum_Results</span>(<span style="color:#a6e22e">msg</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Message</span>) (<span style="color:#a6e22e">Hash_sum_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">root</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">msg</span>.<span style="color:#a6e22e">Root</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Results</span>{<span style="color:#a6e22e">root</span>.<span style="color:#a6e22e">Struct</span>()}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_sum_Results</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">str</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">text</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#ae81ff">0xd093963b95a4e107</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_sum_Results</span>) <span style="color:#a6e22e">Hash</span>() ([]<span style="color:#66d9ef">byte</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">Ptr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> []byte(<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Data</span>()), <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_sum_Results</span>) <span style="color:#a6e22e">HasHash</span>() <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">HasPtr</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">Hash_sum_Results</span>) <span style="color:#a6e22e">SetHash</span>(<span style="color:#a6e22e">v</span> []<span style="color:#66d9ef">byte</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Struct</span>.<span style="color:#a6e22e">SetData</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_sum_Results_List is a list of Hash_sum_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_sum_Results_List</span> = <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_sum_Results</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// NewHash_sum_Results creates a new list of Hash_sum_Results.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewHash_sum_Results_List</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Segment</span>, <span style="color:#a6e22e">sz</span> <span style="color:#66d9ef">int32</span>) (<span style="color:#a6e22e">Hash_sum_Results_List</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">NewCompositeList</span>(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">ObjectSize</span>{<span style="color:#a6e22e">DataSize</span>: <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">PointerCount</span>: <span style="color:#ae81ff">1</span>}, <span style="color:#a6e22e">sz</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">StructList</span>[<span style="color:#a6e22e">Hash_sum_Results</span>]{<span style="color:#a6e22e">List</span>: <span style="color:#a6e22e">l</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Hash_sum_Results_Future is a wrapper for a Hash_sum_Results promised by a client call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hash_sum_Results_Future</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#f92672">*</span><span style="color:#a6e22e">capnp</span>.<span style="color:#a6e22e">Future</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Hash_sum_Results_Future</span>) <span style="color:#a6e22e">Struct</span>() (<span style="color:#a6e22e">Hash_sum_Results</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Future</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Hash_sum_Results</span>{<span style="color:#a6e22e">s</span>}, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">schema_db8274f9144abc7e</span> = <span style="color:#e6db74">&#34;x\xda|\x92?h\x14A\x18\xc5\xdf\x9b\x9bu\xe3\x9f&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xe5\x18&#39;\x16\xd7\x18\x91\x0b\x82\xc8\xe1\x19,T\xf4\x8e&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x14*\xb1\xd9\x8d\x16b7\xc4\xd5\x15rI\xb8\xdd#&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x88\xa0b#\x82 \xc4h\x1aA\x0b\xed4E\xea\xb4&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\&#34;\x04\x84\xa4U\xce\x10,\x84\x94\x01\xd1(\xba\xb2{&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xeem@/\xdd\xc2\x9b\xef}\xbf\xef\xed;\xc0\xba\xac&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;:\x87$\x84w\xd4\xda\x11\xfb\x8f~\xbe\xdb\x1f\xbd\xbe&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x0b\xb5\x97\x80\xb4\x81\xa1M\x0aB\xc6K/\x1e\xbeZ&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xd9\xb50\x03U\xca\x946\x87\x13e\xf1\xc3\xaf\xb9\xe2&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xe57\xf3PN!\xbe\xbd8\xd2\xbf\x19\xdd\xfb\x08P&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xbf\xe5\x92^\xa1\x0d\xe8\xf7&lt;\xa7\xbf&amp;_\xb1\xbd\xf6&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xf2\xc9\xa9\xa7\x8f\x97;\x0b\xacTms\x03\xd4k\xac&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x81\xf1\xe7O\xe3\x97\xe6g\x7f\xafn\xd5)~\x80\xda&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x12\x89\xfe\xec\xfb\x9e\xd2\xf2\xc2\x85/9\xa0\x1e\x14\xeb&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x90\xf1\xea\xad\xda\xb5o\xee\x99\xf5\x0e_:8\xb4S&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x8c\x10\xd4\xfb\xd2\xc9\xea\xec\x95\xeb\xed\xb9\xe7\x1b\xff`&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x1e\x173\xfa\xb4H\x9cN\x88\xfb\xfa\x81\xb0q$n&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xfa\x8d\xc9\xc8\xaf\x8c\xed6S\x13S&#39;\xcf\x9b0\xa8&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;L7oD~y\xd4\x0f[\xe3Q\x88\xecAW?&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;k\xc6\xa2\xc9\xe6\xcd\xca\x84?}10\xd5\xb2k\x9a&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xa6\xd1\xfb\x1d\xe0\x92\x9e,X@7Zf7(5&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x0c\xa1,\xfb\xce_\xb3:]\xb2\xcb$r\xa6\xb0\xd5&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;(\x8f\xfa\x03)\x92&#39;\x0b\x12\x90\x04\x94s\x18\xf0\xfa&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x0a\xf4\xfa\x05\x8b\x81\x09\x03:\x10t\xf0_\x8f\xce]&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xb5\x0eo/\x93\xab&amp;2\xdb\x99$ \xae)&amp;\x16&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;]Y\xf6\xcc&amp;\x0b\x11\xdb2\xab\xfc\x97\x81T[\x16&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;3sf\x90\xa4\xd8\x97\xa6\x985\x87Y\x87U\xf5\x18&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\x84\x1a\xb4\x99\xb7\x86Y\xfdT\xe9 \x84r\xec\x81\xf4&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xfa:\xed\xb0\xd5HS\xfe\x13\x00\x00\xff\xff\xcf\xa2\xe6&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;\xb3&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">schemas</span>.<span style="color:#a6e22e">Register</span>(<span style="color:#a6e22e">schema_db8274f9144abc7e</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0x80ac741ec7fb8f65</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0x92b20ad1a58ca0ca</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0xaead580f97fddabc</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0xd093963b95a4e107</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0xdffe94ae546cdee3</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0xe74bb2d0190cf89c</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0xea3e50f7663f7bdf</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#ae81ff">0xf29f97dd675a9431</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>客户端调用</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">client</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">rwc</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">ReadWriteCloser</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create a connection that we can use to get the HashFactory.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">conn</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rpc</span>.<span style="color:#a6e22e">NewConn</span>(<span style="color:#a6e22e">rpc</span>.<span style="color:#a6e22e">NewStreamTransport</span>(<span style="color:#a6e22e">rwc</span>), <span style="color:#66d9ef">nil</span>) <span style="color:#75715e">// nil sets default options
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Get the &#34;bootstrap&#34; interface.  This is the capability set with
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// rpc.MainInterface on the remote side.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">hf</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">hashes</span>.<span style="color:#a6e22e">HashFactory</span>{<span style="color:#a6e22e">Client</span>: <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Bootstrap</span>(<span style="color:#a6e22e">ctx</span>)}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Now we can call methods on hf, and they will be sent over c.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// The NewSha1 method does not have any parameters we can set, so we
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// pass a nil function.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">free</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">hf</span>.<span style="color:#a6e22e">NewSha1</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">free</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// &#39;NewSha1&#39; returns a future, which allows us to pipeline calls to
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// returned values before they are actually delivered.  Here, we issue
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// calls to an as-of-yet-unresolved Sha1 instance.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Hash</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// s refers to a remote Hash.  Method calls are delivered in order.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">free</span> = <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">hashes</span>.<span style="color:#a6e22e">Hash_write_Params</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">SetData</span>([]byte(<span style="color:#e6db74">&#34;Hello, &#34;</span>))
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">free</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">free</span> = <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">hashes</span>.<span style="color:#a6e22e">Hash_write_Params</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">SetData</span>([]byte(<span style="color:#e6db74">&#34;World!&#34;</span>))
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">free</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Get the sum, waiting for the result.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">free</span> = <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">Sum</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">free</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Struct</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Display the result.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sha1Val</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Hash</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sha1: %x\n&#34;</span>, <span style="color:#a6e22e">sha1Val</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">c1</span>, <span style="color:#a6e22e">c2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Pipe</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">serveHash</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">c1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">client</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">c2</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="参考链接">参考链接<a hidden class="anchor" aria-hidden="true" href="#参考链接">#</a></h2>
<ul>
<li><a href="https://capnproto.org/language.html">Capn Proto语言参考</a></li>
<li><a href="https://github.com/cloudflare/cloudflared/blob/master/quic/quic_protocol.go">Cloudflared</a></li>
<li><a href="https://github.com/inkeliz/karmem">https://github.com/inkeliz/karmem</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://czyt.tech/tags/golang/">golang</a></li>
      <li><a href="https://czyt.tech/tags/capn/">cap&#39;n</a></li>
      <li><a href="https://czyt.tech/tags/proto/">proto</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://czyt.tech/post/golang-perf-reference/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Go性能优化参考</span>
  </a>
  <a class="next" href="https://czyt.tech/post/golang-reflect-reference/">
    <span class="title">Next Page »</span>
    <br>
    <span>Golang反射使用指南</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Cap&#39;n Proto Windows环境设置 on twitter"
        href="https://twitter.com/intent/tweet/?text=Cap%27n%20Proto%20Windows%e7%8e%af%e5%a2%83%e8%ae%be%e7%bd%ae&amp;url=https%3a%2f%2fczyt.tech%2fpost%2fcapn-proto-setup-in-windows%2f&amp;hashtags=golang%2ccap%27n%2cproto">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Cap&#39;n Proto Windows环境设置 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fczyt.tech%2fpost%2fcapn-proto-setup-in-windows%2f&amp;title=Cap%27n%20Proto%20Windows%e7%8e%af%e5%a2%83%e8%ae%be%e7%bd%ae&amp;summary=Cap%27n%20Proto%20Windows%e7%8e%af%e5%a2%83%e8%ae%be%e7%bd%ae&amp;source=https%3a%2f%2fczyt.tech%2fpost%2fcapn-proto-setup-in-windows%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Cap&#39;n Proto Windows环境设置 on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fczyt.tech%2fpost%2fcapn-proto-setup-in-windows%2f&title=Cap%27n%20Proto%20Windows%e7%8e%af%e5%a2%83%e8%ae%be%e7%bd%ae">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Cap&#39;n Proto Windows环境设置 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fczyt.tech%2fpost%2fcapn-proto-setup-in-windows%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Cap&#39;n Proto Windows环境设置 on whatsapp"
        href="https://api.whatsapp.com/send?text=Cap%27n%20Proto%20Windows%e7%8e%af%e5%a2%83%e8%ae%be%e7%bd%ae%20-%20https%3a%2f%2fczyt.tech%2fpost%2fcapn-proto-setup-in-windows%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Cap&#39;n Proto Windows环境设置 on telegram"
        href="https://telegram.me/share/url?text=Cap%27n%20Proto%20Windows%e7%8e%af%e5%a2%83%e8%ae%be%e7%bd%ae&amp;url=https%3a%2f%2fczyt.tech%2fpost%2fcapn-proto-setup-in-windows%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
<script src="https://utteranc.es/client.js"
repo="czyt/comments"
issue-term="pathname"
theme="github-light"
crossorigin="anonymous"
async>
</script>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://czyt.tech/">虫子樱桃</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
        <span id="busuanzi_container_site_pv">Total visited<span id="busuanzi_value_site_pv"></span>times</span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }
const loadScript = (url, onloadFunction) => {
    var newScript = document.createElement("script");
    newScript.onerror =  (oError) => {
      throw new URIError("The script " + oError.target.src + " didn't load correctly.");
    };
    if (onloadFunction) { newScript.onload = onloadFunction; }
    document.head.insertAdjacentElement('beforeend', newScript);
    newScript.src = url;
  }
  
if (document.querySelectorAll('.mermaid').length > 0) {
      loadScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.1/mermaid.min.js', () => {
        document.head.insertAdjacentHTML("beforeend", `<style>.mermaid svg { background-color: #dadcd8 !important; }</style>`);
        // default, dark, neutral, forest
        mermaid.initialize({ startOnLoad: false, securityLevel: "strict", logLevel: 1, theme: "neutral" });
        
        
        mermaid.init();
        console.log("mermaid init done");
      })
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>


<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>
<script>
  mediumZoom('.entry-cover img');
  mediumZoom('.post-content img:not([no-zoom])');
</script>


<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
	
</script>
</body>

</html>
