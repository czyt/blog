<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | 虫子樱桃</title>
<meta name="keywords" content="" />
<meta name="description" content="Posts - 虫子樱桃">
<meta name="author" content="czyt">
<link rel="canonical" href="https://czyt.tech/post/" />
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.2300a0eceb56958fe6e1d606ffa0a755d9ef95657cbf4b79a3fa1d3b9dc8b654.css" integrity="sha256-IwCg7OtWlY/m4dYG/6CnVdnvlWV8v0t5o/odO53ItlQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://czyt.tech/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://czyt.tech/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://czyt.tech/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://czyt.tech/apple-touch-icon.png">
<link rel="mask-icon" href="https://czyt.tech/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.105.0">
<link rel="alternate" type="application/rss+xml" href="https://czyt.tech/post/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Posts" />
<meta property="og:description" content="我来问道无馀说，云在青天水在瓶。" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://czyt.tech/post/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content="我来问道无馀说，云在青天水在瓶。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://czyt.tech/post/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://czyt.tech/" accesskey="h" title="虫子樱桃 (Alt + H)">虫子樱桃</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://czyt.tech/" title="🏠Home">
                    <span>🏠Home</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/about/" title="🙋About">
                    <span>🙋About</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/post/" title="📚Posts">
                    <span class="active">📚Posts</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/search/" title="🔍Search">
                    <span>🔍Search</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/tags/" title="🔖Tags">
                    <span>🔖Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://czyt.tech/">Home</a></div>
  <h1>Posts</h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Golang nocopy check
    </h2>
  </header>
  <section class="entry-content">
    <p>目的 实现nocopy的目的在于，golang在进行参数传递时，都是传递副本的方式。但是某些情况，我们是需要进行传递对象的引用的（特别是一些指针对象，可能会导致多个指针的副本的操作造成程序陷入恐慌），为了杜绝调用者的复制，只能指针传递全局唯一对象。那么就可以通过添加nocopy来实现对go vet参数支持的no copy 检查。
实现 golang里面最常用的sync.WaitGroup就是通过nocopy实现的。参考定义
// A WaitGroup must not be copied after first use. type WaitGroup struct { noCopy noCopy // 64-bit value: high 32 bits are counter, low 32 bits are waiter count. // 64-bit atomic operations require 64-bit alignment, but 32-bit // compilers do not ensure it. So we allocate 12 bytes and then use // the aligned 8 bytes in them as state, and the other 4 as storage // for the sema....</p>
  </section>
  <footer class="entry-footer"><span title='2022-06-17 00:00:00 +0000 UTC'>June 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to Golang nocopy check" href="https://czyt.tech/post/golang-nocopy-check/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>golang正则校验支付宝微信支付授权码
    </h2>
  </header>
  <section class="entry-content">
    <p>参考sdk定义
package main import ( &#34;fmt&#34; &#34;regexp&#34; ) // wechat pay 用户付款码条形码规则：18位纯数字，以10、11、12、13、14、15开头 // alipay 支付授权码，25~30开头的长度为16~24位的数字，实际字符串长度以开发者获取的付款码长度为准 func main() { // wechat regwechat:=regexp.MustCompile(&#34;^(1[0-5])\\d{16}$&#34;) matchwechat := regwechat.MatchString(&#34;154658833119096245&#34;) fmt.Println(matchwechat) // alipay regalipay:=regexp.MustCompile(&#34;^(2[5-9]|30)\\d{14,22}$&#34;) matchalipay := regalipay.MatchString(&#34;307573774583867517336&#34;) fmt.Println(matchalipay) } 参考
微信
支付宝</p>
  </section>
  <footer class="entry-footer"><span title='2022-06-17 00:00:00 +0000 UTC'>June 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to golang正则校验支付宝微信支付授权码" href="https://czyt.tech/post/golang-check-wechat-alipay-authcode-via-regxp/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Linux环境下Perl提权
    </h2>
  </header>
  <section class="entry-content">
    <p>事故起因 我们公司的应用程序部署目录有个bin目录，手误，删除的时候输入的是/bin
事故现象 ● SSH 不能登陆进来了 ● ls、chmod等常用命令都不能使用了 ● wget 还能用
事故解决 通过查找谷歌，发现有个perl带有提权的功能,简单来说就是
perl -e &#34;chmod 0777, &#39;/bin/ls&#39;&#34; 通过这个方式可以对指定的文件进行权限的修改。于是从另外的机器上打包了一个/bin目录，放到网上，wget 下载到本地wget bin.tar.gz
​ 本机开外网ssh转发，scp 拷贝tar文件到目录，执行
perl -e &#34;chmod 0777, &#39;./tar&#39;&#34; ,再使用tar进行文件解压./tar xvzf bin.tar.gz -C /,然后再给chmod执行文件赋予执行权限
perl -e &#34;chmod 0777, &#39;/bin/chmod&#39;&#34; 然后再通过chmod 执行 chmod -R &#43;x /bin/给/bin目录下的可执行程序文件授予执行权限。至此，完成事故修复。
参考连接 ● https://perldoc.perl.org/functions/chmod.html</p>
  </section>
  <footer class="entry-footer"><span title='2022-06-17 00:00:00 +0000 UTC'>June 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to Linux环境下Perl提权" href="https://czyt.tech/post/perl-privilege-escalation-in-linux/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>ebpf Golang参考
    </h2>
  </header>
  <section class="entry-content">
    <p>整理一个列表，持续更新。
理论 ebf官网 B站视频 eBPF 和 Go，超能力组合 实践 Tracing Go Functions with eBPF part1 part2 Getting Started with eBPF and Go Linux中基于eBPF的恶意利用与检测机制 如何用eBPF分析Golang应用 使用BPF, 将Go网络程序的吞吐提升8倍 使用ebpf跟踪rpcx微服务 BPF MAP机制 一种通用数据结构，可以存储不同类型数据的通用数据结构 Andrii Nakryiko 抽象数据容器(abstract data container) bpf系统调用的说明 《使用C语言从头开发一个Hello World级别的eBPF程序》 《Linux Observability with BPF》 《揭秘BPF map前生今世》 bpf系统调用说明 官方bpf map参考手册 bpftool参考手册 《Building BPF applications with libbpf-bootstrap》 https://github.com/DavadDi/bpf_study golang 包 https://github.com/cilium/ebpf </p>
  </section>
  <footer class="entry-footer"><span title='2022-06-11 00:00:00 +0000 UTC'>June 11, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to ebpf Golang参考" href="https://czyt.tech/post/ebpf-golang-reference/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Go性能优化参考
    </h2>
  </header>
  <section class="entry-content">
    <p>电子书 编写和优化Go代码 Go Optimizations 101 https://github.com/dgryski/go-perfbook https://github.com/DataDog/go-profiler-notes https://github.com/bobstrecansky/HighPerformanceWithGo/ Go package https://github.com/aclements/go-perf 文章 官方博客 Profiling Go Programs
https://sumercip.com/posts/inside-the-go-cpu-profiler/
How to Write Benchmarks in Go : https://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go
Debugging performance issues in Go programs : https://github.com/golang/go/wiki/Performance
Go execution tracer : https://blog.gopheracademy.com/advent-2017/go-execution-tracer/ (see also the The tracer design doc link)
A whirlwind tour of Go’s runtime environment variables (see godebug) : https://dave.cheney.net/2015/11/29/a-whirlwind-tour-of-gos-runtime-environment-variables
benchstat : https://godoc.org/golang.org/x/perf/cmd/benchstat
pyroscope: 一个简单易用的持续剖析平台
VSCODE可视化调试Go程序
Jetbrains官方Goland代码调试文档
https://github.com/cch123/perf_workshop_2021
GO高性能编程精华
Go 语言中各式各样的优化手段
Go 中简单的内存节省技巧...</p>
  </section>
  <footer class="entry-footer"><span title='2022-06-11 00:00:00 +0000 UTC'>June 11, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to Go性能优化参考" href="https://czyt.tech/post/golang-perf-reference/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Cap&#39;n Proto Windows环境设置
    </h2>
  </header>
  <section class="entry-content">
    <p>Cap’n proto 号称是比protobuff更快的proto语言。官网截图
Cap’n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think Protocol Buffers, except faster. In fact, in benchmarks, Cap’n Proto is INFINITY TIMES faster than Protocol Buffers.
协议特性
Cap’n Proto’s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered “levels”, so that implementations may declare which features they have covered by advertising a level number....</p>
  </section>
  <footer class="entry-footer"><span title='2022-06-10 00:00:00 +0000 UTC'>June 10, 2022</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to Cap&#39;n Proto Windows环境设置" href="https://czyt.tech/post/capn-proto-setup-in-windows/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Golang反射使用指南
    </h2>
  </header>
  <section class="entry-content">
    <p>Go是一门强类型的语言，在大多数情况下，申明一个变量、函数、struct都是直截了当的。在大多数情况下，这些都是够用的，但有时你想在程序运行中来动态扩展程序的信息，也许你想把文件或网络请求中的数据映射到一个变量中;也许你想建立一个能处理不同类型的工具(虽然Go1.18有了泛型)。在这些情况下，你需要使用反射。反射使你有能力在运行时检查、修改和创建变量、函数和结构的能力。
反射的核心 图片转自 Go 语言设计与实现
反射的三大核心是*Types, Kinds, Values,下面将围绕这三个方面来进行讲解。
我们先定义一个struct对象。
type User struct { Name	string Age int } 类型Types 通过反射获取类型
u := User{ Name: &#34;czyt&#34;, Age: 18, } uptr := &amp;u ot := reflect.TypeOf(u) otptr := reflect.TypeOf(uptr) log.Println(ot.Name()) // 打印 User log.Println(otptr.Name()) // 打印 空 通过调用Name()方法返回类型的名称，某些类型，如切片或指针，没有名称，此方法返回一个空字符串。
种类Kinds Kind通过调用Kind()得来。
u := User{ Name: &#34;czyt&#34;, Age: 18, } uptr := &amp;u ot := reflect.TypeOf(u) otptr := reflect.TypeOf(uptr) log.Println(ot.Kind()) // 输出 struct log.Println(otptr.Kind()) // 输出 ptr Kind() 返回的是kind类型的枚举。...</p>
  </section>
  <footer class="entry-footer"><span title='2022-06-02 00:00:00 +0000 UTC'>June 2, 2022</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to Golang反射使用指南" href="https://czyt.tech/post/golang-reflect-reference/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Golang MongoDB ODM mgm使用
    </h2>
  </header>
  <section class="entry-content">
    <p>(本文大部分内容根据官方文档翻译而来)
环境准备 golang 1.10&#43; mongodb mgm 模型定义 定义 定义模型
type Book struct { // DefaultModel adds _id, created_at and updated_at fields to the Model mgm.DefaultModel `bson:&#34;,inline&#34;` Name string `json:&#34;name&#34; bson:&#34;name&#34;` Pages int `json:&#34;pages&#34; bson:&#34;pages&#34;` } func NewBook(name string, pages int) *Book { return &amp;Book{ Name: name, Pages: pages, } } mgm 在创建表时会自动检测Model生成的Collection名称
book:=Book{} // Print your model collection name. collName := mgm.CollName(&amp;book) fmt.Println(collName) // 打印: books 如果要自定义生成Collection的名称。需要实现CollectionNameGetter接口。
func (model *Book) CollectionName() string { return &#34;my_books&#34; } // mgm return &#34;my_books&#34; collection coll:=mgm....</p>
  </section>
  <footer class="entry-footer"><span title='2022-05-31 00:00:00 +0000 UTC'>May 31, 2022</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to Golang MongoDB ODM mgm使用" href="https://czyt.tech/post/golang-mongodb-mgm-odm-usage/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Flutter开发Maven配置
    </h2>
  </header>
  <section class="entry-content">
    <p>在Flutter开发时，可能因为网络等原因导致maven不能正常工作，造成Flutter项目卡住的情况。下面是解决办法。原文链接 https://flutter.cn/community/china
如果你在国内使用 Flutter，那么你可能需要找一个与官方同步的可信的镜像站点，帮助你的 Flutter 命令行工具到该镜像站点下载其所需的资源。你需要为此设置两个环境变量：PUB_HOSTED_URL 和 FLUTTER_STORAGE_BASE_URL，然后再运行 Flutter 命令行工具。
以 macOS 或者与 Linux 相近的系统为例，这里有以下步骤帮助你设定镜像。在系统终端里执行如下命令设定环境变量，并通过 GitHub 检出 Flutter SDK：
content_copy
$ export PUB_HOSTED_URL=https://pub.flutter-io.cn$ export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn$ git clone -b dev https://github.com/flutter/flutter.git$ export PATH=&#34;$PWD/flutter/bin:$PATH&#34;$ cd ./flutter$ flutter doctor Flutter SDK配置修改 flutter的maven设置在&lt;安装目录&gt;\packages\flutter_tools\gradle\flutter.gradle
打包配置 buildscript {repositories {maven { url &#39;https://maven.aliyun.com/repository/google&#39; }maven { url &#39;https://maven.aliyun.com/repository/public&#39; }maven { url &#39;https://maven.aliyun.com/repository/central&#39; }maven { url &#39;https://maven.aliyun.com/repository/jcenter&#39; }// google()// jcenter()}dependencies {/* When bumping, also update ndkVersion above....</p>
  </section>
  <footer class="entry-footer"><span title='2022-05-27 00:00:00 +0000 UTC'>May 27, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to Flutter开发Maven配置" href="https://czyt.tech/post/maven-setting-for-flutter-dev/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>MongoDB操作指北
    </h2>
  </header>
  <section class="entry-content">
    <p>TL;DR
环境准备 mongoDB 预备知识 MongoDB常见的数据类型
数据类型 示例 说明 Null {&#34;x&#34; : null} Boolean {&#34;x&#34; : true} Number {&#34;x&#34; : 3.14} {&#34;x&#34; : 3} {&#34;x&#34; : NumberInt(&#34;3&#34;)} {&#34;x&#34; : NumberLong(&#34;3&#34;)} 默认64位浮点数，整数需要使用NumberInt和NumberLong String {&#34;x&#34; : &#34;foobar&#34;} 编码格式为UTF-8 Date {&#34;x&#34; : new Date()} 64位时间戳(从January 1, 1970)，不存时区。通过new Date()进行调用。 Regular expression {&#34;x&#34; : /foobar/i} javascript 正则 Array {&#34;x&#34; : [&#34;a&#34;, &#34;b&#34;, &#34;c&#34;]} Embedded document {&#34;x&#34; : {&#34;foo&#34; : &#34;bar&#34;}} Object ID {&#34;x&#34; : ObjectId()} 文档12字节的ID Binary data 一个任意字节的字符串。是保存非UTF-8字符串到数据库的唯一方法。 Code {&#34;x&#34; : function() { /* ....</p>
  </section>
  <footer class="entry-footer"><span title='2022-05-26 00:00:00 +0000 UTC'>May 26, 2022</span>&nbsp;·&nbsp;9 min&nbsp;·&nbsp;czyt</footer>
  <a class="entry-link" aria-label="post link to MongoDB操作指北" href="https://czyt.tech/post/operate-mongodb-tutorial/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://czyt.tech/post/page/2/">« Prev Page</a>
    <a class="next" href="https://czyt.tech/post/page/4/">Next Page »</a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://czyt.tech/">虫子樱桃</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
        <span id="busuanzi_container_site_pv">Total visited<span id="busuanzi_value_site_pv"></span>times</span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }
const loadScript = (url, onloadFunction) => {
    var newScript = document.createElement("script");
    newScript.onerror =  (oError) => {
      throw new URIError("The script " + oError.target.src + " didn't load correctly.");
    };
    if (onloadFunction) { newScript.onload = onloadFunction; }
    document.head.insertAdjacentElement('beforeend', newScript);
    newScript.src = url;
  }
  
if (document.querySelectorAll('.mermaid').length > 0) {
      loadScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.1/mermaid.min.js', () => {
        document.head.insertAdjacentHTML("beforeend", `<style>.mermaid svg { background-color: #dadcd8 !important; }</style>`);
        // default, dark, neutral, forest
        mermaid.initialize({ startOnLoad: false, securityLevel: "strict", logLevel: 1, theme: "neutral" });
        
        
        mermaid.init();
        console.log("mermaid init done");
      })
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
