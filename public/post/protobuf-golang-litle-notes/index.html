<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Protobuf golangå°æœ­ | è™«å­æ¨±æ¡ƒ</title>
<meta name="keywords" content="golang, protobuf" />
<meta name="description" content="Oneof å¦‚æœæ‚¨æœ‰è®¸å¤šå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨OneofåŠŸèƒ½æ¥æ‰§è¡Œæ­¤è¡Œä¸ºå¹¶ä¿å­˜å†…å­˜ã€‚ä¸€ä¸ªå­—æ®µå°±åƒå¸¸è§„å­—æ®µä¸€æ ·ï¼Œé™¤äº†å•ä¸€å…±äº«å†…å­˜ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œæœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µã€‚è®¾ç½®Oneofçš„ä»»ä½•æˆå‘˜éƒ½ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰å…¶ä»–æˆå‘˜ã€‚
â€‹	Google protobuf æ–‡æ¡£#Oneof
ç¤ºä¾‹proto åˆ›å»ºprotoOneof.proto çš„protoæ–‡ä»¶
syntax = &#34;proto3&#34;; package oneof_test; option go_package =&#39;.;oneof&#39;; message WeiboUser{ string user_id = 1; string user_nick = 2; } message DouyinUser{ string auth_token = 1; string nick_name = 2; } message User{ oneof user_source{ string weibo_url = 1; string douyin_url = 2; } oneof user_info{ WeiboUser weibo_user_info = 3; DouyinUser douyin_user_info = 4; } } ä½¿ç”¨å‘½ä»¤ç”Ÿæˆgoä»£ç 
protoc --proto_path=. --go_out=paths=source_relative:./oneof ./protoOneof.proto ç”Ÿæˆçš„protoOneof.pb.goä»£ç å¦‚ä¸‹ï¼š">
<meta name="author" content="czyt">
<link rel="canonical" href="https://czyt.tech/post/protobuf-golang-litle-notes/" />
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.2300a0eceb56958fe6e1d606ffa0a755d9ef95657cbf4b79a3fa1d3b9dc8b654.css" integrity="sha256-IwCg7OtWlY/m4dYG/6CnVdnvlWV8v0t5o/odO53ItlQ=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js" integrity="sha256-uVus3DnjejMqn4g7Hni&#43;Srwf3KK8HyZB9V4809q9TWE="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://czyt.tech/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://czyt.tech/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://czyt.tech/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://czyt.tech/apple-touch-icon.png">
<link rel="mask-icon" href="https://czyt.tech/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.105.0">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Protobuf golangå°æœ­" />
<meta property="og:description" content="Oneof å¦‚æœæ‚¨æœ‰è®¸å¤šå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨OneofåŠŸèƒ½æ¥æ‰§è¡Œæ­¤è¡Œä¸ºå¹¶ä¿å­˜å†…å­˜ã€‚ä¸€ä¸ªå­—æ®µå°±åƒå¸¸è§„å­—æ®µä¸€æ ·ï¼Œé™¤äº†å•ä¸€å…±äº«å†…å­˜ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œæœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µã€‚è®¾ç½®Oneofçš„ä»»ä½•æˆå‘˜éƒ½ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰å…¶ä»–æˆå‘˜ã€‚
â€‹	Google protobuf æ–‡æ¡£#Oneof
ç¤ºä¾‹proto åˆ›å»ºprotoOneof.proto çš„protoæ–‡ä»¶
syntax = &#34;proto3&#34;; package oneof_test; option go_package =&#39;.;oneof&#39;; message WeiboUser{ string user_id = 1; string user_nick = 2; } message DouyinUser{ string auth_token = 1; string nick_name = 2; } message User{ oneof user_source{ string weibo_url = 1; string douyin_url = 2; } oneof user_info{ WeiboUser weibo_user_info = 3; DouyinUser douyin_user_info = 4; } } ä½¿ç”¨å‘½ä»¤ç”Ÿæˆgoä»£ç 
protoc --proto_path=. --go_out=paths=source_relative:./oneof ./protoOneof.proto ç”Ÿæˆçš„protoOneof.pb.goä»£ç å¦‚ä¸‹ï¼š" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://czyt.tech/post/protobuf-golang-litle-notes/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-07-25T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-07-25T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Protobuf golangå°æœ­"/>
<meta name="twitter:description" content="Oneof å¦‚æœæ‚¨æœ‰è®¸å¤šå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨OneofåŠŸèƒ½æ¥æ‰§è¡Œæ­¤è¡Œä¸ºå¹¶ä¿å­˜å†…å­˜ã€‚ä¸€ä¸ªå­—æ®µå°±åƒå¸¸è§„å­—æ®µä¸€æ ·ï¼Œé™¤äº†å•ä¸€å…±äº«å†…å­˜ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œæœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µã€‚è®¾ç½®Oneofçš„ä»»ä½•æˆå‘˜éƒ½ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰å…¶ä»–æˆå‘˜ã€‚
â€‹	Google protobuf æ–‡æ¡£#Oneof
ç¤ºä¾‹proto åˆ›å»ºprotoOneof.proto çš„protoæ–‡ä»¶
syntax = &#34;proto3&#34;; package oneof_test; option go_package =&#39;.;oneof&#39;; message WeiboUser{ string user_id = 1; string user_nick = 2; } message DouyinUser{ string auth_token = 1; string nick_name = 2; } message User{ oneof user_source{ string weibo_url = 1; string douyin_url = 2; } oneof user_info{ WeiboUser weibo_user_info = 3; DouyinUser douyin_user_info = 4; } } ä½¿ç”¨å‘½ä»¤ç”Ÿæˆgoä»£ç 
protoc --proto_path=. --go_out=paths=source_relative:./oneof ./protoOneof.proto ç”Ÿæˆçš„protoOneof.pb.goä»£ç å¦‚ä¸‹ï¼š"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://czyt.tech/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Protobuf golangå°æœ­",
      "item": "https://czyt.tech/post/protobuf-golang-litle-notes/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Protobuf golangå°æœ­",
  "name": "Protobuf golangå°æœ­",
  "description": "Oneof å¦‚æœæ‚¨æœ‰è®¸å¤šå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨OneofåŠŸèƒ½æ¥æ‰§è¡Œæ­¤è¡Œä¸ºå¹¶ä¿å­˜å†…å­˜ã€‚ä¸€ä¸ªå­—æ®µå°±åƒå¸¸è§„å­—æ®µä¸€æ ·ï¼Œé™¤äº†å•ä¸€å…±äº«å†…å­˜ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œæœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µã€‚è®¾ç½®Oneofçš„ä»»ä½•æˆå‘˜éƒ½ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰å…¶ä»–æˆå‘˜ã€‚\nâ€‹\tGoogle protobuf æ–‡æ¡£#Oneof\nç¤ºä¾‹proto åˆ›å»ºprotoOneof.proto çš„protoæ–‡ä»¶\nsyntax = \u0026#34;proto3\u0026#34;; package oneof_test; option go_package =\u0026#39;.;oneof\u0026#39;; message WeiboUser{ string user_id = 1; string user_nick = 2; } message DouyinUser{ string auth_token = 1; string nick_name = 2; } message User{ oneof user_source{ string weibo_url = 1; string douyin_url = 2; } oneof user_info{ WeiboUser weibo_user_info = 3; DouyinUser douyin_user_info = 4; } } ä½¿ç”¨å‘½ä»¤ç”Ÿæˆgoä»£ç \nprotoc --proto_path=. --go_out=paths=source_relative:./oneof ./protoOneof.proto ç”Ÿæˆçš„protoOneof.pb.goä»£ç å¦‚ä¸‹ï¼š",
  "keywords": [
    "golang", "protobuf"
  ],
  "articleBody": "Oneof å¦‚æœæ‚¨æœ‰è®¸å¤šå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨OneofåŠŸèƒ½æ¥æ‰§è¡Œæ­¤è¡Œä¸ºå¹¶ä¿å­˜å†…å­˜ã€‚ä¸€ä¸ªå­—æ®µå°±åƒå¸¸è§„å­—æ®µä¸€æ ·ï¼Œé™¤äº†å•ä¸€å…±äº«å†…å­˜ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œæœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µã€‚è®¾ç½®Oneofçš„ä»»ä½•æˆå‘˜éƒ½ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰å…¶ä»–æˆå‘˜ã€‚\nâ€‹\tGoogle protobuf æ–‡æ¡£#Oneof\nç¤ºä¾‹proto åˆ›å»ºprotoOneof.proto çš„protoæ–‡ä»¶\nsyntax = \"proto3\"; package oneof_test; option go_package ='.;oneof'; message WeiboUser{ string user_id = 1; string user_nick = 2; } message DouyinUser{ string auth_token = 1; string nick_name = 2; } message User{ oneof user_source{ string weibo_url = 1; string douyin_url = 2; } oneof user_info{ WeiboUser weibo_user_info = 3; DouyinUser douyin_user_info = 4; } } ä½¿ç”¨å‘½ä»¤ç”Ÿæˆgoä»£ç \nprotoc --proto_path=. --go_out=paths=source_relative:./oneof ./protoOneof.proto ç”Ÿæˆçš„protoOneof.pb.goä»£ç å¦‚ä¸‹ï¼š\n// Code generated by protoc-gen-go. DO NOT EDIT. // versions: // protoc-gen-go v1.28.0 // protoc v3.21.3 // source: protoOneof.proto package oneof import ( protoreflect \"google.golang.org/protobuf/reflect/protoreflect\" protoimpl \"google.golang.org/protobuf/runtime/protoimpl\" reflect \"reflect\" sync \"sync\" ) const ( // Verify that this generated code is sufficiently up-to-date. _ = protoimpl.EnforceVersion(20 - protoimpl.MinVersion) // Verify that runtime/protoimpl is sufficiently up-to-date. _ = protoimpl.EnforceVersion(protoimpl.MaxVersion - 20) ) type WeiboUser struct { state protoimpl.MessageState sizeCache protoimpl.SizeCache unknownFields protoimpl.UnknownFields UserId string `protobuf:\"bytes,1,opt,name=user_id,json=userId,proto3\" json:\"user_id,omitempty\"` UserNick string `protobuf:\"bytes,2,opt,name=user_nick,json=userNick,proto3\" json:\"user_nick,omitempty\"` } func (x *WeiboUser) Reset() { *x = WeiboUser{} if protoimpl.UnsafeEnabled { mi := \u0026file_protoOneof_proto_msgTypes[0] ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) ms.StoreMessageInfo(mi) } } func (x *WeiboUser) String() string { return protoimpl.X.MessageStringOf(x) } func (*WeiboUser) ProtoMessage() {} func (x *WeiboUser) ProtoReflect() protoreflect.Message { mi := \u0026file_protoOneof_proto_msgTypes[0] if protoimpl.UnsafeEnabled \u0026\u0026 x != nil { ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) if ms.LoadMessageInfo() == nil { ms.StoreMessageInfo(mi) } return ms } return mi.MessageOf(x) } // Deprecated: Use WeiboUser.ProtoReflect.Descriptor instead. func (*WeiboUser) Descriptor() ([]byte, []int) { return file_protoOneof_proto_rawDescGZIP(), []int{0} } func (x *WeiboUser) GetUserId() string { if x != nil { return x.UserId } return \"\" } func (x *WeiboUser) GetUserNick() string { if x != nil { return x.UserNick } return \"\" } type DouyinUser struct { state protoimpl.MessageState sizeCache protoimpl.SizeCache unknownFields protoimpl.UnknownFields AuthToken string `protobuf:\"bytes,1,opt,name=auth_token,json=authToken,proto3\" json:\"auth_token,omitempty\"` NickName string `protobuf:\"bytes,2,opt,name=nick_name,json=nickName,proto3\" json:\"nick_name,omitempty\"` } func (x *DouyinUser) Reset() { *x = DouyinUser{} if protoimpl.UnsafeEnabled { mi := \u0026file_protoOneof_proto_msgTypes[1] ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) ms.StoreMessageInfo(mi) } } func (x *DouyinUser) String() string { return protoimpl.X.MessageStringOf(x) } func (*DouyinUser) ProtoMessage() {} func (x *DouyinUser) ProtoReflect() protoreflect.Message { mi := \u0026file_protoOneof_proto_msgTypes[1] if protoimpl.UnsafeEnabled \u0026\u0026 x != nil { ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) if ms.LoadMessageInfo() == nil { ms.StoreMessageInfo(mi) } return ms } return mi.MessageOf(x) } // Deprecated: Use DouyinUser.ProtoReflect.Descriptor instead. func (*DouyinUser) Descriptor() ([]byte, []int) { return file_protoOneof_proto_rawDescGZIP(), []int{1} } func (x *DouyinUser) GetAuthToken() string { if x != nil { return x.AuthToken } return \"\" } func (x *DouyinUser) GetNickName() string { if x != nil { return x.NickName } return \"\" } type User struct { state protoimpl.MessageState sizeCache protoimpl.SizeCache unknownFields protoimpl.UnknownFields // Types that are assignable to UserSource: //\t*User_WeiboUrl //\t*User_DouyinUrl UserSource isUser_UserSource `protobuf_oneof:\"user_source\"` // Types that are assignable to UserInfo: //\t*User_WeiboUserInfo //\t*User_DouyinUserInfo UserInfo isUser_UserInfo `protobuf_oneof:\"user_info\"` } func (x *User) Reset() { *x = User{} if protoimpl.UnsafeEnabled { mi := \u0026file_protoOneof_proto_msgTypes[2] ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) ms.StoreMessageInfo(mi) } } func (x *User) String() string { return protoimpl.X.MessageStringOf(x) } func (*User) ProtoMessage() {} func (x *User) ProtoReflect() protoreflect.Message { mi := \u0026file_protoOneof_proto_msgTypes[2] if protoimpl.UnsafeEnabled \u0026\u0026 x != nil { ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) if ms.LoadMessageInfo() == nil { ms.StoreMessageInfo(mi) } return ms } return mi.MessageOf(x) } // Deprecated: Use User.ProtoReflect.Descriptor instead. func (*User) Descriptor() ([]byte, []int) { return file_protoOneof_proto_rawDescGZIP(), []int{2} } func (m *User) GetUserSource() isUser_UserSource { if m != nil { return m.UserSource } return nil } func (x *User) GetWeiboUrl() string { if x, ok := x.GetUserSource().(*User_WeiboUrl); ok { return x.WeiboUrl } return \"\" } func (x *User) GetDouyinUrl() string { if x, ok := x.GetUserSource().(*User_DouyinUrl); ok { return x.DouyinUrl } return \"\" } func (m *User) GetUserInfo() isUser_UserInfo { if m != nil { return m.UserInfo } return nil } func (x *User) GetWeiboUserInfo() *WeiboUser { if x, ok := x.GetUserInfo().(*User_WeiboUserInfo); ok { return x.WeiboUserInfo } return nil } func (x *User) GetDouyinUserInfo() *DouyinUser { if x, ok := x.GetUserInfo().(*User_DouyinUserInfo); ok { return x.DouyinUserInfo } return nil } type isUser_UserSource interface { isUser_UserSource() } type User_WeiboUrl struct { WeiboUrl string `protobuf:\"bytes,1,opt,name=weibo_url,json=weiboUrl,proto3,oneof\"` } type User_DouyinUrl struct { DouyinUrl string `protobuf:\"bytes,2,opt,name=douyin_url,json=douyinUrl,proto3,oneof\"` } func (*User_WeiboUrl) isUser_UserSource() {} func (*User_DouyinUrl) isUser_UserSource() {} type isUser_UserInfo interface { isUser_UserInfo() } type User_WeiboUserInfo struct { WeiboUserInfo *WeiboUser `protobuf:\"bytes,3,opt,name=weibo_user_info,json=weiboUserInfo,proto3,oneof\"` } type User_DouyinUserInfo struct { DouyinUserInfo *DouyinUser `protobuf:\"bytes,4,opt,name=douyin_user_info,json=douyinUserInfo,proto3,oneof\"` } func (*User_WeiboUserInfo) isUser_UserInfo() {} func (*User_DouyinUserInfo) isUser_UserInfo() {} var File_protoOneof_proto protoreflect.FileDescriptor var file_protoOneof_proto_rawDesc = []byte{ 0x0a, 0x10, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x4f, 0x6e, 0x65, 0x6f, 0x66, 0x2e, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x12, 0x0a, 0x6f, 0x6e, 0x65, 0x6f, 0x66, 0x5f, 0x74, 0x65, 0x73, 0x74, 0x22, 0x41, 0x0a, 0x09, 0x57, 0x65, 0x69, 0x62, 0x6f, 0x55, 0x73, 0x65, 0x72, 0x12, 0x17, 0x0a, 0x07, 0x75, 0x73, 0x65, 0x72, 0x5f, 0x69, 0x64, 0x18, 0x01, 0x20, 0x01, 0x28, 0x09, 0x52, 0x06, 0x75, 0x73, 0x65, 0x72, 0x49, 0x64, 0x12, 0x1b, 0x0a, 0x09, 0x75, 0x73, 0x65, 0x72, 0x5f, 0x6e, 0x69, 0x63, 0x6b, 0x18, 0x02, 0x20, 0x01, 0x28, 0x09, 0x52, 0x08, 0x75, 0x73, 0x65, 0x72, 0x4e, 0x69, 0x63, 0x6b, 0x22, 0x48, 0x0a, 0x0a, 0x44, 0x6f, 0x75, 0x79, 0x69, 0x6e, 0x55, 0x73, 0x65, 0x72, 0x12, 0x1d, 0x0a, 0x0a, 0x61, 0x75, 0x74, 0x68, 0x5f, 0x74, 0x6f, 0x6b, 0x65, 0x6e, 0x18, 0x01, 0x20, 0x01, 0x28, 0x09, 0x52, 0x09, 0x61, 0x75, 0x74, 0x68, 0x54, 0x6f, 0x6b, 0x65, 0x6e, 0x12, 0x1b, 0x0a, 0x09, 0x6e, 0x69, 0x63, 0x6b, 0x5f, 0x6e, 0x61, 0x6d, 0x65, 0x18, 0x02, 0x20, 0x01, 0x28, 0x09, 0x52, 0x08, 0x6e, 0x69, 0x63, 0x6b, 0x4e, 0x61, 0x6d, 0x65, 0x22, 0xe7, 0x01, 0x0a, 0x04, 0x55, 0x73, 0x65, 0x72, 0x12, 0x1d, 0x0a, 0x09, 0x77, 0x65, 0x69, 0x62, 0x6f, 0x5f, 0x75, 0x72, 0x6c, 0x18, 0x01, 0x20, 0x01, 0x28, 0x09, 0x48, 0x00, 0x52, 0x08, 0x77, 0x65, 0x69, 0x62, 0x6f, 0x55, 0x72, 0x6c, 0x12, 0x1f, 0x0a, 0x0a, 0x64, 0x6f, 0x75, 0x79, 0x69, 0x6e, 0x5f, 0x75, 0x72, 0x6c, 0x18, 0x02, 0x20, 0x01, 0x28, 0x09, 0x48, 0x00, 0x52, 0x09, 0x64, 0x6f, 0x75, 0x79, 0x69, 0x6e, 0x55, 0x72, 0x6c, 0x12, 0x3f, 0x0a, 0x0f, 0x77, 0x65, 0x69, 0x62, 0x6f, 0x5f, 0x75, 0x73, 0x65, 0x72, 0x5f, 0x69, 0x6e, 0x66, 0x6f, 0x18, 0x03, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x15, 0x2e, 0x6f, 0x6e, 0x65, 0x6f, 0x66, 0x5f, 0x74, 0x65, 0x73, 0x74, 0x2e, 0x57, 0x65, 0x69, 0x62, 0x6f, 0x55, 0x73, 0x65, 0x72, 0x48, 0x01, 0x52, 0x0d, 0x77, 0x65, 0x69, 0x62, 0x6f, 0x55, 0x73, 0x65, 0x72, 0x49, 0x6e, 0x66, 0x6f, 0x12, 0x42, 0x0a, 0x10, 0x64, 0x6f, 0x75, 0x79, 0x69, 0x6e, 0x5f, 0x75, 0x73, 0x65, 0x72, 0x5f, 0x69, 0x6e, 0x66, 0x6f, 0x18, 0x04, 0x20, 0x01, 0x28, 0x0b, 0x32, 0x16, 0x2e, 0x6f, 0x6e, 0x65, 0x6f, 0x66, 0x5f, 0x74, 0x65, 0x73, 0x74, 0x2e, 0x44, 0x6f, 0x75, 0x79, 0x69, 0x6e, 0x55, 0x73, 0x65, 0x72, 0x48, 0x01, 0x52, 0x0e, 0x64, 0x6f, 0x75, 0x79, 0x69, 0x6e, 0x55, 0x73, 0x65, 0x72, 0x49, 0x6e, 0x66, 0x6f, 0x42, 0x0d, 0x0a, 0x0b, 0x75, 0x73, 0x65, 0x72, 0x5f, 0x73, 0x6f, 0x75, 0x72, 0x63, 0x65, 0x42, 0x0b, 0x0a, 0x09, 0x75, 0x73, 0x65, 0x72, 0x5f, 0x69, 0x6e, 0x66, 0x6f, 0x42, 0x09, 0x5a, 0x07, 0x2e, 0x3b, 0x6f, 0x6e, 0x65, 0x6f, 0x66, 0x62, 0x06, 0x70, 0x72, 0x6f, 0x74, 0x6f, 0x33, } var ( file_protoOneof_proto_rawDescOnce sync.Once file_protoOneof_proto_rawDescData = file_protoOneof_proto_rawDesc ) func file_protoOneof_proto_rawDescGZIP() []byte { file_protoOneof_proto_rawDescOnce.Do(func() { file_protoOneof_proto_rawDescData = protoimpl.X.CompressGZIP(file_protoOneof_proto_rawDescData) }) return file_protoOneof_proto_rawDescData } var file_protoOneof_proto_msgTypes = make([]protoimpl.MessageInfo, 3) var file_protoOneof_proto_goTypes = []interface{}{ (*WeiboUser)(nil), // 0: oneof_test.WeiboUser (*DouyinUser)(nil), // 1: oneof_test.DouyinUser (*User)(nil), // 2: oneof_test.User } var file_protoOneof_proto_depIdxs = []int32{ 0, // 0: oneof_test.User.weibo_user_info:type_name -\u003e oneof_test.WeiboUser 1, // 1: oneof_test.User.douyin_user_info:type_name -\u003e oneof_test.DouyinUser 2, // [2:2] is the sub-list for method output_type 2, // [2:2] is the sub-list for method input_type 2, // [2:2] is the sub-list for extension type_name 2, // [2:2] is the sub-list for extension extendee 0, // [0:2] is the sub-list for field type_name } func init() { file_protoOneof_proto_init() } func file_protoOneof_proto_init() { if File_protoOneof_proto != nil { return } if !protoimpl.UnsafeEnabled { file_protoOneof_proto_msgTypes[0].Exporter = func(v interface{}, i int) interface{} { switch v := v.(*WeiboUser); i { case 0: return \u0026v.state case 1: return \u0026v.sizeCache case 2: return \u0026v.unknownFields default: return nil } } file_protoOneof_proto_msgTypes[1].Exporter = func(v interface{}, i int) interface{} { switch v := v.(*DouyinUser); i { case 0: return \u0026v.state case 1: return \u0026v.sizeCache case 2: return \u0026v.unknownFields default: return nil } } file_protoOneof_proto_msgTypes[2].Exporter = func(v interface{}, i int) interface{} { switch v := v.(*User); i { case 0: return \u0026v.state case 1: return \u0026v.sizeCache case 2: return \u0026v.unknownFields default: return nil } } } file_protoOneof_proto_msgTypes[2].OneofWrappers = []interface{}{ (*User_WeiboUrl)(nil), (*User_DouyinUrl)(nil), (*User_WeiboUserInfo)(nil), (*User_DouyinUserInfo)(nil), } type x struct{} out := protoimpl.TypeBuilder{ File: protoimpl.DescBuilder{ GoPackagePath: reflect.TypeOf(x{}).PkgPath(), RawDescriptor: file_protoOneof_proto_rawDesc, NumEnums: 0, NumMessages: 3, NumExtensions: 0, NumServices: 0, }, GoTypes: file_protoOneof_proto_goTypes, DependencyIndexes: file_protoOneof_proto_depIdxs, MessageInfos: file_protoOneof_proto_msgTypes, }.Build() File_protoOneof_proto = out.File file_protoOneof_proto_rawDesc = nil file_protoOneof_proto_goTypes = nil file_protoOneof_proto_depIdxs = nil } æµ‹è¯•ä»£ç ï¼š\nuser := User{ UserSource: \u0026User_WeiboUrl{WeiboUrl: \"https://weibo.com\"}, UserInfo: \u0026User_WeiboUserInfo{ WeiboUserInfo: \u0026WeiboUser{ UserId: \"66666\", UserNick: \"czyt\", }, }, } // set user source will overwrite the value before user.UserSource = \u0026User_DouyinUrl{DouyinUrl: \"https://douyin.com\"} marshal, err := json.Marshal(user) if err != nil { log.Fatalln(err) } log.Println(string(marshal)) FieldMask ä½¿ç”¨FieldMask éœ€è¦å¼•ç”¨google/protobuf/field_mask.protoã€‚å‚è€ƒGoogleçš„æ–‡æ¡£ã€‚\nFieldMask æ˜¯ä¸€ä¸ª protobuf æ¶ˆæ¯ï¼ŒåŒ…å«ä¸€ä¸ªåä¸º paths çš„å­—æ®µï¼Œç”¨äºæŒ‡å®šç”¨äºæŒ‡å®šè¯»å–æ“ä½œè¿”å›æˆ–æ›´æ–°æ“ä½œä¿®æ”¹çš„å­—æ®µã€‚ç©ºçš„FieldMaské»˜è®¤åº”ç”¨åˆ°å…¨éƒ¨å­—æ®µã€‚\nmessage FieldMask { repeated string paths = 1; } ç¤ºä¾‹proto å®šä¹‰ä¸€ä¸ªproto\nimport \"google/protobuf/field_mask.proto\"; // æ›´æ–°ç”¨æˆ·è¯·æ±‚ message UpdateUserReq{ string id = 1; User payload = 2; optional google.protobuf.FieldMask update_mask = 3; } ç”Ÿæˆæ¶ˆæ¯ä½“\n// æ›´æ–°ç”¨æˆ·è¯·æ±‚ type UpdateUserReq struct { state protoimpl.MessageState sizeCache protoimpl.SizeCache unknownFields protoimpl.UnknownFields Id string `protobuf:\"bytes,1,opt,name=id,proto3\" json:\"id,omitempty\"` Payload *User `protobuf:\"bytes,2,opt,name=payload,proto3\" json:\"payload,omitempty\"` UpdateMask *fieldmaskpb.FieldMask `protobuf:\"bytes,3,opt,name=update_mask,json=updateMask,proto3,oneof\" json:\"update_mask,omitempty\"` } func (x *UpdateUserReq) Reset() { *x = UpdateUserReq{} if protoimpl.UnsafeEnabled { mi := \u0026file_v1_user_reqresp_proto_msgTypes[4] ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) ms.StoreMessageInfo(mi) } } func (x *UpdateUserReq) String() string { return protoimpl.X.MessageStringOf(x) } func (*UpdateUserReq) ProtoMessage() {} func (x *UpdateUserReq) ProtoReflect() protoreflect.Message { mi := \u0026file_v1_user_reqresp_proto_msgTypes[4] if protoimpl.UnsafeEnabled \u0026\u0026 x != nil { ms := protoimpl.X.MessageStateOf(protoimpl.Pointer(x)) if ms.LoadMessageInfo() == nil { ms.StoreMessageInfo(mi) } return ms } return mi.MessageOf(x) } // Deprecated: Use UpdateUserReq.ProtoReflect.Descriptor instead. func (*UpdateUserReq) Descriptor() ([]byte, []int) { return file_v1_user_reqresp_proto_rawDescGZIP(), []int{4} } func (x *UpdateUserReq) GetId() string { if x != nil { return x.Id } return \"\" } func (x *UpdateUserReq) GetPayload() *User { if x != nil { return x.Payload } return nil } func (x *UpdateUserReq) GetUpdateMask() *fieldmaskpb.FieldMask { if x != nil { return x.UpdateMask } return nil } ä½¿ç”¨\nfor _, v := range req.UpdateMask.GetPaths() { log.Info(\"v: \", v) } æ›´å¤šAPIï¼Œå‚è€ƒ https://pkg.go.dev/google.golang.org/protobuf/types/known/fieldmaskpb\nHttpä¸­ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹ å‚è€ƒ issueï¼šhttps://github.com/golang/protobuf/issues/1273\nField masks have special syntax in the JSON encoding: https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#json-encoding-of-field-masks\nThanks, it looks grammar has changed. In gateway(v1) can be used as flow: bug fix\n\"update_mask\": { \"paths\": [ \"hello\", \"world\" ] } ```bug fix but in gateway(v2) need to update the field format ```json \"update_mask\": \"hello,world\" Json Mapping protobuf 3 çš„int64``fixed64 uint64ç±»å‹åœ¨jsonåºåˆ—åŒ–æ—¶ä¼šè¢«è½¬æ¢ä¸ºstringã€‚ Proto3æ”¯æŒJSONä¸­çš„è§„èŒƒç¼–ç ï¼Œä»è€Œæ›´å®¹æ˜“åœ¨ç³»ç»Ÿä¹‹é—´å…±äº«æ•°æ®ã€‚åœ¨ä¸‹è¡¨ä¸­ä»¥ç±»å‹ä¸ºåŸºç¡€æè¿°ç¼–ç ã€‚å¦‚æœåœ¨JSONç¼–ç çš„æ•°æ®ä¸­ç¼ºå°‘ä¸€ä¸ªå€¼ï¼Œæˆ–è€…å…¶å€¼ä¸ºnullï¼Œåˆ™å°†å…¶è§£é‡Šä¸ºè§£æä¸ºåè®®ç¼“å†²åŒºçš„é€‚å½“é»˜è®¤å€¼ã€‚å¦‚æœä¸€ä¸ªå­—æ®µåœ¨åè®®ç¼“å†²åŒºä¸­å…·æœ‰é»˜è®¤å€¼ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹å°†åœ¨JSONç¼–ç çš„æ•°æ®ä¸­çœç•¥å®ƒä»¥èŠ‚çœç©ºé—´ã€‚å®ç°å¯ä»¥æä¾›åœ¨JSONç¼–ç è¾“å‡ºä¸­å‘å°„å…·æœ‰é»˜è®¤å€¼çš„å­—æ®µçš„é€‰é¡¹ã€‚\nproto3 JSON JSON example Notes message object {\"fooBar\": v, \"g\": null, â€¦} Generates JSON objects. Message field names are mapped to lowerCamelCase and become JSON object keys. If the json_name field option is specified, the specified value will be used as the key instead. Parsers accept both the lowerCamelCase name (or the one specified by the json_name option) and the original proto field name. null is an accepted value for all field types and treated as the default value of the corresponding field type. enum string \"FOO_BAR\" The name of the enum value as specified in proto is used. Parsers accept both enum names and integer values. map object {\"k\": v, â€¦} All keys are converted to strings. repeated V array [v, â€¦] null is accepted as the empty list []. bool true, false true, false string string \"Hello World!\" bytes base64 string \"YWJjMTIzIT8kKiYoKSctPUB+\" JSON value will be the data encoded as a string using standard base64 encoding with paddings. Either standard or URL-safe base64 encoding with/without paddings are accepted. int32, fixed32, uint32 number 1, -10, 0 JSON value will be a decimal number. Either numbers or strings are accepted. int64, fixed64, uint64 string \"1\", \"-10\" JSON value will be a decimal string. Either numbers or strings are accepted. float, double number 1.1, -10.0, 0, \"NaN\", \"Infinity\" JSON value will be a number or one of the special string values â€œNaNâ€, â€œInfinityâ€, and â€œ-Infinityâ€. Either numbers or strings are accepted. Exponent notation is also accepted. -0 is considered equivalent to 0. Any object {\"@type\": \"url\", \"f\": v, â€¦ } If the Any contains a value that has a special JSON mapping, it will be converted as follows: {\"@type\": xxx, \"value\": yyy}. Otherwise, the value will be converted into a JSON object, and the \"@type\" field will be inserted to indicate the actual data type. Timestamp string \"1972-01-01T10:00:20.021Z\" Uses RFC 3339, where generated output will always be Z-normalized and uses 0, 3, 6 or 9 fractional digits. Offsets other than â€œZâ€ are also accepted. Duration string \"1.000340012s\", \"1s\" Generated output always contains 0, 3, 6, or 9 fractional digits, depending on required precision, followed by the suffix â€œsâ€. Accepted are any fractional digits (also none) as long as they fit into nano-seconds precision and the suffix â€œsâ€ is required. Struct object { â€¦ } Any JSON object. See struct.proto. Wrapper types various types 2, \"2\", \"foo\", true, \"true\", null, 0, â€¦ Wrappers use the same representation in JSON as the wrapped primitive type, except that null is allowed and preserved during data conversion and transfer. FieldMask string \"f.fooBar,h\" See field_mask.proto. ListValue array [foo, bar, â€¦] Value value Any JSON value. Check google.protobuf.Value for details. NullValue null JSON null Empty object {} An empty JSON object å‚è€ƒ https://developers.google.com/protocol-buffers/docs/proto3#json\nprotobuf è‡ªå®šä¹‰Goå­—æ®µçš„json Tag å®˜æ–¹æ–‡æ¡£ è¯´æ˜\nA proto3 JSON implementation may provide the following options:\nEmit fields with default values: Fields with default values are omitted by default in proto3 JSON output. An implementation may provide an option to override this behavior and output fields with their default values. Ignore unknown fields: Proto3 JSON parser should reject unknown fields by default but may provide an option to ignore unknown fields in parsing. Use proto field name instead of lowerCamelCase name: By default proto3 JSON printer should convert the field name to lowerCamelCase and use that as the JSON name. An implementation may provide an option to use proto field name as the JSON name instead. Proto3 JSON parsers are required to accept both the converted lowerCamelCase name and the proto field name. Emit enum values as integers instead of strings: The name of an enum value is used by default in JSON output. An option may be provided to use the numeric value of the enum value instead. proto\nmessage Blog { int64 id = 1 [json_name = \"uid\"]; string titleName = 2; string author_name = 3[json_name = \"author_name\"]; string img = 4; int64 CountNum = 5; } ç”Ÿæˆgoæ–‡ä»¶\ntype Blog struct { state protoimpl.MessageState sizeCache protoimpl.SizeCache unknownFields protoimpl.UnknownFields Id int64 `protobuf:\"varint,1,opt,name=id,json=uid,proto3\" json:\"id,omitempty\"` TitleName string `protobuf:\"bytes,2,opt,name=titleName,proto3\" json:\"titleName,omitempty\"` AuthorName string `protobuf:\"bytes,3,opt,name=author_name,json=author_name,proto3\" json:\"author_name,omitempty\"` Img string `protobuf:\"bytes,4,opt,name=img,proto3\" json:\"img,omitempty\"` CountNum int64 `protobuf:\"varint,5,opt,name=CountNum,proto3\" json:\"CountNum,omitempty\"` } golandçš„å®æ—¶æ¨¡æ¿å¦‚ä¸‹,æ–¹ä¾¿å¿«é€Ÿä½¿ç”¨\n[json_name = \"$FIELD_NAME$\"$END$] è®¾ç½®å‚è€ƒä¸‹å›¾ å‚è€ƒ protocol bufferså®˜æ–¹æ–‡æ¡£ https://github.com/mennanov/fieldmask-utils Netflixå®ç”¨APIè®¾è®¡ï¼šProtobuf FieldMaskå®è·µ part1 part2 go-kratos HTTPæ–¹æ³•æ”¯æŒä»¥åŠFieldMaskçš„ä½¿ç”¨ç®€ä»‹ Protobuf and Go: Handling Oneof Field type google api design: update protobufä¸­ä½¿ç”¨oneofã€WrapValueå’ŒFieldMask Protocol Buffers V3ä¸­æ–‡è¯­æ³•æŒ‡å— ",
  "wordCount" : "2410",
  "inLanguage": "en",
  "datePublished": "2022-07-25T00:00:00Z",
  "dateModified": "2022-07-25T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "czyt"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://czyt.tech/post/protobuf-golang-litle-notes/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "è™«å­æ¨±æ¡ƒ",
    "logo": {
      "@type": "ImageObject",
      "url": "https://czyt.tech/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://czyt.tech/" accesskey="h" title="è™«å­æ¨±æ¡ƒ (Alt + H)">è™«å­æ¨±æ¡ƒ</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://czyt.tech/" title="ğŸ Home">
                    <span>ğŸ Home</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/about/" title="ğŸ™‹About">
                    <span>ğŸ™‹About</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/post/" title="ğŸ“šPosts">
                    <span>ğŸ“šPosts</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/search/" title="ğŸ”Search">
                    <span>ğŸ”Search</span>
                </a>
            </li>
            <li>
                <a href="https://czyt.tech/tags/" title="ğŸ”–Tags">
                    <span>ğŸ”–Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://czyt.tech/">Home</a>&nbsp;Â»&nbsp;<a href="https://czyt.tech/post/">Posts</a></div>
    <h1 class="post-title">
      Protobuf golangå°æœ­
    </h1>
    <div class="post-meta"><span title='2022-07-25 00:00:00 +0000 UTC'>July 25, 2022</span>&nbsp;Â·&nbsp;12 min&nbsp;Â·&nbsp;czyt

</div>
  </header> <div class="toc side right">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#oneof" aria-label="Oneof">Oneof</a><ul>
                        
                <li>
                    <a href="#%e7%a4%ba%e4%be%8bproto" aria-label="ç¤ºä¾‹proto">ç¤ºä¾‹proto</a></li></ul>
                </li>
                <li>
                    <a href="#fieldmask" aria-label="FieldMask">FieldMask</a><ul>
                        
                <li>
                    <a href="#%e7%a4%ba%e4%be%8bproto-1" aria-label="ç¤ºä¾‹proto">ç¤ºä¾‹proto</a></li>
                <li>
                    <a href="#http%e4%b8%ad%e4%bd%bf%e7%94%a8%e7%9a%84%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" aria-label="Httpä¸­ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹">Httpä¸­ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹</a></li>
                <li>
                    <a href="#json-mapping" aria-label="Json Mapping">Json Mapping</a></li></ul>
                </li>
                <li>
                    <a href="#protobuf-%e8%87%aa%e5%ae%9a%e4%b9%89go%e5%ad%97%e6%ae%b5%e7%9a%84json-tag" aria-label="protobuf è‡ªå®šä¹‰Goå­—æ®µçš„json Tag">protobuf è‡ªå®šä¹‰Goå­—æ®µçš„json Tag</a></li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83" aria-label="å‚è€ƒ">å‚è€ƒ</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="oneof">Oneof<a hidden class="anchor" aria-hidden="true" href="#oneof">#</a></h2>
<blockquote>
<p>å¦‚æœæ‚¨æœ‰è®¸å¤šå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨OneofåŠŸèƒ½æ¥æ‰§è¡Œæ­¤è¡Œä¸ºå¹¶ä¿å­˜å†…å­˜ã€‚ä¸€ä¸ªå­—æ®µå°±åƒå¸¸è§„å­—æ®µä¸€æ ·ï¼Œé™¤äº†å•ä¸€å…±äº«å†…å­˜ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œæœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µã€‚è®¾ç½®Oneofçš„ä»»ä½•æˆå‘˜éƒ½ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰å…¶ä»–æˆå‘˜ã€‚</p>
<p>â€‹																															<a href="https://developers.google.com/protocol-buffers/docs/proto3?hl=en#oneof">Google protobuf æ–‡æ¡£#Oneof</a></p>
</blockquote>
<h3 id="ç¤ºä¾‹proto">ç¤ºä¾‹proto<a hidden class="anchor" aria-hidden="true" href="#ç¤ºä¾‹proto">#</a></h3>
<p>åˆ›å»º<code>protoOneof.proto</code> çš„protoæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-protobuf" data-lang="protobuf"><span style="display:flex;"><span>syntax <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;proto3&#34;</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#f92672">package</span> oneof_test;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">option</span> go_package <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;.;oneof&#39;</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">WeiboUser</span>{<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> user_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> user_nick <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">DouyinUser</span>{<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> auth_token <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> nick_name <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">User</span>{<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">oneof</span> user_source{<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> weibo_url <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> douyin_url <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  }<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">oneof</span> user_info{<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    WeiboUser weibo_user_info <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>    DouyinUser douyin_user_info <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  }<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>ä½¿ç”¨å‘½ä»¤ç”Ÿæˆgoä»£ç </p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>protoc --proto_path<span style="color:#f92672">=</span>. --go_out<span style="color:#f92672">=</span>paths<span style="color:#f92672">=</span>source_relative:./oneof ./protoOneof.proto
</span></span></code></pre></div><p>ç”Ÿæˆçš„<code>protoOneof.pb.go</code>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Code generated by protoc-gen-go. DO NOT EDIT.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// versions:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 	protoc-gen-go v1.28.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 	protoc        v3.21.3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// source: protoOneof.proto
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">oneof</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">protoreflect</span> <span style="color:#e6db74">&#34;google.golang.org/protobuf/reflect/protoreflect&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">protoimpl</span> <span style="color:#e6db74">&#34;google.golang.org/protobuf/runtime/protoimpl&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">reflect</span> <span style="color:#e6db74">&#34;reflect&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">sync</span> <span style="color:#e6db74">&#34;sync&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Verify that this generated code is sufficiently up-to-date.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">EnforceVersion</span>(<span style="color:#ae81ff">20</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MinVersion</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Verify that runtime/protoimpl is sufficiently up-to-date.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">EnforceVersion</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MaxVersion</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">WeiboUser</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">state</span>         <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MessageState</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">sizeCache</span>     <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">SizeCache</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">unknownFields</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnknownFields</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">UserId</span>   <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,1,opt,name=user_id,json=userId,proto3&#34; json:&#34;user_id,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">UserNick</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,2,opt,name=user_nick,json=userNick,proto3&#34; json:&#34;user_nick,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>) <span style="color:#a6e22e">Reset</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">*</span><span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">WeiboUser</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStringOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>) <span style="color:#a6e22e">ProtoMessage</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>) <span style="color:#a6e22e">ProtoReflect</span>() <span style="color:#a6e22e">protoreflect</span>.<span style="color:#a6e22e">Message</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">LoadMessageInfo</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ms</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">mi</span>.<span style="color:#a6e22e">MessageOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Deprecated: Use WeiboUser.ProtoReflect.Descriptor instead.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>) <span style="color:#a6e22e">Descriptor</span>() ([]<span style="color:#66d9ef">byte</span>, []<span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">file_protoOneof_proto_rawDescGZIP</span>(), []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">0</span>}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>) <span style="color:#a6e22e">GetUserId</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">UserId</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>) <span style="color:#a6e22e">GetUserNick</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">UserNick</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">DouyinUser</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">state</span>         <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MessageState</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">sizeCache</span>     <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">SizeCache</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">unknownFields</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnknownFields</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">AuthToken</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,1,opt,name=auth_token,json=authToken,proto3&#34; json:&#34;auth_token,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">NickName</span>  <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,2,opt,name=nick_name,json=nickName,proto3&#34; json:&#34;nick_name,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>) <span style="color:#a6e22e">Reset</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">*</span><span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">DouyinUser</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStringOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>) <span style="color:#a6e22e">ProtoMessage</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>) <span style="color:#a6e22e">ProtoReflect</span>() <span style="color:#a6e22e">protoreflect</span>.<span style="color:#a6e22e">Message</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">LoadMessageInfo</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ms</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">mi</span>.<span style="color:#a6e22e">MessageOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Deprecated: Use DouyinUser.ProtoReflect.Descriptor instead.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>) <span style="color:#a6e22e">Descriptor</span>() ([]<span style="color:#66d9ef">byte</span>, []<span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">file_protoOneof_proto_rawDescGZIP</span>(), []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>) <span style="color:#a6e22e">GetAuthToken</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">AuthToken</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>) <span style="color:#a6e22e">GetNickName</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">NickName</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">User</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">state</span>         <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MessageState</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">sizeCache</span>     <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">SizeCache</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">unknownFields</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnknownFields</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Types that are assignable to UserSource:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//	*User_WeiboUrl
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//	*User_DouyinUrl
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">UserSource</span> <span style="color:#a6e22e">isUser_UserSource</span> <span style="color:#e6db74">`protobuf_oneof:&#34;user_source&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Types that are assignable to UserInfo:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//	*User_WeiboUserInfo
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//	*User_DouyinUserInfo
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">UserInfo</span> <span style="color:#a6e22e">isUser_UserInfo</span> <span style="color:#e6db74">`protobuf_oneof:&#34;user_info&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">Reset</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">*</span><span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">User</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStringOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">ProtoMessage</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">ProtoReflect</span>() <span style="color:#a6e22e">protoreflect</span>.<span style="color:#a6e22e">Message</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">LoadMessageInfo</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ms</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">mi</span>.<span style="color:#a6e22e">MessageOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Deprecated: Use User.ProtoReflect.Descriptor instead.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">Descriptor</span>() ([]<span style="color:#66d9ef">byte</span>, []<span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">file_protoOneof_proto_rawDescGZIP</span>(), []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">2</span>}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">GetUserSource</span>() <span style="color:#a6e22e">isUser_UserSource</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">m</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">UserSource</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">GetWeiboUrl</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">GetUserSource</span>().(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_WeiboUrl</span>); <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">WeiboUrl</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">GetDouyinUrl</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">GetUserSource</span>().(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_DouyinUrl</span>); <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">DouyinUrl</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">GetUserInfo</span>() <span style="color:#a6e22e">isUser_UserInfo</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">m</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">UserInfo</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">GetWeiboUserInfo</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">GetUserInfo</span>().(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_WeiboUserInfo</span>); <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">WeiboUserInfo</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>) <span style="color:#a6e22e">GetDouyinUserInfo</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">GetUserInfo</span>().(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_DouyinUserInfo</span>); <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">DouyinUserInfo</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">isUser_UserSource</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">isUser_UserSource</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">User_WeiboUrl</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">WeiboUrl</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,1,opt,name=weibo_url,json=weiboUrl,proto3,oneof&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">User_DouyinUrl</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">DouyinUrl</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,2,opt,name=douyin_url,json=douyinUrl,proto3,oneof&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">User_WeiboUrl</span>) <span style="color:#a6e22e">isUser_UserSource</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">User_DouyinUrl</span>) <span style="color:#a6e22e">isUser_UserSource</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">isUser_UserInfo</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">isUser_UserInfo</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">User_WeiboUserInfo</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">WeiboUserInfo</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span> <span style="color:#e6db74">`protobuf:&#34;bytes,3,opt,name=weibo_user_info,json=weiboUserInfo,proto3,oneof&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">User_DouyinUserInfo</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">DouyinUserInfo</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span> <span style="color:#e6db74">`protobuf:&#34;bytes,4,opt,name=douyin_user_info,json=douyinUserInfo,proto3,oneof&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">User_WeiboUserInfo</span>) <span style="color:#a6e22e">isUser_UserInfo</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">User_DouyinUserInfo</span>) <span style="color:#a6e22e">isUser_UserInfo</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">File_protoOneof_proto</span> <span style="color:#a6e22e">protoreflect</span>.<span style="color:#a6e22e">FileDescriptor</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">file_protoOneof_proto_rawDesc</span> = []<span style="color:#66d9ef">byte</span>{
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x10</span>, <span style="color:#ae81ff">0x70</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x4f</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x2e</span>, <span style="color:#ae81ff">0x70</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x6f</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x22</span>, <span style="color:#ae81ff">0x41</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x57</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x62</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x17</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x07</span>, <span style="color:#ae81ff">0x75</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x64</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x20</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x06</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x73</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x49</span>, <span style="color:#ae81ff">0x64</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x1b</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x63</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x6b</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x02</span>, <span style="color:#ae81ff">0x20</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x08</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x4e</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x63</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x6b</span>, <span style="color:#ae81ff">0x22</span>, <span style="color:#ae81ff">0x48</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x44</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x79</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x12</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x1d</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x61</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x68</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x6b</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x20</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x61</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x68</span>, <span style="color:#ae81ff">0x54</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x6b</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x1b</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x63</span>, <span style="color:#ae81ff">0x6b</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x61</span>, <span style="color:#ae81ff">0x6d</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x02</span>, <span style="color:#ae81ff">0x20</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x08</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x63</span>, <span style="color:#ae81ff">0x6b</span>, <span style="color:#ae81ff">0x4e</span>, <span style="color:#ae81ff">0x61</span>, <span style="color:#ae81ff">0x6d</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x22</span>, <span style="color:#ae81ff">0xe7</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x04</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x1d</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x77</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x62</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x72</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x6c</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x20</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x48</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x08</span>, <span style="color:#ae81ff">0x77</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x62</span>, <span style="color:#ae81ff">0x6f</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x6c</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x1f</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x64</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x79</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x72</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x6c</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x02</span>, <span style="color:#ae81ff">0x20</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x48</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x64</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x79</span>, <span style="color:#ae81ff">0x69</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x6c</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x3f</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x0f</span>, <span style="color:#ae81ff">0x77</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x62</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x73</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x03</span>, <span style="color:#ae81ff">0x20</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>, <span style="color:#ae81ff">0x0b</span>, <span style="color:#ae81ff">0x32</span>, <span style="color:#ae81ff">0x15</span>, <span style="color:#ae81ff">0x2e</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x2e</span>, <span style="color:#ae81ff">0x57</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x62</span>, <span style="color:#ae81ff">0x6f</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x48</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x0d</span>, <span style="color:#ae81ff">0x77</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x62</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x49</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x12</span>, <span style="color:#ae81ff">0x42</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x10</span>, <span style="color:#ae81ff">0x64</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x79</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x5f</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x18</span>, <span style="color:#ae81ff">0x04</span>, <span style="color:#ae81ff">0x20</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x28</span>, <span style="color:#ae81ff">0x0b</span>, <span style="color:#ae81ff">0x32</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x16</span>, <span style="color:#ae81ff">0x2e</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x2e</span>, <span style="color:#ae81ff">0x44</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x75</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x79</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x48</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x52</span>, <span style="color:#ae81ff">0x0e</span>, <span style="color:#ae81ff">0x64</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x79</span>, <span style="color:#ae81ff">0x69</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x55</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x49</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x42</span>, <span style="color:#ae81ff">0x0d</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x0b</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x63</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x42</span>, <span style="color:#ae81ff">0x0b</span>, <span style="color:#ae81ff">0x0a</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x75</span>, <span style="color:#ae81ff">0x73</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x72</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x5f</span>, <span style="color:#ae81ff">0x69</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x66</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x42</span>, <span style="color:#ae81ff">0x09</span>, <span style="color:#ae81ff">0x5a</span>, <span style="color:#ae81ff">0x07</span>, <span style="color:#ae81ff">0x2e</span>, <span style="color:#ae81ff">0x3b</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x6e</span>, <span style="color:#ae81ff">0x65</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x66</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0x62</span>, <span style="color:#ae81ff">0x06</span>, <span style="color:#ae81ff">0x70</span>, <span style="color:#ae81ff">0x72</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x74</span>, <span style="color:#ae81ff">0x6f</span>, <span style="color:#ae81ff">0x33</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">file_protoOneof_proto_rawDescOnce</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Once</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">file_protoOneof_proto_rawDescData</span> = <span style="color:#a6e22e">file_protoOneof_proto_rawDesc</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">file_protoOneof_proto_rawDescGZIP</span>() []<span style="color:#66d9ef">byte</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">file_protoOneof_proto_rawDescOnce</span>.<span style="color:#a6e22e">Do</span>(<span style="color:#66d9ef">func</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">file_protoOneof_proto_rawDescData</span> = <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">CompressGZIP</span>(<span style="color:#a6e22e">file_protoOneof_proto_rawDescData</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">file_protoOneof_proto_rawDescData</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span> = make([]<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MessageInfo</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">file_protoOneof_proto_goTypes</span> = []<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>	(<span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>)(<span style="color:#66d9ef">nil</span>),  <span style="color:#75715e">// 0: oneof_test.WeiboUser
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	(<span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>)(<span style="color:#66d9ef">nil</span>), <span style="color:#75715e">// 1: oneof_test.DouyinUser
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	(<span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>)(<span style="color:#66d9ef">nil</span>),       <span style="color:#75715e">// 2: oneof_test.User
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">file_protoOneof_proto_depIdxs</span> = []<span style="color:#66d9ef">int32</span>{
</span></span><span style="display:flex;"><span>	<span style="color:#ae81ff">0</span>, <span style="color:#75715e">// 0: oneof_test.User.weibo_user_info:type_name -&gt; oneof_test.WeiboUser
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#ae81ff">1</span>, <span style="color:#75715e">// 1: oneof_test.User.douyin_user_info:type_name -&gt; oneof_test.DouyinUser
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#ae81ff">2</span>, <span style="color:#75715e">// [2:2] is the sub-list for method output_type
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#ae81ff">2</span>, <span style="color:#75715e">// [2:2] is the sub-list for method input_type
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#ae81ff">2</span>, <span style="color:#75715e">// [2:2] is the sub-list for extension type_name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#ae81ff">2</span>, <span style="color:#75715e">// [2:2] is the sub-list for extension extendee
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#ae81ff">0</span>, <span style="color:#75715e">// [0:2] is the sub-list for field type_name
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() { <span style="color:#a6e22e">file_protoOneof_proto_init</span>() }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">file_protoOneof_proto_init</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">File_protoOneof_proto</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">Exporter</span> = <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">interface</span>{}, <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">interface</span>{} {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span>.(<span style="color:#f92672">*</span><span style="color:#a6e22e">WeiboUser</span>); <span style="color:#a6e22e">i</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">sizeCache</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">unknownFields</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Exporter</span> = <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">interface</span>{}, <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">interface</span>{} {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span>.(<span style="color:#f92672">*</span><span style="color:#a6e22e">DouyinUser</span>); <span style="color:#a6e22e">i</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">sizeCache</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">unknownFields</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">2</span>].<span style="color:#a6e22e">Exporter</span> = <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">interface</span>{}, <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">interface</span>{} {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span>.(<span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>); <span style="color:#a6e22e">i</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">sizeCache</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">unknownFields</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>[<span style="color:#ae81ff">2</span>].<span style="color:#a6e22e">OneofWrappers</span> = []<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>		(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_WeiboUrl</span>)(<span style="color:#66d9ef">nil</span>),
</span></span><span style="display:flex;"><span>		(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_DouyinUrl</span>)(<span style="color:#66d9ef">nil</span>),
</span></span><span style="display:flex;"><span>		(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_WeiboUserInfo</span>)(<span style="color:#66d9ef">nil</span>),
</span></span><span style="display:flex;"><span>		(<span style="color:#f92672">*</span><span style="color:#a6e22e">User_DouyinUserInfo</span>)(<span style="color:#66d9ef">nil</span>),
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">x</span> <span style="color:#66d9ef">struct</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">TypeBuilder</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">File</span>: <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">DescBuilder</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">GoPackagePath</span>: <span style="color:#a6e22e">reflect</span>.<span style="color:#a6e22e">TypeOf</span>(<span style="color:#a6e22e">x</span>{}).<span style="color:#a6e22e">PkgPath</span>(),
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">RawDescriptor</span>: <span style="color:#a6e22e">file_protoOneof_proto_rawDesc</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">NumEnums</span>:      <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">NumMessages</span>:   <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">NumExtensions</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">NumServices</span>:   <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">GoTypes</span>:           <span style="color:#a6e22e">file_protoOneof_proto_goTypes</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">DependencyIndexes</span>: <span style="color:#a6e22e">file_protoOneof_proto_depIdxs</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">MessageInfos</span>:      <span style="color:#a6e22e">file_protoOneof_proto_msgTypes</span>,
</span></span><span style="display:flex;"><span>	}.<span style="color:#a6e22e">Build</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">File_protoOneof_proto</span> = <span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">File</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">file_protoOneof_proto_rawDesc</span> = <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">file_protoOneof_proto_goTypes</span> = <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">file_protoOneof_proto_depIdxs</span> = <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æµ‹è¯•ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">user</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">User</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">UserSource</span>: <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">User_WeiboUrl</span>{<span style="color:#a6e22e">WeiboUrl</span>: <span style="color:#e6db74">&#34;https://weibo.com&#34;</span>},
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">UserInfo</span>: <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">User_WeiboUserInfo</span>{
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">WeiboUserInfo</span>: <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">WeiboUser</span>{
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">UserId</span>:   <span style="color:#e6db74">&#34;66666&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">UserNick</span>: <span style="color:#e6db74">&#34;czyt&#34;</span>,
</span></span><span style="display:flex;"><span>			},
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// set user source will overwrite the value before
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">UserSource</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">User_DouyinUrl</span>{<span style="color:#a6e22e">DouyinUrl</span>: <span style="color:#e6db74">&#34;https://douyin.com&#34;</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">marshal</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#a6e22e">user</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalln</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(string(<span style="color:#a6e22e">marshal</span>))
</span></span></code></pre></div><h2 id="fieldmask">FieldMask<a hidden class="anchor" aria-hidden="true" href="#fieldmask">#</a></h2>
<p>ä½¿ç”¨FieldMask éœ€è¦å¼•ç”¨<code>google/protobuf/field_mask.proto</code>ã€‚å‚è€ƒ<a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf?hl=zh-cn#fieldmask">Googleçš„æ–‡æ¡£</a>ã€‚</p>
<blockquote>
<p>FieldMask æ˜¯ä¸€ä¸ª protobuf æ¶ˆæ¯ï¼ŒåŒ…å«ä¸€ä¸ªåä¸º paths çš„å­—æ®µï¼Œç”¨äºæŒ‡å®šç”¨äºæŒ‡å®šè¯»å–æ“ä½œè¿”å›æˆ–æ›´æ–°æ“ä½œä¿®æ”¹çš„å­—æ®µã€‚ç©ºçš„FieldMaské»˜è®¤åº”ç”¨åˆ°å…¨éƒ¨å­—æ®µã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-protobuf" data-lang="protobuf"><span style="display:flex;"><span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">FieldMask</span> {<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">repeated</span> <span style="color:#66d9ef">string</span> paths <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div></blockquote>
<h3 id="ç¤ºä¾‹proto-1">ç¤ºä¾‹proto<a hidden class="anchor" aria-hidden="true" href="#ç¤ºä¾‹proto-1">#</a></h3>
<p>å®šä¹‰ä¸€ä¸ªproto</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-protobuf" data-lang="protobuf"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#34;google/protobuf/field_mask.proto&#34;</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">// æ›´æ–°ç”¨æˆ·è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">UpdateUserReq</span>{<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  User payload <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">optional</span> google.protobuf.FieldMask update_mask <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>ç”Ÿæˆæ¶ˆæ¯ä½“</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// æ›´æ–°ç”¨æˆ·è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">UpdateUserReq</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">state</span>         <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MessageState</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">sizeCache</span>     <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">SizeCache</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">unknownFields</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnknownFields</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Id</span>         <span style="color:#66d9ef">string</span>                 <span style="color:#e6db74">`protobuf:&#34;bytes,1,opt,name=id,proto3&#34; json:&#34;id,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Payload</span>    <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span>                  <span style="color:#e6db74">`protobuf:&#34;bytes,2,opt,name=payload,proto3&#34; json:&#34;payload,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">UpdateMask</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">fieldmaskpb</span>.<span style="color:#a6e22e">FieldMask</span> <span style="color:#e6db74">`protobuf:&#34;bytes,3,opt,name=update_mask,json=updateMask,proto3,oneof&#34; json:&#34;update_mask,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">Reset</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">*</span><span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">UpdateUserReq</span>{}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_v1_user_reqresp_proto_msgTypes</span>[<span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStringOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">ProtoMessage</span>() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">ProtoReflect</span>() <span style="color:#a6e22e">protoreflect</span>.<span style="color:#a6e22e">Message</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">mi</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">file_v1_user_reqresp_proto_msgTypes</span>[<span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnsafeEnabled</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">X</span>.<span style="color:#a6e22e">MessageStateOf</span>(<span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">Pointer</span>(<span style="color:#a6e22e">x</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">LoadMessageInfo</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">ms</span>.<span style="color:#a6e22e">StoreMessageInfo</span>(<span style="color:#a6e22e">mi</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ms</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">mi</span>.<span style="color:#a6e22e">MessageOf</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Deprecated: Use UpdateUserReq.ProtoReflect.Descriptor instead.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">Descriptor</span>() ([]<span style="color:#66d9ef">byte</span>, []<span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">file_v1_user_reqresp_proto_rawDescGZIP</span>(), []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">4</span>}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">GetId</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">Id</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">GetPayload</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">User</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">Payload</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">UpdateUserReq</span>) <span style="color:#a6e22e">GetUpdateMask</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">fieldmaskpb</span>.<span style="color:#a6e22e">FieldMask</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">UpdateMask</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä½¿ç”¨</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">UpdateMask</span>.<span style="color:#a6e22e">GetPaths</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Info</span>(<span style="color:#e6db74">&#34;v: &#34;</span>, <span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><p>æ›´å¤šAPIï¼Œå‚è€ƒ <a href="https://pkg.go.dev/google.golang.org/protobuf/types/known/fieldmaskpb">https://pkg.go.dev/google.golang.org/protobuf/types/known/fieldmaskpb</a></p>
<h3 id="httpä¸­ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹">Httpä¸­ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹<a hidden class="anchor" aria-hidden="true" href="#httpä¸­ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹">#</a></h3>
<p>å‚è€ƒ issueï¼šhttps://github.com/golang/protobuf/issues/1273</p>
<blockquote>
<p>Field masks have special syntax in the JSON encoding:
<a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#json-encoding-of-field-masks">https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#json-encoding-of-field-masks</a></p>
</blockquote>
<p>Thanks, it looks grammar has changed. In gateway(v1) can be used as flow:
bug fix</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;update_mask&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;paths&#34;</span>: [
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;hello&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;world&#34;</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">```bug</span> <span style="color:#960050;background-color:#1e0010">fix</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">but</span> <span style="color:#960050;background-color:#1e0010">in</span> <span style="color:#960050;background-color:#1e0010">gateway(v</span><span style="color:#ae81ff">2</span><span style="color:#960050;background-color:#1e0010">)</span> <span style="color:#960050;background-color:#1e0010">need</span> <span style="color:#960050;background-color:#1e0010">to</span> <span style="color:#960050;background-color:#1e0010">update</span> <span style="color:#960050;background-color:#1e0010">the</span> <span style="color:#960050;background-color:#1e0010">field</span> <span style="color:#960050;background-color:#1e0010">format</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">```json</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;update_mask&#34;</span><span style="color:#960050;background-color:#1e0010">:</span>  <span style="color:#e6db74">&#34;hello,world&#34;</span>
</span></span></code></pre></div><h3 id="json-mapping">Json Mapping<a hidden class="anchor" aria-hidden="true" href="#json-mapping">#</a></h3>
<p>protobuf 3 çš„<code>int64``fixed64</code> <code>uint64</code>ç±»å‹åœ¨jsonåºåˆ—åŒ–æ—¶ä¼šè¢«è½¬æ¢ä¸ºstringã€‚
Proto3æ”¯æŒJSONä¸­çš„è§„èŒƒç¼–ç ï¼Œä»è€Œæ›´å®¹æ˜“åœ¨ç³»ç»Ÿä¹‹é—´å…±äº«æ•°æ®ã€‚åœ¨ä¸‹è¡¨ä¸­ä»¥ç±»å‹ä¸ºåŸºç¡€æè¿°ç¼–ç ã€‚å¦‚æœåœ¨JSONç¼–ç çš„æ•°æ®ä¸­ç¼ºå°‘ä¸€ä¸ªå€¼ï¼Œæˆ–è€…å…¶å€¼ä¸ºnullï¼Œåˆ™å°†å…¶è§£é‡Šä¸ºè§£æä¸ºåè®®ç¼“å†²åŒºçš„é€‚å½“é»˜è®¤å€¼ã€‚å¦‚æœä¸€ä¸ªå­—æ®µåœ¨åè®®ç¼“å†²åŒºä¸­å…·æœ‰é»˜è®¤å€¼ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹å°†åœ¨JSONç¼–ç çš„æ•°æ®ä¸­çœç•¥å®ƒä»¥èŠ‚çœç©ºé—´ã€‚å®ç°å¯ä»¥æä¾›åœ¨JSONç¼–ç è¾“å‡ºä¸­å‘å°„å…·æœ‰é»˜è®¤å€¼çš„å­—æ®µçš„é€‰é¡¹ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">proto3</th>
<th style="text-align:left">JSON</th>
<th style="text-align:left">JSON example</th>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">message</td>
<td style="text-align:left">object</td>
<td style="text-align:left"><code>{&quot;fooBar&quot;: v, &quot;g&quot;: null, â€¦}</code></td>
<td style="text-align:left">Generates JSON objects. Message field names are mapped to lowerCamelCase and become JSON object keys. If the <code>json_name</code> field option is specified, the specified value will be used as the key instead. Parsers accept both the lowerCamelCase name (or the one specified by the <code>json_name</code> option) and the original proto field name. <code>null</code> is an accepted value for all field types and treated as the default value of the corresponding field type.</td>
</tr>
<tr>
<td style="text-align:left">enum</td>
<td style="text-align:left">string</td>
<td style="text-align:left"><code>&quot;FOO_BAR&quot;</code></td>
<td style="text-align:left">The name of the enum value as specified in proto is used. Parsers accept both enum names and integer values.</td>
</tr>
<tr>
<td style="text-align:left">map&lt;K,V&gt;</td>
<td style="text-align:left">object</td>
<td style="text-align:left"><code>{&quot;k&quot;: v, â€¦}</code></td>
<td style="text-align:left">All keys are converted to strings.</td>
</tr>
<tr>
<td style="text-align:left">repeated V</td>
<td style="text-align:left">array</td>
<td style="text-align:left"><code>[v, â€¦]</code></td>
<td style="text-align:left"><code>null</code> is accepted as the empty list <code>[]</code>.</td>
</tr>
<tr>
<td style="text-align:left">bool</td>
<td style="text-align:left">true, false</td>
<td style="text-align:left"><code>true, false</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">string</td>
<td style="text-align:left">string</td>
<td style="text-align:left"><code>&quot;Hello World!&quot;</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">bytes</td>
<td style="text-align:left">base64 string</td>
<td style="text-align:left"><code>&quot;YWJjMTIzIT8kKiYoKSctPUB+&quot;</code></td>
<td style="text-align:left">JSON value will be the data encoded as a string using standard base64 encoding with paddings. Either standard or URL-safe base64 encoding with/without paddings are accepted.</td>
</tr>
<tr>
<td style="text-align:left">int32, fixed32, uint32</td>
<td style="text-align:left">number</td>
<td style="text-align:left"><code>1, -10, 0</code></td>
<td style="text-align:left">JSON value will be a decimal number. Either numbers or strings are accepted.</td>
</tr>
<tr>
<td style="text-align:left">int64, fixed64, uint64</td>
<td style="text-align:left">string</td>
<td style="text-align:left"><code>&quot;1&quot;, &quot;-10&quot;</code></td>
<td style="text-align:left">JSON value will be a decimal string. Either numbers or strings are accepted.</td>
</tr>
<tr>
<td style="text-align:left">float, double</td>
<td style="text-align:left">number</td>
<td style="text-align:left"><code>1.1, -10.0, 0, &quot;NaN&quot;, &quot;Infinity&quot;</code></td>
<td style="text-align:left">JSON value will be a number or one of the special string values &ldquo;NaN&rdquo;, &ldquo;Infinity&rdquo;, and &ldquo;-Infinity&rdquo;. Either numbers or strings are accepted. Exponent notation is also accepted. -0 is considered equivalent to 0.</td>
</tr>
<tr>
<td style="text-align:left">Any</td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left"><code>{&quot;@type&quot;: &quot;url&quot;, &quot;f&quot;: v, â€¦ }</code></td>
<td style="text-align:left">If the <code>Any</code> contains a value that has a special JSON mapping, it will be converted as follows: <code>{&quot;@type&quot;: xxx, &quot;value&quot;: yyy}</code>. Otherwise, the value will be converted into a JSON object, and the <code>&quot;@type&quot;</code> field will be inserted to indicate the actual data type.</td>
</tr>
<tr>
<td style="text-align:left">Timestamp</td>
<td style="text-align:left">string</td>
<td style="text-align:left"><code>&quot;1972-01-01T10:00:20.021Z&quot;</code></td>
<td style="text-align:left">Uses RFC 3339, where generated output will always be Z-normalized and uses 0, 3, 6 or 9 fractional digits. Offsets other than &ldquo;Z&rdquo; are also accepted.</td>
</tr>
<tr>
<td style="text-align:left">Duration</td>
<td style="text-align:left">string</td>
<td style="text-align:left"><code>&quot;1.000340012s&quot;, &quot;1s&quot;</code></td>
<td style="text-align:left">Generated output always contains 0, 3, 6, or 9 fractional digits, depending on required precision, followed by the suffix &ldquo;s&rdquo;. Accepted are any fractional digits (also none) as long as they fit into nano-seconds precision and the suffix &ldquo;s&rdquo; is required.</td>
</tr>
<tr>
<td style="text-align:left">Struct</td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left"><code>{ â€¦ }</code></td>
<td style="text-align:left">Any JSON object. See <code>struct.proto</code>.</td>
</tr>
<tr>
<td style="text-align:left">Wrapper types</td>
<td style="text-align:left">various types</td>
<td style="text-align:left"><code>2, &quot;2&quot;, &quot;foo&quot;, true, &quot;true&quot;, null, 0, â€¦</code></td>
<td style="text-align:left">Wrappers use the same representation in JSON as the wrapped primitive type, except that <code>null</code> is allowed and preserved during data conversion and transfer.</td>
</tr>
<tr>
<td style="text-align:left">FieldMask</td>
<td style="text-align:left">string</td>
<td style="text-align:left"><code>&quot;f.fooBar,h&quot;</code></td>
<td style="text-align:left">See <code>field_mask.proto</code>.</td>
</tr>
<tr>
<td style="text-align:left">ListValue</td>
<td style="text-align:left">array</td>
<td style="text-align:left"><code>[foo, bar, â€¦]</code></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Value</td>
<td style="text-align:left">value</td>
<td style="text-align:left"></td>
<td style="text-align:left">Any JSON value. Check <a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#google.protobuf.Value">google.protobuf.Value</a> for details.</td>
</tr>
<tr>
<td style="text-align:left">NullValue</td>
<td style="text-align:left">null</td>
<td style="text-align:left"></td>
<td style="text-align:left">JSON null</td>
</tr>
<tr>
<td style="text-align:left">Empty</td>
<td style="text-align:left">object</td>
<td style="text-align:left"><code>{}</code></td>
<td style="text-align:left">An empty JSON object</td>
</tr>
</tbody>
</table>
<p>å‚è€ƒ <a href="https://developers.google.com/protocol-buffers/docs/proto3#json">https://developers.google.com/protocol-buffers/docs/proto3#json</a></p>
<h2 id="protobuf-è‡ªå®šä¹‰goå­—æ®µçš„json-tag">protobuf è‡ªå®šä¹‰Goå­—æ®µçš„json Tag<a hidden class="anchor" aria-hidden="true" href="#protobuf-è‡ªå®šä¹‰goå­—æ®µçš„json-tag">#</a></h2>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#json_options">å®˜æ–¹æ–‡æ¡£</a> è¯´æ˜</p>
<blockquote>
<p>A proto3 JSON implementation may provide the following options:</p>
<ul>
<li><strong>Emit fields with default values</strong>: Fields with default values are omitted by default in proto3 JSON output. An implementation may provide an option to override this behavior and output fields with their default values.</li>
<li><strong>Ignore unknown fields</strong>: Proto3 JSON parser should reject unknown fields by default but may provide an option to ignore unknown fields in parsing.</li>
<li><strong>Use proto field name instead of lowerCamelCase name</strong>: By default proto3 JSON printer should convert the field name to lowerCamelCase and use that as the JSON name. An implementation may provide an option to use proto field name as the JSON name instead. Proto3 JSON parsers are required to accept both the converted lowerCamelCase name and the proto field name.</li>
<li><strong>Emit enum values as integers instead of strings</strong>: The name of an enum value is used by default in JSON output. An option may be provided to use the numeric value of the enum value instead.</li>
</ul>
</blockquote>
<p>proto</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-protobuf" data-lang="protobuf"><span style="display:flex;"><span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">Blog</span> {<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">int64</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> [json_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;uid&#34;</span>];<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> titleName <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> author_name <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>[json_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;author_name&#34;</span>];<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">string</span> img <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>  <span style="color:#66d9ef">int64</span> CountNum <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>ç”Ÿæˆgoæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Blog</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">state</span>         <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">MessageState</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">sizeCache</span>     <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">SizeCache</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">unknownFields</span> <span style="color:#a6e22e">protoimpl</span>.<span style="color:#a6e22e">UnknownFields</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Id</span>         <span style="color:#66d9ef">int64</span>  <span style="color:#e6db74">`protobuf:&#34;varint,1,opt,name=id,json=uid,proto3&#34; json:&#34;id,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">TitleName</span>  <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,2,opt,name=titleName,proto3&#34; json:&#34;titleName,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">AuthorName</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,3,opt,name=author_name,json=author_name,proto3&#34; json:&#34;author_name,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Img</span>        <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`protobuf:&#34;bytes,4,opt,name=img,proto3&#34; json:&#34;img,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">CountNum</span>   <span style="color:#66d9ef">int64</span>  <span style="color:#e6db74">`protobuf:&#34;varint,5,opt,name=CountNum,proto3&#34; json:&#34;CountNum,omitempty&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>golandçš„å®æ—¶æ¨¡æ¿å¦‚ä¸‹,æ–¹ä¾¿å¿«é€Ÿä½¿ç”¨</p>
<pre tabindex="0"><code>[json_name = &#34;$FIELD_NAME$&#34;$END$]
</code></pre><p>è®¾ç½®å‚è€ƒä¸‹å›¾
<img loading="lazy" src="https://assets.czyt.tech/img/protobuf-json-tag.png" alt="image-20220929093236710"  />
</p>
<h2 id="å‚è€ƒ">å‚è€ƒ<a hidden class="anchor" aria-hidden="true" href="#å‚è€ƒ">#</a></h2>
<ul>
<li><a href="https://developers.google.com/protocol-buffers">protocol bufferså®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://github.com/mennanov/fieldmask-utils">https://github.com/mennanov/fieldmask-utils</a></li>
<li>Netflixå®ç”¨APIè®¾è®¡ï¼šProtobuf FieldMaskå®è·µ <a href="http://dockone.io/article/2434655">part1</a> <a href="https://dockone.io/article/2434656">part2</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/510438339">go-kratos HTTPæ–¹æ³•æ”¯æŒä»¥åŠFieldMaskçš„ä½¿ç”¨ç®€ä»‹</a></li>
<li><a href="https://software-factotum.medium.com/protobuf-and-go-handling-oneof-field-type-172ca780ec47">Protobuf and Go: Handling Oneof Field type</a></li>
<li><a href="https://cloud.google.com/apis/design/standard_methods#update">google api design: update</a></li>
<li><a href="https://www.liwenzhou.com/posts/Go/oneof-wrappers-field_mask/">protobufä¸­ä½¿ç”¨oneofã€WrapValueå’ŒFieldMask</a></li>
<li><a href="https://www.liwenzhou.com/posts/Go/Protobuf3-language-guide-zh/">Protocol Buffers V3ä¸­æ–‡è¯­æ³•æŒ‡å—</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://czyt.tech/tags/golang/">golang</a></li>
      <li><a href="https://czyt.tech/tags/protobuf/">protobuf</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://czyt.tech/post/go-kratos-usage-memo/">
    <span class="title">Â« Prev Page</span>
    <br>
    <span>go-kratosä½¿ç”¨å¤‡å¿˜</span>
  </a>
  <a class="next" href="https://czyt.tech/post/use-gotests-to-generate-table-driven-tests/">
    <span class="title">Next Page Â»</span>
    <br>
    <span>ä½¿ç”¨gotestsç”Ÿæˆè¡¨é©±åŠ¨æµ‹è¯•</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Protobuf golangå°æœ­ on twitter"
        href="https://twitter.com/intent/tweet/?text=Protobuf%20golang%e5%b0%8f%e6%9c%ad&amp;url=https%3a%2f%2fczyt.tech%2fpost%2fprotobuf-golang-litle-notes%2f&amp;hashtags=golang%2cprotobuf">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Protobuf golangå°æœ­ on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fczyt.tech%2fpost%2fprotobuf-golang-litle-notes%2f&amp;title=Protobuf%20golang%e5%b0%8f%e6%9c%ad&amp;summary=Protobuf%20golang%e5%b0%8f%e6%9c%ad&amp;source=https%3a%2f%2fczyt.tech%2fpost%2fprotobuf-golang-litle-notes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Protobuf golangå°æœ­ on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fczyt.tech%2fpost%2fprotobuf-golang-litle-notes%2f&title=Protobuf%20golang%e5%b0%8f%e6%9c%ad">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Protobuf golangå°æœ­ on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fczyt.tech%2fpost%2fprotobuf-golang-litle-notes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Protobuf golangå°æœ­ on whatsapp"
        href="https://api.whatsapp.com/send?text=Protobuf%20golang%e5%b0%8f%e6%9c%ad%20-%20https%3a%2f%2fczyt.tech%2fpost%2fprotobuf-golang-litle-notes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Protobuf golangå°æœ­ on telegram"
        href="https://telegram.me/share/url?text=Protobuf%20golang%e5%b0%8f%e6%9c%ad&amp;url=https%3a%2f%2fczyt.tech%2fpost%2fprotobuf-golang-litle-notes%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
<script src="https://utteranc.es/client.js"
repo="czyt/comments"
issue-term="pathname"
theme="github-light"
crossorigin="anonymous"
async>
</script>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://czyt.tech/">è™«å­æ¨±æ¡ƒ</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
        <span id="busuanzi_container_site_pv">Total visited<span id="busuanzi_value_site_pv"></span>times</span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }
const loadScript = (url, onloadFunction) => {
    var newScript = document.createElement("script");
    newScript.onerror =  (oError) => {
      throw new URIError("The script " + oError.target.src + " didn't load correctly.");
    };
    if (onloadFunction) { newScript.onload = onloadFunction; }
    document.head.insertAdjacentElement('beforeend', newScript);
    newScript.src = url;
  }
  
if (document.querySelectorAll('.mermaid').length > 0) {
      loadScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.1/mermaid.min.js', () => {
        document.head.insertAdjacentHTML("beforeend", `<style>.mermaid svg { background-color: #dadcd8 !important; }</style>`);
        // default, dark, neutral, forest
        mermaid.initialize({ startOnLoad: false, securityLevel: "strict", logLevel: 1, theme: "neutral" });
        
        
        mermaid.init();
        console.log("mermaid init done");
      })
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>


<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>
<script>
  mediumZoom('.entry-cover img');
  mediumZoom('.post-content img:not([no-zoom])');
</script>


<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
	
</script>
</body>

</html>
