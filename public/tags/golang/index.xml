<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>golang on è™«å­æ¨±æ¡ƒ</title>
    <link>https://czyt.tech/tags/golang/</link>
    <description>Recent content in golang on è™«å­æ¨±æ¡ƒ</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sat, 29 Oct 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://czyt.tech/tags/golang/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ä½¿ç”¨protoc-gen-starç¼–å†™protocæ’ä»¶</title>
      <link>https://czyt.tech/post/writing-a-protoc-plugin-using-protoc-gen-star/</link>
      <pubDate>Sat, 29 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/writing-a-protoc-plugin-using-protoc-gen-star/</guid>
      <description>é¢„å¤‡çŸ¥è¯† éœ€è¦å®‰è£…çš„è½¯ä»¶ protoc golang go è½¯ä»¶åŒ… github.com/lyft/protoc-gen-star æ’ä»¶è°ƒç”¨æ­¥éª¤ protocï¼ŒPBç¼–è¯‘å™¨ï¼Œä½¿ç”¨ä¸€ç»„æ ‡å¿—ï¼ˆè®°å½•åœ¨protoc -hä¸‹ï¼‰è¿›è¡Œé…ç½®ï¼Œå¹¶å°†ä¸€ç»„æ–‡ä»¶ä½œä¸ºå‚æ•°äº¤ç»™å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒIæ ‡å¿—å¯ä»¥è¢«å¤šæ¬¡æŒ‡å®šï¼Œæ˜¯å®ƒåœ¨protoæ–‡ä»¶ä¸­ç”¨äºå¯¼å…¥ä¾èµ–å…³ç³»çš„æŸ¥æ‰¾è·¯å¾„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®˜æ–¹æè¿°ç¬¦protoså·²ç»è¢«åŒ…å«åœ¨å†…ã€‚
myplugin_out å‘Šè¯‰ protoc ä½¿ç”¨ protoc-gen-myplugin protoc-pluginã€‚è¿™äº›æ’ä»¶ä¼šä»ç³»ç»Ÿçš„ PATH ç¯å¢ƒå˜é‡ä¸­è‡ªåŠ¨è§£æï¼Œæˆ–è€…å¯ä»¥ç”¨å¦ä¸€ä¸ªæ ‡å¿—æ˜ç¡®æŒ‡å®šã€‚å®˜æ–¹çš„protoc-plugins (ä¾‹å¦‚ï¼Œprotoc-gen-python) å·²ç»åœ¨protocæ³¨å†Œäº†ã€‚è¯¥æ ‡å¿—çš„å€¼æ˜¯ç‰¹å®šäºç‰¹å®šæ’ä»¶çš„ï¼Œä½† :&amp;hellip;/generated åç¼€é™¤å¤–ã€‚è¿™ä¸ªåç¼€è¡¨ç¤ºprotocå°†æŠŠè¯¥åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ”¾åœ¨å“ªä¸ªæ ¹ç›®å½•ä¸‹ï¼ˆç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•ï¼‰ã€‚ç„¶è€Œï¼Œè¿™ä¸ªç”Ÿæˆçš„è¾“å‡ºç›®å½•ä¸ä¼šä¼ æ’­ç»™ protoc-gen-mypluginï¼Œæ‰€ä»¥å®ƒéœ€è¦åœ¨æ ‡å¿—çš„å·¦è¾¹é‡å¤ã€‚PG* é€šè¿‡ä¸€ä¸ª output_path å‚æ•°æ”¯æŒè¿™ä¸€ç‚¹ã€‚
protoc è§£æä¼ å…¥çš„ proto æ–‡ä»¶ï¼Œç¡®ä¿å®ƒä»¬åœ¨è¯­æ³•ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œå¹¶åŠ è½½ä»»ä½•å¯¼å…¥çš„ä¾èµ–é¡¹ã€‚å®ƒå°†è¿™äº›æ–‡ä»¶å’Œä¾èµ–å…³ç³»è½¬æ¢æˆæè¿°ç¬¦ (å®ƒä»¬æœ¬èº«å°±æ˜¯ PB æ¶ˆæ¯)ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª CodeGeneratorRequest (åˆæ˜¯ä¸€ä¸ª PB)ã€‚protoc å°†è¿™ä¸ªè¯·æ±‚åºåˆ—åŒ–ï¼Œç„¶åæ‰§è¡Œæ¯ä¸ªé…ç½®çš„ protoc-pluginï¼Œé€šè¿‡ stdin å‘é€æœ‰æ•ˆè½½è·ã€‚
protoc-gen-myplugin å¯åŠ¨ï¼Œæ¥æ”¶è¯·æ±‚çš„æœ‰æ•ˆè½½è·ï¼Œå¹¶å°†å…¶è§£å¯†ã€‚ä¸€ä¸ªåŸºäº PG* çš„ protoc-plugin æœ‰ä¸¤ä¸ªé˜¶æ®µã€‚é¦–å…ˆï¼ŒPG* å¯¹ä» protoc æ”¶åˆ°çš„ CodeGeneratorRequest è¿›è¡Œè§£å¯†ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–‡ä»¶å’Œå…¶åŒ…å«çš„æ‰€æœ‰å®ä½“åˆ›å»ºä¸€ä¸ªå®Œå…¨è¿æ¥çš„æŠ½è±¡è¯­æ³•æ ‘ (AST)ã€‚ä¸ºè¿™ä¸ªæ’ä»¶æŒ‡å®šçš„ä»»ä½•å‚æ•°ä¹Ÿä¼šè¢«è§£æï¼Œä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚
å½“è¿™ä¸€æ­¥å®Œæˆåï¼ŒPG*å°±ä¼šæ‰§è¡Œä»»ä½•æ³¨å†Œçš„æ¨¡å—ï¼ŒæŠŠæ„å»ºçš„ASTäº¤ç»™å®ƒã€‚æ¨¡å—å¯ä»¥è¢«å†™æˆç”Ÿæˆäººå·¥åˆ¶å“ï¼ˆä¾‹å¦‚ï¼Œæ–‡ä»¶ï¼‰ï¼Œæˆ–è€…åªæ˜¯å¯¹æ‰€æä¾›çš„å›¾è¿›è¡ŒæŸç§å½¢å¼çš„éªŒè¯è€Œæ²¡æœ‰ä»»ä½•å…¶ä»–å‰¯ä½œç”¨ã€‚æ¨¡å—åœ¨é’ˆå¯¹PBçš„æ“ä½œæ–¹é¢æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚
ä¸€æ—¦æ‰€æœ‰çš„æ¨¡å—éƒ½è¢«è¿è¡Œï¼ŒPG*ä¼šå°†ä»»ä½•è‡ªå®šä¹‰çš„å·¥ä»¶å†™å…¥æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ–è€…å°†ç”Ÿæˆå™¨ç‰¹å®šçš„å·¥ä»¶åºåˆ—åŒ–ä¸ºCodeGeneratorResponseå¹¶å°†æ•°æ®å‘é€åˆ°å…¶stdoutã€‚è¿™æ•´ä¸ªæµç¨‹çœ‹èµ·æ¥åƒè¿™æ ·ã€‚
foo.proto â†’ protoc â†’ CodeGeneratorRequest â†’ protoc-gen-myplugin â†’ CodeGeneratorResponse â†’ protoc â†’ foo.pb.go å‡è®¾æ’ä»¶åç§°ä¸ºdiy,åˆ™éœ€è¦ç¼–è¯‘ç¨‹åºä¸ºprotoc-gen-diyï¼Œå¹¶å°†ç¨‹åºåŠ å…¥ç³»ç»ŸPathå˜é‡ï¼Œé€šè¿‡ä¸‹é¢çš„å‘½ä»¤è°ƒç”¨æ’ä»¶ã€‚
protoc -I .</description>
    </item>
    
    <item>
      <title>tailscaleçš„æ³›å‹SingleFlight</title>
      <link>https://czyt.tech/post/generic-singleflight-by-tailscale/</link>
      <pubDate>Fri, 23 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/generic-singleflight-by-tailscale/</guid>
      <description>æºåœ°å€ tailscaleä»“åº“
å®Œæ•´ä»£ç å¦‚ä¸‹
// Copyright (c) 2022 Tailscale Inc &amp;amp; AUTHORS All rights reserved. // Use of this source code is governed by a BSD-style // license that can be found in the LICENSE file. // Copyright 2013 The Go Authors. All rights reserved. // Use of this source code is governed by a BSD-style // license that can be found in the LICENSE file. // Package singleflight provides a duplicate function call suppression // mechanism.</description>
    </item>
    
    <item>
      <title>Golang é»˜è®¤çš„CGOå‚æ•°ç¼–è¯‘å¯¼è‡´çš„GLIBCé”™è¯¯</title>
      <link>https://czyt.tech/post/golang-default-cgo-flags-caused-glibc-missing-error/</link>
      <pubDate>Tue, 30 Aug 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-default-cgo-flags-caused-glibc-missing-error/</guid>
      <description>é—®é¢˜æè¿° ä½¿ç”¨goæ­£å¸¸ç¼–è¯‘äº†Linuxä¸‹çš„ç¨‹åºï¼Œæ”¾åˆ°æœåŠ¡å™¨ä¸ŠæŠ¥é”™
./app: /lib64/libc.so.6: version `GLIBC_2.34&amp;#39; not found (required by ./app) è§£å†³ Googleäº†ä¸‹ï¼Œå‘ç°ç›¸åŒçš„Issue,äºæ˜¯é€šè¿‡go envæ£€æŸ¥æœ¬æœºgolangè¿è¡Œç¯å¢ƒï¼Œå‘ç°CGOé»˜è®¤å¯ç”¨è€Œä¸”ç¨‹åºä¹Ÿä¸æ¶‰åŠCGOç›¸å…³çš„ä¸œè¥¿ï¼Œäºæ˜¯è®¾ç½®CGOå‚æ•°ä¸ºå…³é—­ã€‚ç„¶åç¼–è¯‘ç¨‹åº
CGO_ENABLED=&amp;quot;0&amp;quot; go build -v
é‡æ–°ä¸Šä¼ ï¼Œè¿è¡ŒOK.</description>
    </item>
    
    <item>
      <title>golang httpå®¢æˆ·ç«¯ä½¿ç”¨è‡ªå®šä¹‰dns</title>
      <link>https://czyt.tech/post/golang-http-use-custom-dns/</link>
      <pubDate>Mon, 22 Aug 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-http-use-custom-dns/</guid>
      <description>æ‘˜è‡ªäº’è”ç½‘ åŸæ–‡
package main import ( &amp;#34;context&amp;#34; &amp;#34;io/ioutil&amp;#34; &amp;#34;log&amp;#34; &amp;#34;net&amp;#34; &amp;#34;net/http&amp;#34; &amp;#34;time&amp;#34; ) func main() { var ( dnsResolverIP = &amp;#34;8.8.8.8:53&amp;#34; // Google DNS resolver. dnsResolverProto = &amp;#34;udp&amp;#34; // Protocol to use for the DNS resolver dnsResolverTimeoutMs = 5000 // Timeout (ms) for the DNS resolver (optional) ) dialer := &amp;amp;net.Dialer{ Resolver: &amp;amp;net.Resolver{ PreferGo: true, Dial: func(ctx context.Context, network, address string) (net.Conn, error) { d := net.Dialer{ Timeout: time.Duration(dnsResolverTimeoutMs) * time.</description>
    </item>
    
    <item>
      <title>go-kratosä½¿ç”¨å¤‡å¿˜</title>
      <link>https://czyt.tech/post/go-kratos-usage-memo/</link>
      <pubDate>Fri, 12 Aug 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/go-kratos-usage-memo/</guid>
      <description>è‡ªå®šä¹‰æ¥å£è¿”å›å†…å®¹ æ­£å¸¸çš„å“åº”åºåˆ—åŒ–é€»è¾‘é€šè¿‡Response Encoderå®ç°ã€‚
é”™è¯¯çš„åºåˆ—åŒ–é€»è¾‘é€šè¿‡ErrorEncoderå®ç°ã€‚
æ³¨æ„ï¼šè‡ªå®šä¹‰Encoderåï¼Œå¯èƒ½ä¼šé‡åˆ°é›¶å€¼å­—æ®µè¢«å¿½ç•¥çš„æƒ…å†µï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªissueã€‚å…·ä½“çš„è§£å†³åŠæ³•æ˜¯
protoå®šä¹‰è¿”å›å†…å®¹ï¼Œç„¶åå°†ç”Ÿæˆçš„ç±»å‹åœ¨encoderä¸­ä½¿ç”¨ã€‚
ç®€å•ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š
protoå®šä¹‰
import &amp;#34;google/protobuf/any.proto&amp;#34;; // BaseResponse is the base response message BaseResponse{ int32 code = 1 [json_name = &amp;#34;code&amp;#34;]; google.protobuf.Any data = 2 [json_name = &amp;#34;data&amp;#34;]; } goä»£ç 
func CustomResponseEncoder() http.ServerOption { return http.ResponseEncoder(func(w http.ResponseWriter, r *http.Request, i interface{}) error { reply := &amp;amp;v1.BaseResponse{ Code: 0, } if m, ok := i.(proto.Message); ok { payload, err := anypb.New(m) if err != nil { return err } reply.</description>
    </item>
    
    <item>
      <title>Protobuf golangå°æœ­</title>
      <link>https://czyt.tech/post/protobuf-golang-litle-notes/</link>
      <pubDate>Mon, 25 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/protobuf-golang-litle-notes/</guid>
      <description>Oneof å¦‚æœæ‚¨æœ‰è®¸å¤šå­—æ®µçš„æ¶ˆæ¯ï¼Œå¹¶ä¸”æœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨OneofåŠŸèƒ½æ¥æ‰§è¡Œæ­¤è¡Œä¸ºå¹¶ä¿å­˜å†…å­˜ã€‚ä¸€ä¸ªå­—æ®µå°±åƒå¸¸è§„å­—æ®µä¸€æ ·ï¼Œé™¤äº†å•ä¸€å…±äº«å†…å­˜ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œæœ€å¤šå¯ä»¥åŒæ—¶è®¾ç½®ä¸€ä¸ªå­—æ®µã€‚è®¾ç½®Oneofçš„ä»»ä½•æˆå‘˜éƒ½ä¼šè‡ªåŠ¨æ¸…é™¤æ‰€æœ‰å…¶ä»–æˆå‘˜ã€‚
â€‹	Google protobuf æ–‡æ¡£#Oneof
ç¤ºä¾‹proto åˆ›å»ºprotoOneof.proto çš„protoæ–‡ä»¶
syntax = &amp;#34;proto3&amp;#34;; package oneof_test; option go_package =&amp;#39;.;oneof&amp;#39;; message WeiboUser{ string user_id = 1; string user_nick = 2; } message DouyinUser{ string auth_token = 1; string nick_name = 2; } message User{ oneof user_source{ string weibo_url = 1; string douyin_url = 2; } oneof user_info{ WeiboUser weibo_user_info = 3; DouyinUser douyin_user_info = 4; } } ä½¿ç”¨å‘½ä»¤ç”Ÿæˆgoä»£ç 
protoc --proto_path=. --go_out=paths=source_relative:./oneof ./protoOneof.proto ç”Ÿæˆçš„protoOneof.pb.goä»£ç å¦‚ä¸‹ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨gotestsç”Ÿæˆè¡¨é©±åŠ¨æµ‹è¯•</title>
      <link>https://czyt.tech/post/use-gotests-to-generate-table-driven-tests/</link>
      <pubDate>Fri, 22 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/use-gotests-to-generate-table-driven-tests/</guid>
      <description>ä½¿ç”¨gotestså¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”Ÿæˆè¡¨é©±åŠ¨æµ‹è¯•ä»£ç ï¼Œè¡¨é©±åŠ¨æµ‹è¯•çš„å…·ä½“å†…å®¹ï¼Œè¯·å‚è€ƒgoå®˜æ–¹çš„wikiã€‚ä¸‹é¢æ˜¯å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ã€‚
å®‰è£… ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œå®‰è£…
go install github.com/cweill/gotests/gotests@latest å¦‚æœæ˜¯go1.16ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ go get -u github.com/cweill/gotests/...æ¥è¿›è¡Œå®‰è£…ã€‚
ä½¿ç”¨ gotestsæ”¯æŒçš„å‚æ•°å¦‚ä¸‹ï¼š
Usage of C:\Users\czyt\go\bin\gotests.exe:-allgenerate tests for all functions and methods-excl stringregexp. generate tests for functions and methods that don&amp;#39;t match. Takes precedence over -only, -exported, and -all-exportedgenerate tests for exported functions and methods. Takes precedence over -only and -all-i print test inputs in error messages-nosubtestsdisable generating tests using the Go 1.</description>
    </item>
    
    <item>
      <title>Golang Exprä¸å®Œå…¨æŒ‡å—</title>
      <link>https://czyt.tech/post/golang-expr-uncompleted-reference/</link>
      <pubDate>Wed, 13 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-expr-uncompleted-reference/</guid>
      <description>å®‰è£… åº“çš„è¯´æ˜
Expr package provides an engine that can compile and evaluate expressions. An expression is a one-liner that returns a value (mostly, but not limited to, booleans). It is designed for simplicity, speed and safety.
The purpose of the package is to allow users to use expressions inside configuration for more complex logic. It is a perfect candidate for the foundation of a business rule engine.
å®‰è£…
go get -u /github.</description>
    </item>
    
    <item>
      <title>Golang DSLå‚è€ƒ</title>
      <link>https://czyt.tech/post/golang-dsl-reference/</link>
      <pubDate>Mon, 11 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-dsl-reference/</guid>
      <description>ANTLR 4 å›¾ä¹¦ The definitive ANTLR 4 reference (2014) è‹±æ–‡ç‰ˆä¸‹è½½ ä¸­æ–‡ç‰ˆä¸‹è½½ æ–‡ç«  ä½¿ç”¨ANTLRå’ŒGoå®ç°DSLå…¥é—¨ æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ANTLRå’ŒGoå®ç°ä¸€é—¨DSLè¯­è¨€part1 part2part3part4part5 Parsing with ANTLR 4 and Go å®ä¾‹ä»£ç  bilibili gengine link go-zero link grule-rule-engine Others å›¾ä¹¦ Writing A Compiler In Go Writing an Interpreter in Go ÂµGoè¯­è¨€å®ç°â€”â€”ä»å¤´å¼€å‘ä¸€ä¸ªè¿·ä½ Goè¯­è¨€ç¼–è¯‘å™¨ æ–‡ç«  Build your own DSL with Go &amp;amp; HCL
How to Write Syntax Tree-Based Domain-Specific Languages in Go
Handwritten Parsers &amp;amp; Lexers in Go
goyaccå®æˆ˜
TiDB SQL Parser çš„å®ç°</description>
    </item>
    
    <item>
      <title>Golang io.Pipe ä½¿ç”¨</title>
      <link>https://czyt.tech/post/golang-io-pipe-usage/</link>
      <pubDate>Fri, 24 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-io-pipe-usage/</guid>
      <description>ä»‹ç» // Pipe creates a synchronous in-memory pipe. // It can be used to connect code expecting an io.Reader // with code expecting an io.Writer. // // Reads and Writes on the pipe are matched one to one // except when multiple Reads are needed to consume a single Write. // That is, each Write to the PipeWriter blocks until it has satisfied // one or more Reads from the PipeReader that fully consume // the written data.</description>
    </item>
    
    <item>
      <title>go embed ä½¿ç”¨å°è®°</title>
      <link>https://czyt.tech/post/go-embed-usage-note/</link>
      <pubDate>Thu, 23 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/go-embed-usage-note/</guid>
      <description>â€‹ go embed æ˜¯go 1.16 å¼€å§‹æ·»åŠ çš„ç‰¹æ€§ï¼Œå…è®¸åµŒå…¥æ–‡ä»¶åŠæ–‡ä»¶å¤¹ï¼Œåœ¨Goç¨‹åºä¸­è¿›è¡Œä½¿ç”¨ã€‚å®˜æ–¹è¿˜ä¸ºæ­¤æ·»åŠ äº†embed.FSçš„å¯¹è±¡ã€‚ä¸‹é¢å°†å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯è¿›è¡Œç®€å•åˆ—ä¸¾ï¼š
åµŒå…¥å•ä¸ªæ–‡ä»¶ å®˜æ–¹çš„ä¾‹å­
åµŒå…¥æ–‡ä»¶å¹¶ç»‘å®šåˆ°å­—ç¬¦ä¸²å˜é‡ import _ &amp;#34;embed&amp;#34; //go:embed hello.txt var s string print(s) åµŒå…¥æ–‡ä»¶å¹¶ç»‘å®šåˆ°å­—èŠ‚å˜é‡ import _ &amp;#34;embed&amp;#34; //go:embed hello.txt var b []byte print(string(b)) åµŒå…¥æ–‡ä»¶å¹¶ç»‘å®šåˆ°æ–‡ä»¶å¯¹è±¡ import &amp;#34;embed&amp;#34; //go:embed hello.txt var f embed.FS data, _ := f.ReadFile(&amp;#34;hello.txt&amp;#34;) print(string(data)) åµŒå…¥ç›®å½• åµŒå…¥æ—¶ï¼Œå¯ä»¥åœ¨å¤šè¡Œæˆ–è€…ä¸€è¡Œè¾“å…¥è¦åµŒå…¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚
package server import &amp;#34;embed&amp;#34; // content holds our static web server content. //go:embed image/* template/* //go:embed html/index.html var content embed.FS åœ¨åŒ¹é…æ–‡ä»¶å¤¹æ—¶ï¼Œembedä¼šåµŒå…¥åŒ…æ‹¬å­ç›®å½•ä¸‹çš„æ‰€æœ‰é™¤.å’Œ_å¼€å¤´çš„æ–‡ä»¶ï¼ˆé€’å½’ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å¤§è‡´ç­‰ä»·äºä¸‹é¢çš„ä»£ç ï¼š
// content is our static web server content.</description>
    </item>
    
    <item>
      <title>Golang nocopy check</title>
      <link>https://czyt.tech/post/golang-nocopy-check/</link>
      <pubDate>Fri, 17 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-nocopy-check/</guid>
      <description>ç›®çš„ å®ç°nocopyçš„ç›®çš„åœ¨äºï¼Œgolangåœ¨è¿›è¡Œå‚æ•°ä¼ é€’æ—¶ï¼Œéƒ½æ˜¯ä¼ é€’å‰¯æœ¬çš„æ–¹å¼ã€‚ä½†æ˜¯æŸäº›æƒ…å†µï¼Œæˆ‘ä»¬æ˜¯éœ€è¦è¿›è¡Œä¼ é€’å¯¹è±¡çš„å¼•ç”¨çš„ï¼ˆç‰¹åˆ«æ˜¯ä¸€äº›æŒ‡é’ˆå¯¹è±¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªæŒ‡é’ˆçš„å‰¯æœ¬çš„æ“ä½œé€ æˆç¨‹åºé™·å…¥ææ…Œï¼‰ï¼Œä¸ºäº†æœç»è°ƒç”¨è€…çš„å¤åˆ¶ï¼Œåªèƒ½æŒ‡é’ˆä¼ é€’å…¨å±€å”¯ä¸€å¯¹è±¡ã€‚é‚£ä¹ˆå°±å¯ä»¥é€šè¿‡æ·»åŠ nocopyæ¥å®ç°å¯¹go vetå‚æ•°æ”¯æŒçš„no copy æ£€æŸ¥ã€‚
å®ç° golangé‡Œé¢æœ€å¸¸ç”¨çš„sync.WaitGroupå°±æ˜¯é€šè¿‡nocopyå®ç°çš„ã€‚å‚è€ƒå®šä¹‰
// A WaitGroup must not be copied after first use. type WaitGroup struct { noCopy noCopy // 64-bit value: high 32 bits are counter, low 32 bits are waiter count. // 64-bit atomic operations require 64-bit alignment, but 32-bit // compilers do not ensure it. So we allocate 12 bytes and then use // the aligned 8 bytes in them as state, and the other 4 as storage // for the sema.</description>
    </item>
    
    <item>
      <title>golangæ­£åˆ™æ ¡éªŒæ”¯ä»˜å®å¾®ä¿¡æ”¯ä»˜æˆæƒç </title>
      <link>https://czyt.tech/post/golang-check-wechat-alipay-authcode-via-regxp/</link>
      <pubDate>Fri, 17 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-check-wechat-alipay-authcode-via-regxp/</guid>
      <description>å‚è€ƒsdkå®šä¹‰
package main import ( &amp;#34;fmt&amp;#34; &amp;#34;regexp&amp;#34; ) // wechat pay ç”¨æˆ·ä»˜æ¬¾ç æ¡å½¢ç è§„åˆ™ï¼š18ä½çº¯æ•°å­—ï¼Œä»¥10ã€11ã€12ã€13ã€14ã€15å¼€å¤´ // alipay æ”¯ä»˜æˆæƒç ï¼Œ25~30å¼€å¤´çš„é•¿åº¦ä¸º16~24ä½çš„æ•°å­—ï¼Œå®é™…å­—ç¬¦ä¸²é•¿åº¦ä»¥å¼€å‘è€…è·å–çš„ä»˜æ¬¾ç é•¿åº¦ä¸ºå‡† func main() { // wechat regwechat:=regexp.MustCompile(&amp;#34;^(1[0-5])\\d{16}$&amp;#34;) matchwechat := regwechat.MatchString(&amp;#34;154658833119096245&amp;#34;) fmt.Println(matchwechat) // alipay regalipay:=regexp.MustCompile(&amp;#34;^(2[5-9]|30)\\d{14,22}$&amp;#34;) matchalipay := regalipay.MatchString(&amp;#34;307573774583867517336&amp;#34;) fmt.Println(matchalipay) } å‚è€ƒ
å¾®ä¿¡
æ”¯ä»˜å®</description>
    </item>
    
    <item>
      <title>ebpf Golangå‚è€ƒ</title>
      <link>https://czyt.tech/post/ebpf-golang-reference/</link>
      <pubDate>Sat, 11 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/ebpf-golang-reference/</guid>
      <description>æ•´ç†ä¸€ä¸ªåˆ—è¡¨ï¼ŒæŒç»­æ›´æ–°ã€‚
ç†è®º ebfå®˜ç½‘ Bç«™è§†é¢‘ eBPF å’Œ Goï¼Œè¶…èƒ½åŠ›ç»„åˆ å®è·µ Tracing Go Functions with eBPF part1 part2 Getting Started with eBPF and Go Linuxä¸­åŸºäºeBPFçš„æ¶æ„åˆ©ç”¨ä¸æ£€æµ‹æœºåˆ¶ å¦‚ä½•ç”¨eBPFåˆ†æGolangåº”ç”¨ ä½¿ç”¨BPF, å°†Goç½‘ç»œç¨‹åºçš„ååæå‡8å€ ä½¿ç”¨ebpfè·Ÿè¸ªrpcxå¾®æœåŠ¡ BPF MAPæœºåˆ¶ ä¸€ç§é€šç”¨æ•°æ®ç»“æ„ï¼Œå¯ä»¥å­˜å‚¨ä¸åŒç±»å‹æ•°æ®çš„é€šç”¨æ•°æ®ç»“æ„ Andrii Nakryiko æŠ½è±¡æ•°æ®å®¹å™¨(abstract data container) bpfç³»ç»Ÿè°ƒç”¨çš„è¯´æ˜ ã€Šä½¿ç”¨Cè¯­è¨€ä»å¤´å¼€å‘ä¸€ä¸ªHello Worldçº§åˆ«çš„eBPFç¨‹åºã€‹ ã€ŠLinux Observability with BPFã€‹ ã€Šæ­ç§˜BPF mapå‰ç”Ÿä»Šä¸–ã€‹ bpfç³»ç»Ÿè°ƒç”¨è¯´æ˜ å®˜æ–¹bpf mapå‚è€ƒæ‰‹å†Œ bpftoolå‚è€ƒæ‰‹å†Œ ã€ŠBuilding BPF applications with libbpf-bootstrapã€‹ https://github.com/DavadDi/bpf_study golang åŒ… https://github.com/cilium/ebpf </description>
    </item>
    
    <item>
      <title>Goæ€§èƒ½ä¼˜åŒ–å‚è€ƒ</title>
      <link>https://czyt.tech/post/golang-perf-reference/</link>
      <pubDate>Sat, 11 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-perf-reference/</guid>
      <description>ç”µå­ä¹¦ ç¼–å†™å’Œä¼˜åŒ–Goä»£ç  Go Optimizations 101 https://github.com/dgryski/go-perfbook https://github.com/DataDog/go-profiler-notes https://github.com/bobstrecansky/HighPerformanceWithGo/ Go package https://github.com/aclements/go-perf æ–‡ç«  å®˜æ–¹åšå®¢ Profiling Go Programs
https://sumercip.com/posts/inside-the-go-cpu-profiler/
How to Write Benchmarks in Go : https://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go
Debugging performance issues in Go programs : https://github.com/golang/go/wiki/Performance
Go execution tracer : https://blog.gopheracademy.com/advent-2017/go-execution-tracer/ (see also the The tracer design doc link)
A whirlwind tour of Goâ€™s runtime environment variables (see godebug) : https://dave.cheney.net/2015/11/29/a-whirlwind-tour-of-gos-runtime-environment-variables
benchstat : https://godoc.org/golang.org/x/perf/cmd/benchstat
pyroscope: ä¸€ä¸ªç®€å•æ˜“ç”¨çš„æŒç»­å‰–æå¹³å°
VSCODEå¯è§†åŒ–è°ƒè¯•Goç¨‹åº
Jetbrainså®˜æ–¹Golandä»£ç è°ƒè¯•æ–‡æ¡£
https://github.com/cch123/perf_workshop_2021
GOé«˜æ€§èƒ½ç¼–ç¨‹ç²¾å
Go è¯­è¨€ä¸­å„å¼å„æ ·çš„ä¼˜åŒ–æ‰‹æ®µ
Go ä¸­ç®€å•çš„å†…å­˜èŠ‚çœæŠ€å·§</description>
    </item>
    
    <item>
      <title>Cap&#39;n Proto Windowsç¯å¢ƒè®¾ç½®</title>
      <link>https://czyt.tech/post/capn-proto-setup-in-windows/</link>
      <pubDate>Fri, 10 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/capn-proto-setup-in-windows/</guid>
      <description>Cap&amp;rsquo;n proto å·ç§°æ˜¯æ¯”protobuffæ›´å¿«çš„protoè¯­è¨€ã€‚å®˜ç½‘æˆªå›¾
Capâ€™n Proto is an insanely fast data interchange format and capability-based RPC system. Think JSON, except binary. Or think Protocol Buffers, except faster. In fact, in benchmarks, Capâ€™n Proto is INFINITY TIMES faster than Protocol Buffers.
åè®®ç‰¹æ€§
Capâ€™n Protoâ€™s RPC protocol has the following notable features. Since the protocol is complicated, the feature set has been divided into numbered â€œlevelsâ€, so that implementations may declare which features they have covered by advertising a level number.</description>
    </item>
    
    <item>
      <title>Golangåå°„ä½¿ç”¨æŒ‡å—</title>
      <link>https://czyt.tech/post/golang-reflect-reference/</link>
      <pubDate>Thu, 02 Jun 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-reflect-reference/</guid>
      <description>Goæ˜¯ä¸€é—¨å¼ºç±»å‹çš„è¯­è¨€ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç”³æ˜ä¸€ä¸ªå˜é‡ã€å‡½æ•°ã€structéƒ½æ˜¯ç›´æˆªäº†å½“çš„ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›éƒ½æ˜¯å¤Ÿç”¨çš„ï¼Œä½†æœ‰æ—¶ä½ æƒ³åœ¨ç¨‹åºè¿è¡Œä¸­æ¥åŠ¨æ€æ‰©å±•ç¨‹åºçš„ä¿¡æ¯ï¼Œä¹Ÿè®¸ä½ æƒ³æŠŠæ–‡ä»¶æˆ–ç½‘ç»œè¯·æ±‚ä¸­çš„æ•°æ®æ˜ å°„åˆ°ä¸€ä¸ªå˜é‡ä¸­;ä¹Ÿè®¸ä½ æƒ³å»ºç«‹ä¸€ä¸ªèƒ½å¤„ç†ä¸åŒç±»å‹çš„å·¥å…·(è™½ç„¶Go1.18æœ‰äº†æ³›å‹)ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨åå°„ã€‚åå°„ä½¿ä½ æœ‰èƒ½åŠ›åœ¨è¿è¡Œæ—¶æ£€æŸ¥ã€ä¿®æ”¹å’Œåˆ›å»ºå˜é‡ã€å‡½æ•°å’Œç»“æ„çš„èƒ½åŠ›ã€‚
åå°„çš„æ ¸å¿ƒ å›¾ç‰‡è½¬è‡ª Go è¯­è¨€è®¾è®¡ä¸å®ç°
åå°„çš„ä¸‰å¤§æ ¸å¿ƒæ˜¯*Types, Kinds, Values,ä¸‹é¢å°†å›´ç»•è¿™ä¸‰ä¸ªæ–¹é¢æ¥è¿›è¡Œè®²è§£ã€‚
æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªstructå¯¹è±¡ã€‚
type User struct { Name	string Age int } ç±»å‹Types é€šè¿‡åå°„è·å–ç±»å‹
u := User{ Name: &amp;#34;czyt&amp;#34;, Age: 18, } uptr := &amp;amp;u ot := reflect.TypeOf(u) otptr := reflect.TypeOf(uptr) log.Println(ot.Name()) // æ‰“å° User log.Println(otptr.Name()) // æ‰“å° ç©º é€šè¿‡è°ƒç”¨Name()æ–¹æ³•è¿”å›ç±»å‹çš„åç§°ï¼ŒæŸäº›ç±»å‹ï¼Œå¦‚åˆ‡ç‰‡æˆ–æŒ‡é’ˆï¼Œæ²¡æœ‰åç§°ï¼Œæ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚
ç§ç±»Kinds Kindé€šè¿‡è°ƒç”¨Kind()å¾—æ¥ã€‚
u := User{ Name: &amp;#34;czyt&amp;#34;, Age: 18, } uptr := &amp;amp;u ot := reflect.TypeOf(u) otptr := reflect.TypeOf(uptr) log.Println(ot.Kind()) // è¾“å‡º struct log.Println(otptr.Kind()) // è¾“å‡º ptr Kind() è¿”å›çš„æ˜¯kindç±»å‹çš„æšä¸¾ã€‚</description>
    </item>
    
    <item>
      <title>Golang MongoDB ODM mgmä½¿ç”¨</title>
      <link>https://czyt.tech/post/golang-mongodb-mgm-odm-usage/</link>
      <pubDate>Tue, 31 May 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-mongodb-mgm-odm-usage/</guid>
      <description>(æœ¬æ–‡å¤§éƒ¨åˆ†å†…å®¹æ ¹æ®å®˜æ–¹æ–‡æ¡£ç¿»è¯‘è€Œæ¥)
ç¯å¢ƒå‡†å¤‡ golang 1.10+ mongodb mgm æ¨¡å‹å®šä¹‰ å®šä¹‰ å®šä¹‰æ¨¡å‹
type Book struct { // DefaultModel adds _id, created_at and updated_at fields to the Model mgm.DefaultModel `bson:&amp;#34;,inline&amp;#34;` Name string `json:&amp;#34;name&amp;#34; bson:&amp;#34;name&amp;#34;` Pages int `json:&amp;#34;pages&amp;#34; bson:&amp;#34;pages&amp;#34;` } func NewBook(name string, pages int) *Book { return &amp;amp;Book{ Name: name, Pages: pages, } } mgm åœ¨åˆ›å»ºè¡¨æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹Modelç”Ÿæˆçš„Collectionåç§°
book:=Book{} // Print your model collection name. collName := mgm.CollName(&amp;amp;book) fmt.Println(collName) // æ‰“å°: books å¦‚æœè¦è‡ªå®šä¹‰ç”ŸæˆCollectionçš„åç§°ã€‚éœ€è¦å®ç°CollectionNameGetteræ¥å£ã€‚
func (model *Book) CollectionName() string { return &amp;#34;my_books&amp;#34; } // mgm return &amp;#34;my_books&amp;#34; collection coll:=mgm.</description>
    </item>
    
    <item>
      <title>MongoDBæ“ä½œæŒ‡åŒ—</title>
      <link>https://czyt.tech/post/operate-mongodb-tutorial/</link>
      <pubDate>Thu, 26 May 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/operate-mongodb-tutorial/</guid>
      <description>TL;DR
ç¯å¢ƒå‡†å¤‡ mongoDB é¢„å¤‡çŸ¥è¯† MongoDBå¸¸è§çš„æ•°æ®ç±»å‹
æ•°æ®ç±»å‹ ç¤ºä¾‹ è¯´æ˜ Null {&amp;quot;x&amp;quot; : null} Boolean {&amp;quot;x&amp;quot; : true} Number {&amp;quot;x&amp;quot; : 3.14} {&amp;quot;x&amp;quot; : 3} {&amp;quot;x&amp;quot; : NumberInt(&amp;quot;3&amp;quot;)} {&amp;quot;x&amp;quot; : NumberLong(&amp;quot;3&amp;quot;)} é»˜è®¤64ä½æµ®ç‚¹æ•°ï¼Œæ•´æ•°éœ€è¦ä½¿ç”¨NumberIntå’ŒNumberLong String {&amp;quot;x&amp;quot; : &amp;quot;foobar&amp;quot;} ç¼–ç æ ¼å¼ä¸ºUTF-8 Date {&amp;quot;x&amp;quot; : new Date()} 64ä½æ—¶é—´æˆ³(ä»January 1, 1970)ï¼Œä¸å­˜æ—¶åŒºã€‚é€šè¿‡new Date()è¿›è¡Œè°ƒç”¨ã€‚ Regular expression {&amp;quot;x&amp;quot; : /foobar/i} javascript æ­£åˆ™ Array {&amp;quot;x&amp;quot; : [&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;]} Embedded document {&amp;quot;x&amp;quot; : {&amp;quot;foo&amp;quot; : &amp;quot;bar&amp;quot;}} Object ID {&amp;quot;x&amp;quot; : ObjectId()} æ–‡æ¡£12å­—èŠ‚çš„ID Binary data ä¸€ä¸ªä»»æ„å­—èŠ‚çš„å­—ç¬¦ä¸²ã€‚æ˜¯ä¿å­˜éUTF-8å­—ç¬¦ä¸²åˆ°æ•°æ®åº“çš„å”¯ä¸€æ–¹æ³•ã€‚ Code {&amp;quot;x&amp;quot; : function() { /* .</description>
    </item>
    
    <item>
      <title>Golangç›‘æµ‹Linuxç½‘ç»œäº‹ä»¶</title>
      <link>https://czyt.tech/post/golang-monitor-linux-network-events/</link>
      <pubDate>Tue, 17 May 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-monitor-linux-network-events/</guid>
      <description>ä»£ç  package main import ( &amp;#34;fmt&amp;#34; &amp;#34;syscall&amp;#34; ) func main() { l, _ := ListenNetlink() for { msgs, err := l.ReadMsgs() if err != nil { fmt.Println(&amp;#34;Could not read netlink: %s&amp;#34;, err) } for _, m := range msgs { if IsNewAddr(&amp;amp;m) { fmt.Println(&amp;#34;New Addr&amp;#34;) } if IsDelAddr(&amp;amp;m) { fmt.Println(&amp;#34;Del Addr&amp;#34;) } } } } type NetlinkListener struct { fd int sa *syscall.SockaddrNetlink } func ListenNetlink() (*NetlinkListener, error) { groups := (1 &amp;lt;&amp;lt; (syscall.</description>
    </item>
    
    <item>
      <title>Golang False sharing</title>
      <link>https://czyt.tech/post/golang-false-sharing/</link>
      <pubDate>Thu, 12 May 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-false-sharing/</guid>
      <description>ç¼˜èµ· æ¥è‡ªäºä¸€æ®µprometheusä»£ç 
type stripeLock struct { sync.RWMutex // Padding to avoid multiple locks being on the same cache line. _ [40]byte } ç®€å•åœ°è®²å°±æ˜¯å› ä¸ºCPUè¯»å–æ•°æ®çš„ç¼“å­˜æœºåˆ¶é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½ä¸Šçš„ä¸åŒå·®å¼‚ã€‚å‚è€ƒèµ„æ–™è§åæ–‡ã€‚
å¸¸è§ç±»å‹çš„å†…å­˜å ç”¨å¤§å°ï¼ˆGo101ï¼‰ï¼š
Kinds of Types Value Size Required by Go Specification bool 1 byte not specified int8, uint8 (byte) 1 byte 1 byte int16, uint16 2 bytes 2 bytes int32 (rune), uint32, float32 4 bytes 4 bytes int64, uint64, float64, complex64 8 bytes 8 bytes complex128 16 bytes 16 bytes int, uint 1 word architecture dependent, 4 bytes on 32-bit architectures and 8 bytes on 64-bit architectures uintptr 1 word large enough to store the uninterpreted bits of a pointer value string 2 words not specified pointer (safe or unsafe) 1 word not specified slice 3 words not specified map 1 word not specified channel 1 word not specified function 1 word not specified interface 2 words not specified struct (the sum of sizes of all fields) + (the number of padding bytes) the size of a struct type is zero if it contains no fields that have a size greater than zero array (element value size) * (array length) the size of an array type is zero if its element type has zero size å‚è€ƒ https://medium.</description>
    </item>
    
    <item>
      <title>ä¸ºKratos prtobufæ–‡ä»¶æ·»åŠ å¤šç§ç¼–è¯‘è¾“å‡º</title>
      <link>https://czyt.tech/post/add-muti-kinds-output-for-kratos/</link>
      <pubDate>Fri, 08 Apr 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/add-muti-kinds-output-for-kratos/</guid>
      <description>Csharp å®‰è£…Grpc.tools https://www.nuget.org/packages/Grpc.Tools/
ä¸‹è½½è§£å‹ nupkgæ–‡ä»¶ï¼ˆæ”¹æ‰©å±•åä¸ºzipï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é™„ä»¶çš„7zåŒ…
è§£å‹ æ‰¾åˆ°toolsä¸­å¯¹åº”ç³»ç»Ÿæ¶æ„çš„è½¯ä»¶ï¼Œè®¾ç½®ä¸‹ç¯å¢ƒå˜é‡ï¼Œè®©ç³»ç»Ÿå¯ä»¥æ‰¾åˆ°å°±è¡Œã€‚
Linux éœ€è¦åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥
ln -s `which grpc_csharp_plugin` /usr/bin/protoc-gen-grpc-csharp ä¿®æ”¹Kratosé¡¹ç›®çš„Makeæ–‡ä»¶ åœ¨apiè¿™ä¸ªmakeä»»åŠ¡ä¸­æ·»åŠ ä¸‹é¢å†…å®¹
--csharp_out=./api/pipe/v1 \ --grpc-csharp_out=./api/pipe/v1 \ å®Œæ•´å†…å®¹ä¸º
.PHONY: api # generate api proto api: protoc --proto_path=./api \ --proto_path=./third_party \ --go_out=paths=source_relative:./api \ --go-http_out=paths=source_relative:./api \ --go-grpc_out=paths=source_relative:./api \ --csharp_out=./api/pipe/v1 \ --grpc-csharp_out=./api/pipe/v1 \ --openapi_out==paths=source_relative:. \ å‚è€ƒ
https://github.com/grpc/grpc/blob/master/src/csharp/BUILD-INTEGRATION.md
ğŸ“tools.7z
Python å®‰è£…å¿…è¦åŒ… pip install grpclib protobuf æŸ¥è¯¢è·¯å¾„ which protoc-gen-grpclib_python æˆ–è€… which protoc-gen-python_grpcæˆ‘è¿™é‡Œè¿”å›ä¿¡æ¯å¦‚ä¸‹ï¼š âœ czyt which protoc-gen-grpclib_python /usr/sbin/protoc-gen-grpclib_python å¦‚æ³•ç‚®åˆ¶ï¼Œåˆ›å»ºè½¯é“¾æ¥ ln -s /usr/sbin/protoc-gen-grpclib_python /usr/sbin/protoc-gen-grpc_python ä¿®æ”¹Makefile æ·»åŠ ä¸‹é¢çš„å†…å®¹,å†æ‰§è¡Œmake apiç”Ÿæˆapiå³å¯ã€‚ --python_out=.</description>
    </item>
    
    <item>
      <title>ä¸ªäººGolangç¯å¢ƒå®‰è£…å¿«é€Ÿè®¾ç½®</title>
      <link>https://czyt.tech/post/personal-golang-env-quick-set/</link>
      <pubDate>Thu, 24 Mar 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/personal-golang-env-quick-set/</guid>
      <description>ä¸‹è½½ å®˜æ–¹ä¸‹è½½ https://go.dev/dl/
Google é¦™æ¸¯é•œåƒ
Golang Downloads Mirrors
æ›´å¤šè¯·å‚è€ƒ Thanks Mirror
ç¯å¢ƒè®¾ç½® è®¾ç½®proxy
go env -w GOPROXY=https://goproxy.io,https://goproxy.cn,direct å®‰è£…ç›¸å…³å·¥å…· æ¡†æ¶Cli kratos go install github.com/go-kratos/kratos/cmd/kratos/v2@latest
wire go install github.com/google/wire/cmd/wire@latest
ent go install entgo.io/ent/cmd/ent@latest
entimport go install ariga.io/entimport/cmd/entimport@latest
entproto go install entgo.io/contrib/entproto/cmd/entproto@latest
ä»£ç Lint golangci-lint go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
gofumpt go install mvdan.cc/gofumpt@latest golandè®¾ç½®
GoLand doesn&amp;rsquo;t use gopls so it should be configured to use gofumpt directly. Once gofumpt is installed, follow the steps below:</description>
    </item>
    
    <item>
      <title>grpc-golang windowsç¯å¢ƒæ­å»ºè¯´æ˜</title>
      <link>https://czyt.tech/post/grpc-golang-setup-in-windows/</link>
      <pubDate>Mon, 28 Feb 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/grpc-golang-setup-in-windows/</guid>
      <description>ä¸‹è½½protocï¼Œæ‰“å¼€é“¾æ¥Â ä¸‹è½½åå°†å¯¹åº”çš„æ–‡ä»¶è§£å‹åˆ°gopathçš„binç›®å½•ã€‚ ä¸‹è½½protocçš„golangæ’ä»¶ã€‚ä¸‹è½½åœ°å€ é“¾æ¥Â ä¸‹è½½åæ”¾åœ¨protocçš„åŒçº§ç›®å½•ï¼ˆéœ€è¦æ”¹æ‰©å±•åä¸ºexeï¼‰ æµ‹è¯•ï¼Œå®šä¹‰ä¸€ä¸ªProto syntax = &amp;#34;proto3&amp;#34;; option go_package = &amp;#34;.;hello&amp;#34;; package main; message String { string value = 1; } ç„¶åæ‰§è¡Œå‘½ä»¤ protoc hello.proto --go_out=.Â ,å¤§åŠŸå‘Šæˆï¼Œç”Ÿæˆçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
// Code generated by protoc-gen-go. DO NOT EDIT. // versions: // protoc-gen-go v1.24.0-devel // protoc v3.12.3 // source: hello.proto package hello import ( proto &amp;#34;github.com/golang/protobuf/proto&amp;#34; protoreflect &amp;#34;google.golang.org/protobuf/reflect/protoreflect&amp;#34; protoimpl &amp;#34;google.golang.org/protobuf/runtime/protoimpl&amp;#34; reflect &amp;#34;reflect&amp;#34; sync &amp;#34;sync&amp;#34; ) const ( // Verify that this generated code is sufficiently up-to-date.</description>
    </item>
    
    <item>
      <title>golang webserver with genergic base64 /favicon.ico</title>
      <link>https://czyt.tech/post/golang-web-server-add-base64-favicon/</link>
      <pubDate>Wed, 23 Feb 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-web-server-add-base64-favicon/</guid>
      <description>package main import ( &amp;#34;fmt&amp;#34; &amp;#34;net/http&amp;#34; ) func main() { http.HandleFunc(&amp;#34;/favicon.ico&amp;#34;, favicon) http.HandleFunc(&amp;#34;/&amp;#34;, hello) fmt.Printf(&amp;#34;listening on http://localhost:8000/\n&amp;#34;) http.ListenAndServe(&amp;#34;localhost:8000&amp;#34;, nil) } func favicon(w http.ResponseWriter, r *http.Request) { fmt.Printf(&amp;#34;%s\n&amp;#34;, r.RequestURI) w.Header().Set(&amp;#34;Content-Type&amp;#34;, &amp;#34;image/x-icon&amp;#34;) w.Header().Set(&amp;#34;Cache-Control&amp;#34;, &amp;#34;public, max-age=7776000&amp;#34;) fmt.Fprintln(w, &amp;#34;data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=\n&amp;#34;) } func hello(w http.ResponseWriter, r *http.Request) { fmt.Printf(&amp;#34;%s\n&amp;#34;, r.RequestURI) fmt.Fprintln(w, &amp;#34;Hello, World!&amp;#34;) } </description>
    </item>
    
    <item>
      <title>GolangåµŒå…¥å¯æ‰§è¡Œç¨‹åº</title>
      <link>https://czyt.tech/post/golang-embed-executable-file/</link>
      <pubDate>Wed, 23 Feb 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-embed-executable-file/</guid>
      <description>reddité“¾æ¥ On Linux it might be possible to use the memfd_create system call, but that&amp;rsquo;s not portable to other operating systems.
need go 1.16 +
package main import ( _ &amp;#34;embed&amp;#34; &amp;#34;log&amp;#34; &amp;#34;os&amp;#34; &amp;#34;os/exec&amp;#34; &amp;#34;strconv&amp;#34; &amp;#34;golang.org/x/sys/unix&amp;#34; ) //go:embed binary var embeddedBinary []byte func main() { fd, err := unix.MemfdCreate(&amp;#34;embedded_binary&amp;#34;, 0) if err != nil { log.Fatal(err) } path := &amp;#34;/proc/&amp;#34; + strconv.Itoa(os.Getpid()) + &amp;#34;/fd/&amp;#34; + strconv.Itoa(int(fd)) err = os.WriteFile(path, embeddedBinary, 0755) if err !</description>
    </item>
    
    <item>
      <title>Golangé€šè¿‡sshè¿æ¥æ•°æ®åº“</title>
      <link>https://czyt.tech/post/go-connect-db-via-ssh/</link>
      <pubDate>Wed, 23 Feb 2022 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/go-connect-db-via-ssh/</guid>
      <description>Mysql Postgresql </description>
    </item>
    
    <item>
      <title>golangæ­£åˆ™è¡¨è¾¾å¼å°æœ­</title>
      <link>https://czyt.tech/post/golang-regxp-notes/</link>
      <pubDate>Tue, 27 Jul 2021 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-regxp-notes/</guid>
      <description>å‡†å¤‡å·¥ä½œ golangæ­£åˆ™éœ€è¦å¼•å…¥åŒ…ä¸­çš„regexpåŒ…ã€‚
import ( &amp;#34;regexp&amp;#34; ) å¦‚æœéœ€è¦å¤ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡æ¥æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡Compile() æˆ–è€… MustCompile()åˆ›å»ºä¸€ä¸ªç¼–è¯‘å¥½çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚
æ”¯æŒçš„è¡¨è¾¾å¼ å•ä¸ªåŒ¹é…:
. any character, possibly including newline (flag s=true)[xyz] character class[^xyz] negated character class\d Perl character class\D negated Perl character class[[:alpha:]] ASCII character class[[:^alpha:]] negated ASCII character class\pN Unicode character class (one-letter name)\p{Greek} Unicode character class\PN negated Unicode character class (one-letter name)\P{Greek} negated Unicode character class ç»„åˆåŒ¹é…:
xy x followed by yx|y x or y (prefer x) å¤šæ¬¡åŒ¹é…:</description>
    </item>
    
    <item>
      <title>golangä¸åˆ›å»ºä¸´æ—¶æ–‡ä»¶ä¸Šä¼ ç½‘ç»œæ–‡ä»¶</title>
      <link>https://czyt.tech/post/golang-upload-network-file-with-no-tmp-file/</link>
      <pubDate>Fri, 21 May 2021 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-upload-network-file-with-no-tmp-file/</guid>
      <description>func UploadFromUrl(uploadUrl string, resUrl string,postFileName string, submitField string) error { method := &amp;#34;POST&amp;#34; payload := &amp;amp;bytes.Buffer{} writer := multipart.NewWriter(payload) if res, err := http.Get(resUrl); err != nil { return err } else { defer func() { if res != nil { _ = res.Body.Close() } }() part, _ := writer.CreateFormFile(submitField, postFileName) if _, copyErr := io.Copy(part, res.Body); copyErr != nil { return copyErr } if err := writer.Close(); err != nil { return err } } client := &amp;amp;http.</description>
    </item>
    
    <item>
      <title>golangæ£€æµ‹ç½‘ç»œè¿æ¥æ˜¯å¦å…³é—­</title>
      <link>https://czyt.tech/post/golang-check-netconnection/</link>
      <pubDate>Thu, 11 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-check-netconnection/</guid>
      <description>_, err := conn.Read(make([]byte, 0)) if err!=io.EOF{ // this connection is invalid logger.W(&amp;#34;conn closed....&amp;#34;,err) }else{ byt, _:= ioutil.ReadAll(conn); } æ³¨æ„ï¼šnet: don&amp;rsquo;t return io.EOF from zero byte reads issue
å‚è€ƒ
https://stackoverflow.com/questions/12741386/how-to-know-tcp-connection-is-closed-in-net-package</description>
    </item>
    
    <item>
      <title>golangä½¿ç”¨å®˜æ–¹åº“å®ç°i18n</title>
      <link>https://czyt.tech/post/golang-impl-i18n-with-standard-lib/</link>
      <pubDate>Wed, 10 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>https://czyt.tech/post/golang-impl-i18n-with-standard-lib/</guid>
      <description>ç¤ºä¾‹ package main import ( &amp;#34;fmt&amp;#34; &amp;#34;golang.org/x/text/language&amp;#34; &amp;#34;golang.org/x/text/message&amp;#34; &amp;#34;golang.org/x/text/message/catalog&amp;#34; ) func main() { builder := catalog.NewBuilder() chTag:=language.Make(&amp;#34;zh_Hans&amp;#34;) engTag:=language.Make(&amp;#34;en&amp;#34;) builder.SetString(chTag,&amp;#34;hello&amp;#34;,&amp;#34;æ‚¨å¥½&amp;#34;) builder.SetString(engTag,&amp;#34;hello&amp;#34;,&amp;#34;Hello&amp;#34;) fmt.Println(builder.Languages()) option := message.Catalog(builder) p := message.NewPrinter(chTag,option) p.Printf(&amp;#34;hello&amp;#34;) p2 := message.NewPrinter(engTag,option) p2.Printf(&amp;#34;hello&amp;#34;) } å‚è€ƒ https://zyfdegh.github.io/post/201805-translation-go-i18n https://www.alexedwards.net/blog/i18n-managing-translations https://phrase.com/blog/posts/internationalisation-in-go-with-go-i18n/ https://lokalise.com/blog/go-internationalization-using-go-i18n/ https://go.googlesource.com/proposal/+/master/design/12750-localization.md </description>
    </item>
    
  </channel>
</rss>
